(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function lh(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const yt={},Bs=[],qe=()=>{},Nf=()=>!1,Ur=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ch=e=>e.startsWith("onUpdate:"),It=Object.assign,uh=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},jf=Object.prototype.hasOwnProperty,rt=(e,t)=>jf.call(e,t),K=Array.isArray,ks=e=>Yr(e)==="[object Map]",Wu=e=>Yr(e)==="[object Set]",X=e=>typeof e=="function",At=e=>typeof e=="string",Di=e=>typeof e=="symbol",Lt=e=>e!==null&&typeof e=="object",$u=e=>(Lt(e)||X(e))&&X(e.then)&&X(e.catch),Fu=Object.prototype.toString,Yr=e=>Fu.call(e),Vf=e=>Yr(e).slice(8,-1),Hu=e=>Yr(e)==="[object Object]",dh=e=>At(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,yn=lh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gr=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Uf=/-(\w)/g,Mi=Gr(e=>e.replace(Uf,(t,i)=>i?i.toUpperCase():"")),Yf=/\B([A-Z])/g,hs=Gr(e=>e.replace(Yf,"-$1").toLowerCase()),zu=Gr(e=>e.charAt(0).toUpperCase()+e.slice(1)),uo=Gr(e=>e?`on${zu(e)}`:""),Bi=(e,t)=>!Object.is(e,t),fo=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Nu=(e,t,i,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:i})},Gf=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let nl;const Kr=()=>nl||(nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fh(e){if(K(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],n=At(s)?qf(s):fh(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(At(e)||Lt(e))return e}const Kf=/;(?![^(]*\))/g,Xf=/:([^]+)/,Zf=/\/\*[^]*?\*\//g;function qf(e){const t={};return e.replace(Zf,"").split(Kf).forEach(i=>{if(i){const s=i.split(Xf);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function _h(e){let t="";if(At(e))t=e;else if(K(e))for(let i=0;i<e.length;i++){const s=_h(e[i]);s&&(t+=s+" ")}else if(Lt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Jf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Qf=lh(Jf);function ju(e){return!!e||e===""}const Vu=e=>!!(e&&e.__v_isRef===!0),Uu=e=>At(e)?e:e==null?"":K(e)||Lt(e)&&(e.toString===Fu||!X(e.toString))?Vu(e)?Uu(e.value):JSON.stringify(e,Yu,2):String(e),Yu=(e,t)=>Vu(t)?Yu(e,t.value):ks(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,n],r)=>(i[_o(s,r)+" =>"]=n,i),{})}:Wu(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>_o(i))}:Di(t)?_o(t):Lt(t)&&!K(t)&&!Hu(t)?String(t):t,_o=(e,t="")=>{var i;return Di(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pe;class t_{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pe,!t&&pe&&(this.index=(pe.scopes||(pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=pe;try{return pe=this,t()}finally{pe=i}}}on(){pe=this}off(){pe=this.parent}stop(t){if(this._active){this._active=!1;let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(this.effects.length=0,i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function e_(){return pe}let gt;const po=new WeakSet;class Gu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pe&&pe.active&&pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,po.has(this)&&(po.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rl(this),Zu(this);const t=gt,i=Ae;gt=this,Ae=!0;try{return this.fn()}finally{qu(this),gt=t,Ae=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)yh(t);this.deps=this.depsTail=void 0,rl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?po.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Aa(this)&&this.run()}get dirty(){return Aa(this)}}let Ku=0,mn,wn;function Xu(e,t=!1){if(e.flags|=8,t){e.next=wn,wn=e;return}e.next=mn,mn=e}function ph(){Ku++}function gh(){if(--Ku>0)return;if(wn){let t=wn;for(wn=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;mn;){let t=mn;for(mn=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=i}}if(e)throw e}function Zu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function qu(e){let t,i=e.depsTail,s=i;for(;s;){const n=s.prevDep;s.version===-1?(s===i&&(i=n),yh(s),i_(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}e.deps=t,e.depsTail=i}function Aa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ju(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ju(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Pn))return;e.globalVersion=Pn;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Aa(e)){e.flags&=-3;return}const i=gt,s=Ae;gt=e,Ae=!0;try{Zu(e);const n=e.fn(e._value);(t.version===0||Bi(n,e._value))&&(e._value=n,t.version++)}catch(n){throw t.version++,n}finally{gt=i,Ae=s,qu(e),e.flags&=-3}}function yh(e,t=!1){const{dep:i,prevSub:s,nextSub:n}=e;if(s&&(s.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=s,e.nextSub=void 0),i.subs===e&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)yh(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function i_(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let Ae=!0;const Qu=[];function Ii(){Qu.push(Ae),Ae=!1}function Wi(){const e=Qu.pop();Ae=e===void 0?!0:e}function rl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=gt;gt=void 0;try{t()}finally{gt=i}}}let Pn=0;class s_{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class mh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!gt||!Ae||gt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==gt)i=this.activeLink=new s_(gt,this),gt.deps?(i.prevDep=gt.depsTail,gt.depsTail.nextDep=i,gt.depsTail=i):gt.deps=gt.depsTail=i,td(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const s=i.nextDep;s.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=s),i.prevDep=gt.depsTail,i.nextDep=void 0,gt.depsTail.nextDep=i,gt.depsTail=i,gt.deps===i&&(gt.deps=s)}return i}trigger(t){this.version++,Pn++,this.notify(t)}notify(t){ph();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{gh()}}}function td(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)td(s)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Da=new WeakMap,Ji=Symbol(""),Ia=Symbol(""),Ln=Symbol("");function Nt(e,t,i){if(Ae&&gt){let s=Da.get(e);s||Da.set(e,s=new Map);let n=s.get(i);n||(s.set(i,n=new mh),n.map=s,n.key=i),n.track()}}function _i(e,t,i,s,n,r){const o=Da.get(e);if(!o){Pn++;return}const a=h=>{h&&h.trigger()};if(ph(),t==="clear")o.forEach(a);else{const h=K(e),l=h&&dh(i);if(h&&i==="length"){const c=Number(s);o.forEach((u,f)=>{(f==="length"||f===Ln||!Di(f)&&f>=c)&&a(u)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),l&&a(o.get(Ln)),t){case"add":h?l&&a(o.get("length")):(a(o.get(Ji)),ks(e)&&a(o.get(Ia)));break;case"delete":h||(a(o.get(Ji)),ks(e)&&a(o.get(Ia)));break;case"set":ks(e)&&a(o.get(Ji));break}}gh()}function ds(e){const t=nt(e);return t===e?t:(Nt(t,"iterate",Ln),De(e)?t:t.map(Zt))}function wh(e){return Nt(e=nt(e),"iterate",Ln),e}const n_={__proto__:null,[Symbol.iterator](){return go(this,Symbol.iterator,Zt)},concat(...e){return ds(this).concat(...e.map(t=>K(t)?ds(t):t))},entries(){return go(this,"entries",e=>(e[1]=Zt(e[1]),e))},every(e,t){return ri(this,"every",e,t,void 0,arguments)},filter(e,t){return ri(this,"filter",e,t,i=>i.map(Zt),arguments)},find(e,t){return ri(this,"find",e,t,Zt,arguments)},findIndex(e,t){return ri(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ri(this,"findLast",e,t,Zt,arguments)},findLastIndex(e,t){return ri(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ri(this,"forEach",e,t,void 0,arguments)},includes(...e){return yo(this,"includes",e)},indexOf(...e){return yo(this,"indexOf",e)},join(e){return ds(this).join(e)},lastIndexOf(...e){return yo(this,"lastIndexOf",e)},map(e,t){return ri(this,"map",e,t,void 0,arguments)},pop(){return Xs(this,"pop")},push(...e){return Xs(this,"push",e)},reduce(e,...t){return ol(this,"reduce",e,t)},reduceRight(e,...t){return ol(this,"reduceRight",e,t)},shift(){return Xs(this,"shift")},some(e,t){return ri(this,"some",e,t,void 0,arguments)},splice(...e){return Xs(this,"splice",e)},toReversed(){return ds(this).toReversed()},toSorted(e){return ds(this).toSorted(e)},toSpliced(...e){return ds(this).toSpliced(...e)},unshift(...e){return Xs(this,"unshift",e)},values(){return go(this,"values",Zt)}};function go(e,t,i){const s=wh(e),n=s[t]();return s!==e&&!De(e)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=i(r.value)),r}),n}const r_=Array.prototype;function ri(e,t,i,s,n,r){const o=wh(e),a=o!==e&&!De(e),h=o[t];if(h!==r_[t]){const u=h.apply(e,r);return a?Zt(u):u}let l=i;o!==e&&(a?l=function(u,f){return i.call(this,Zt(u),f,e)}:i.length>2&&(l=function(u,f){return i.call(this,u,f,e)}));const c=h.call(o,l,s);return a&&n?n(c):c}function ol(e,t,i,s){const n=wh(e);let r=i;return n!==e&&(De(e)?i.length>3&&(r=function(o,a,h){return i.call(this,o,a,h,e)}):r=function(o,a,h){return i.call(this,o,Zt(a),h,e)}),n[t](r,...s)}function yo(e,t,i){const s=nt(e);Nt(s,"iterate",Ln);const n=s[t](...i);return(n===-1||n===!1)&&Eh(i[0])?(i[0]=nt(i[0]),s[t](...i)):n}function Xs(e,t,i=[]){Ii(),ph();const s=nt(e)[t].apply(e,i);return gh(),Wi(),s}const o_=lh("__proto__,__v_isRef,__isVue"),ed=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Di));function a_(e){Di(e)||(e=String(e));const t=nt(this);return Nt(t,"has",e),t.hasOwnProperty(e)}class id{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,s){if(i==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return r;if(i==="__v_raw")return s===(n?r?y_:od:r?rd:nd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=K(t);if(!n){let h;if(o&&(h=n_[i]))return h;if(i==="hasOwnProperty")return a_}const a=Reflect.get(t,i,jt(t)?t:s);return(Di(i)?ed.has(i):o_(i))||(n||Nt(t,"get",i),r)?a:jt(a)?o&&dh(i)?a:a.value:Lt(a)?n?ad(a):xh(a):a}}class sd extends id{constructor(t=!1){super(!1,t)}set(t,i,s,n){let r=t[i];if(!this._isShallow){const h=is(r);if(!De(s)&&!is(s)&&(r=nt(r),s=nt(s)),!K(t)&&jt(r)&&!jt(s))return h?!1:(r.value=s,!0)}const o=K(t)&&dh(i)?Number(i)<t.length:rt(t,i),a=Reflect.set(t,i,s,jt(t)?t:n);return t===nt(n)&&(o?Bi(s,r)&&_i(t,"set",i,s):_i(t,"add",i,s)),a}deleteProperty(t,i){const s=rt(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&s&&_i(t,"delete",i,void 0),n}has(t,i){const s=Reflect.has(t,i);return(!Di(i)||!ed.has(i))&&Nt(t,"has",i),s}ownKeys(t){return Nt(t,"iterate",K(t)?"length":Ji),Reflect.ownKeys(t)}}class h_ extends id{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const l_=new sd,c_=new h_,u_=new sd(!0);const Wa=e=>e,Qn=e=>Reflect.getPrototypeOf(e);function d_(e,t,i){return function(...s){const n=this.__v_raw,r=nt(n),o=ks(r),a=e==="entries"||e===Symbol.iterator&&o,h=e==="keys"&&o,l=n[e](...s),c=i?Wa:t?$a:Zt;return!t&&Nt(r,"iterate",h?Ia:Ji),{next(){const{value:u,done:f}=l.next();return f?{value:u,done:f}:{value:a?[c(u[0]),c(u[1])]:c(u),done:f}},[Symbol.iterator](){return this}}}}function tr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function f_(e,t){const i={get(n){const r=this.__v_raw,o=nt(r),a=nt(n);e||(Bi(n,a)&&Nt(o,"get",n),Nt(o,"get",a));const{has:h}=Qn(o),l=t?Wa:e?$a:Zt;if(h.call(o,n))return l(r.get(n));if(h.call(o,a))return l(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!e&&Nt(nt(n),"iterate",Ji),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=nt(r),a=nt(n);return e||(Bi(n,a)&&Nt(o,"has",n),Nt(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,h=nt(a),l=t?Wa:e?$a:Zt;return!e&&Nt(h,"iterate",Ji),a.forEach((c,u)=>n.call(r,l(c),l(u),o))}};return It(i,e?{add:tr("add"),set:tr("set"),delete:tr("delete"),clear:tr("clear")}:{add(n){!t&&!De(n)&&!is(n)&&(n=nt(n));const r=nt(this);return Qn(r).has.call(r,n)||(r.add(n),_i(r,"add",n,n)),this},set(n,r){!t&&!De(r)&&!is(r)&&(r=nt(r));const o=nt(this),{has:a,get:h}=Qn(o);let l=a.call(o,n);l||(n=nt(n),l=a.call(o,n));const c=h.call(o,n);return o.set(n,r),l?Bi(r,c)&&_i(o,"set",n,r):_i(o,"add",n,r),this},delete(n){const r=nt(this),{has:o,get:a}=Qn(r);let h=o.call(r,n);h||(n=nt(n),h=o.call(r,n)),a&&a.call(r,n);const l=r.delete(n);return h&&_i(r,"delete",n,void 0),l},clear(){const n=nt(this),r=n.size!==0,o=n.clear();return r&&_i(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=d_(n,e,t)}),i}function vh(e,t){const i=f_(e,t);return(s,n,r)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?s:Reflect.get(rt(i,n)&&n in s?i:s,n,r)}const __={get:vh(!1,!1)},p_={get:vh(!1,!0)},g_={get:vh(!0,!1)};const nd=new WeakMap,rd=new WeakMap,od=new WeakMap,y_=new WeakMap;function m_(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function w_(e){return e.__v_skip||!Object.isExtensible(e)?0:m_(Vf(e))}function xh(e){return is(e)?e:bh(e,!1,l_,__,nd)}function v_(e){return bh(e,!1,u_,p_,rd)}function ad(e){return bh(e,!0,c_,g_,od)}function bh(e,t,i,s,n){if(!Lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=n.get(e);if(r)return r;const o=w_(e);if(o===0)return e;const a=new Proxy(e,o===2?s:i);return n.set(e,a),a}function vn(e){return is(e)?vn(e.__v_raw):!!(e&&e.__v_isReactive)}function is(e){return!!(e&&e.__v_isReadonly)}function De(e){return!!(e&&e.__v_isShallow)}function Eh(e){return e?!!e.__v_raw:!1}function nt(e){const t=e&&e.__v_raw;return t?nt(t):e}function x_(e){return!rt(e,"__v_skip")&&Object.isExtensible(e)&&Nu(e,"__v_skip",!0),e}const Zt=e=>Lt(e)?xh(e):e,$a=e=>Lt(e)?ad(e):e;function jt(e){return e?e.__v_isRef===!0:!1}function b_(e){return E_(e,!1)}function E_(e,t){return jt(e)?e:new C_(e,t)}class C_{constructor(t,i){this.dep=new mh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:nt(t),this._value=i?t:Zt(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,s=this.__v_isShallow||De(t)||is(t);t=s?t:nt(t),Bi(t,i)&&(this._rawValue=t,this._value=s?t:Zt(t),this.dep.trigger())}}function T_(e){return jt(e)?e.value:e}const R_={get:(e,t,i)=>t==="__v_raw"?e:T_(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const n=e[t];return jt(n)&&!jt(i)?(n.value=i,!0):Reflect.set(e,t,i,s)}};function hd(e){return vn(e)?e:new Proxy(e,R_)}class S_{constructor(t,i,s){this.fn=t,this.setter=i,this._value=void 0,this.dep=new mh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&gt!==this)return Xu(this,!0),!0}get value(){const t=this.dep.track();return Ju(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function P_(e,t,i=!1){let s,n;return X(e)?s=e:(s=e.get,n=e.set),new S_(s,n,i)}const er={},Mr=new WeakMap;let Ki;function L_(e,t=!1,i=Ki){if(i){let s=Mr.get(i);s||Mr.set(i,s=[]),s.push(e)}}function O_(e,t,i=yt){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:a,call:h}=i,l=v=>n?v:De(v)||n===!1||n===0?Oi(v,1):Oi(v);let c,u,f,d,g=!1,m=!1;if(jt(e)?(u=()=>e.value,g=De(e)):vn(e)?(u=()=>l(e),g=!0):K(e)?(m=!0,g=e.some(v=>vn(v)||De(v)),u=()=>e.map(v=>{if(jt(v))return v.value;if(vn(v))return l(v);if(X(v))return h?h(v,2):v()})):X(e)?t?u=h?()=>h(e,2):e:u=()=>{if(f){Ii();try{f()}finally{Wi()}}const v=Ki;Ki=c;try{return h?h(e,3,[d]):e(d)}finally{Ki=v}}:u=qe,t&&n){const v=u,A=n===!0?1/0:n;u=()=>Oi(v(),A)}const x=e_(),C=()=>{c.stop(),x&&x.active&&uh(x.effects,c)};if(r&&t){const v=t;t=(...A)=>{v(...A),C()}}let b=m?new Array(e.length).fill(er):er;const P=v=>{if(!(!(c.flags&1)||!c.dirty&&!v))if(t){const A=c.run();if(n||g||(m?A.some((Y,G)=>Bi(Y,b[G])):Bi(A,b))){f&&f();const Y=Ki;Ki=c;try{const G=[A,b===er?void 0:m&&b[0]===er?[]:b,d];h?h(t,3,G):t(...G),b=A}finally{Ki=Y}}}else c.run()};return a&&a(P),c=new Gu(u),c.scheduler=o?()=>o(P,!1):P,d=v=>L_(v,!1,c),f=c.onStop=()=>{const v=Mr.get(c);if(v){if(h)h(v,4);else for(const A of v)A();Mr.delete(c)}},t?s?P(!0):b=c.run():o?o(P.bind(null,!0),!0):c.run(),C.pause=c.pause.bind(c),C.resume=c.resume.bind(c),C.stop=C,C}function Oi(e,t=1/0,i){if(t<=0||!Lt(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,jt(e))Oi(e.value,t,i);else if(K(e))for(let s=0;s<e.length;s++)Oi(e[s],t,i);else if(Wu(e)||ks(e))e.forEach(s=>{Oi(s,t,i)});else if(Hu(e)){for(const s in e)Oi(e[s],t,i);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Oi(e[s],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fn(e,t,i,s){try{return s?e(...s):e()}catch(n){Xr(n,t,i)}}function Je(e,t,i,s){if(X(e)){const n=Fn(e,t,i,s);return n&&$u(n)&&n.catch(r=>{Xr(r,t,i)}),n}if(K(e)){const n=[];for(let r=0;r<e.length;r++)n.push(Je(e[r],t,i,s));return n}}function Xr(e,t,i,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||yt;if(t){let a=t.parent;const h=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const c=a.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,h,l)===!1)return}a=a.parent}if(r){Ii(),Fn(r,null,10,[e,h,l]),Wi();return}}B_(e,i,n,s,o)}function B_(e,t,i,s=!0,n=!1){if(n)throw e;console.error(e)}const qt=[];let Ve=-1;const Ms=[];let Pi=null,Rs=0;const ld=Promise.resolve();let Ar=null;function k_(e){const t=Ar||ld;return e?t.then(this?e.bind(this):e):t}function M_(e){let t=Ve+1,i=qt.length;for(;t<i;){const s=t+i>>>1,n=qt[s],r=On(n);r<e||r===e&&n.flags&2?t=s+1:i=s}return t}function Ch(e){if(!(e.flags&1)){const t=On(e),i=qt[qt.length-1];!i||!(e.flags&2)&&t>=On(i)?qt.push(e):qt.splice(M_(t),0,e),e.flags|=1,cd()}}function cd(){Ar||(Ar=ld.then(dd))}function A_(e){K(e)?Ms.push(...e):Pi&&e.id===-1?Pi.splice(Rs+1,0,e):e.flags&1||(Ms.push(e),e.flags|=1),cd()}function al(e,t,i=Ve+1){for(;i<qt.length;i++){const s=qt[i];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;qt.splice(i,1),i--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ud(e){if(Ms.length){const t=[...new Set(Ms)].sort((i,s)=>On(i)-On(s));if(Ms.length=0,Pi){Pi.push(...t);return}for(Pi=t,Rs=0;Rs<Pi.length;Rs++){const i=Pi[Rs];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Pi=null,Rs=0}}const On=e=>e.id==null?e.flags&2?-1:1/0:e.id;function dd(e){try{for(Ve=0;Ve<qt.length;Ve++){const t=qt[Ve];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Fn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ve<qt.length;Ve++){const t=qt[Ve];t&&(t.flags&=-2)}Ve=-1,qt.length=0,ud(),Ar=null,(qt.length||Ms.length)&&dd()}}let Xe=null,fd=null;function Dr(e){const t=Xe;return Xe=e,fd=e&&e.type.__scopeId||null,t}function D_(e,t=Xe,i){if(!t||e._n)return e;const s=(...n)=>{s._d&&pl(-1);const r=Dr(t);let o;try{o=e(...n)}finally{Dr(r),s._d&&pl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Fi(e,t,i,s){const n=e.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let h=a.dir[s];h&&(Ii(),Je(h,i,8,[e.el,a,e,t]),Wi())}}const I_=Symbol("_vte"),W_=e=>e.__isTeleport;function Th(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Th(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function $_(e,t){return X(e)?It({name:e.name},t,{setup:e}):e}function _d(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ir(e,t,i,s,n=!1){if(K(e)){e.forEach((g,m)=>Ir(g,t&&(K(t)?t[m]:t),i,s,n));return}if(xn(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ir(e,t,i,s.component.subTree);return}const r=s.shapeFlag&4?Oh(s.component):s.el,o=n?null:r,{i:a,r:h}=e,l=t&&t.r,c=a.refs===yt?a.refs={}:a.refs,u=a.setupState,f=nt(u),d=u===yt?()=>!1:g=>rt(f,g);if(l!=null&&l!==h&&(At(l)?(c[l]=null,d(l)&&(u[l]=null)):jt(l)&&(l.value=null)),X(h))Fn(h,a,12,[o,c]);else{const g=At(h),m=jt(h);if(g||m){const x=()=>{if(e.f){const C=g?d(h)?u[h]:c[h]:h.value;n?K(C)&&uh(C,r):K(C)?C.includes(r)||C.push(r):g?(c[h]=[r],d(h)&&(u[h]=c[h])):(h.value=[r],e.k&&(c[e.k]=h.value))}else g?(c[h]=o,d(h)&&(u[h]=o)):m&&(h.value=o,e.k&&(c[e.k]=o))};o?(x.id=-1,fe(x,i)):x()}}}Kr().requestIdleCallback;Kr().cancelIdleCallback;const xn=e=>!!e.type.__asyncLoader,pd=e=>e.type.__isKeepAlive;function F_(e,t){gd(e,"a",t)}function H_(e,t){gd(e,"da",t)}function gd(e,t,i=Jt){const s=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Zr(t,s,i),i){let n=i.parent;for(;n&&n.parent;)pd(n.parent.vnode)&&z_(s,t,i,n),n=n.parent}}function z_(e,t,i,s){const n=Zr(t,e,s,!0);Rh(()=>{uh(s[t],n)},i)}function Zr(e,t,i=Jt,s=!1){if(i){const n=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ii();const a=Hn(i),h=Je(t,i,e,o);return a(),Wi(),h});return s?n.unshift(r):n.push(r),r}}const bi=e=>(t,i=Jt)=>{(!Mn||e==="sp")&&Zr(e,(...s)=>t(...s),i)},N_=bi("bm"),yd=bi("m"),j_=bi("bu"),V_=bi("u"),U_=bi("bum"),Rh=bi("um"),Y_=bi("sp"),G_=bi("rtg"),K_=bi("rtc");function X_(e,t=Jt){Zr("ec",e,t)}const Z_=Symbol.for("v-ndc"),Fa=e=>e?Wd(e)?Oh(e):Fa(e.parent):null,bn=It(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fa(e.parent),$root:e=>Fa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Sh(e),$forceUpdate:e=>e.f||(e.f=()=>{Ch(e.update)}),$nextTick:e=>e.n||(e.n=k_.bind(e.proxy)),$watch:e=>mp.bind(e)}),mo=(e,t)=>e!==yt&&!e.__isScriptSetup&&rt(e,t),q_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:h}=e;let l;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return s[t];case 2:return n[t];case 4:return i[t];case 3:return r[t]}else{if(mo(s,t))return o[t]=1,s[t];if(n!==yt&&rt(n,t))return o[t]=2,n[t];if((l=e.propsOptions[0])&&rt(l,t))return o[t]=3,r[t];if(i!==yt&&rt(i,t))return o[t]=4,i[t];Ha&&(o[t]=0)}}const c=bn[t];let u,f;if(c)return t==="$attrs"&&Nt(e.attrs,"get",""),c(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(i!==yt&&rt(i,t))return o[t]=4,i[t];if(f=h.config.globalProperties,rt(f,t))return f[t]},set({_:e},t,i){const{data:s,setupState:n,ctx:r}=e;return mo(n,t)?(n[t]=i,!0):s!==yt&&rt(s,t)?(s[t]=i,!0):rt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!i[o]||e!==yt&&rt(e,o)||mo(t,o)||(a=r[0])&&rt(a,o)||rt(s,o)||rt(bn,o)||rt(n.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:rt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function hl(e){return K(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Ha=!0;function J_(e){const t=Sh(e),i=e.proxy,s=e.ctx;Ha=!1,t.beforeCreate&&ll(t.beforeCreate,e,"bc");const{data:n,computed:r,methods:o,watch:a,provide:h,inject:l,created:c,beforeMount:u,mounted:f,beforeUpdate:d,updated:g,activated:m,deactivated:x,beforeDestroy:C,beforeUnmount:b,destroyed:P,unmounted:v,render:A,renderTracked:Y,renderTriggered:G,errorCaptured:it,serverPrefetch:Et,expose:st,inheritAttrs:q,components:dt,directives:te,filters:he}=t;if(l&&Q_(l,s,null),o)for(const tt in o){const N=o[tt];X(N)&&(s[tt]=N.bind(i))}if(n){const tt=n.call(i,i);Lt(tt)&&(e.data=xh(tt))}if(Ha=!0,r)for(const tt in r){const N=r[tt],Ht=X(N)?N.bind(i,i):X(N.get)?N.get.bind(i,i):qe,ni=!X(N)&&X(N.set)?N.set.bind(i):qe,$t=Np({get:Ht,set:ni});Object.defineProperty(s,tt,{enumerable:!0,configurable:!0,get:()=>$t.value,set:Yt=>$t.value=Yt})}if(a)for(const tt in a)md(a[tt],s,i,tt);if(h){const tt=X(h)?h.call(i):h;Reflect.ownKeys(tt).forEach(N=>{rp(N,tt[N])})}c&&ll(c,e,"c");function xt(tt,N){K(N)?N.forEach(Ht=>tt(Ht.bind(i))):N&&tt(N.bind(i))}if(xt(N_,u),xt(yd,f),xt(j_,d),xt(V_,g),xt(F_,m),xt(H_,x),xt(X_,it),xt(K_,Y),xt(G_,G),xt(U_,b),xt(Rh,v),xt(Y_,Et),K(st))if(st.length){const tt=e.exposed||(e.exposed={});st.forEach(N=>{Object.defineProperty(tt,N,{get:()=>i[N],set:Ht=>i[N]=Ht})})}else e.exposed||(e.exposed={});A&&e.render===qe&&(e.render=A),q!=null&&(e.inheritAttrs=q),dt&&(e.components=dt),te&&(e.directives=te),Et&&_d(e)}function Q_(e,t,i=qe){K(e)&&(e=za(e));for(const s in e){const n=e[s];let r;Lt(n)?"default"in n?r=Cr(n.from||s,n.default,!0):r=Cr(n.from||s):r=Cr(n),jt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function ll(e,t,i){Je(K(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function md(e,t,i,s){let n=s.includes(".")?kd(i,s):()=>i[s];if(At(e)){const r=t[e];X(r)&&vo(n,r)}else if(X(e))vo(n,e.bind(i));else if(Lt(e))if(K(e))e.forEach(r=>md(r,t,i,s));else{const r=X(e.handler)?e.handler.bind(i):t[e.handler];X(r)&&vo(n,r,e)}}function Sh(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let h;return a?h=a:!n.length&&!i&&!s?h=t:(h={},n.length&&n.forEach(l=>Wr(h,l,o,!0)),Wr(h,t,o)),Lt(t)&&r.set(t,h),h}function Wr(e,t,i,s=!1){const{mixins:n,extends:r}=t;r&&Wr(e,r,i,!0),n&&n.forEach(o=>Wr(e,o,i,!0));for(const o in t)if(!(s&&o==="expose")){const a=tp[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const tp={data:cl,props:ul,emits:ul,methods:gn,computed:gn,beforeCreate:Gt,created:Gt,beforeMount:Gt,mounted:Gt,beforeUpdate:Gt,updated:Gt,beforeDestroy:Gt,beforeUnmount:Gt,destroyed:Gt,unmounted:Gt,activated:Gt,deactivated:Gt,errorCaptured:Gt,serverPrefetch:Gt,components:gn,directives:gn,watch:ip,provide:cl,inject:ep};function cl(e,t){return t?e?function(){return It(X(e)?e.call(this,this):e,X(t)?t.call(this,this):t)}:t:e}function ep(e,t){return gn(za(e),za(t))}function za(e){if(K(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Gt(e,t){return e?[...new Set([].concat(e,t))]:t}function gn(e,t){return e?It(Object.create(null),e,t):t}function ul(e,t){return e?K(e)&&K(t)?[...new Set([...e,...t])]:It(Object.create(null),hl(e),hl(t??{})):t}function ip(e,t){if(!e)return t;if(!t)return e;const i=It(Object.create(null),e);for(const s in t)i[s]=Gt(e[s],t[s]);return i}function wd(){return{app:null,config:{isNativeTag:Nf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sp=0;function np(e,t){return function(s,n=null){X(s)||(s=It({},s)),n!=null&&!Lt(n)&&(n=null);const r=wd(),o=new WeakSet,a=[];let h=!1;const l=r.app={_uid:sp++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:jp,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&X(c.install)?(o.add(c),c.install(l,...u)):X(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,f){if(!h){const d=l._ceVNode||Qi(s,n);return d.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(d,c):e(d,c,f),h=!0,l._container=c,c.__vue_app__=l,Oh(d.component)}},onUnmount(c){a.push(c)},unmount(){h&&(Je(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){const u=As;As=l;try{return c()}finally{As=u}}};return l}}let As=null;function rp(e,t){if(Jt){let i=Jt.provides;const s=Jt.parent&&Jt.parent.provides;s===i&&(i=Jt.provides=Object.create(s)),i[e]=t}}function Cr(e,t,i=!1){const s=Jt||Xe;if(s||As){const n=As?As._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&X(t)?t.call(s&&s.proxy):t}}const vd={},xd=()=>Object.create(vd),bd=e=>Object.getPrototypeOf(e)===vd;function op(e,t,i,s=!1){const n={},r=xd();e.propsDefaults=Object.create(null),Ed(e,t,n,r);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);i?e.props=s?n:v_(n):e.type.props?e.props=n:e.props=r,e.attrs=r}function ap(e,t,i,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=e,a=nt(n),[h]=e.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let u=0;u<c.length;u++){let f=c[u];if(qr(e.emitsOptions,f))continue;const d=t[f];if(h)if(rt(r,f))d!==r[f]&&(r[f]=d,l=!0);else{const g=Mi(f);n[g]=Na(h,a,g,d,e,!1)}else d!==r[f]&&(r[f]=d,l=!0)}}}else{Ed(e,t,n,r)&&(l=!0);let c;for(const u in a)(!t||!rt(t,u)&&((c=hs(u))===u||!rt(t,c)))&&(h?i&&(i[u]!==void 0||i[c]!==void 0)&&(n[u]=Na(h,a,u,void 0,e,!0)):delete n[u]);if(r!==a)for(const u in r)(!t||!rt(t,u))&&(delete r[u],l=!0)}l&&_i(e.attrs,"set","")}function Ed(e,t,i,s){const[n,r]=e.propsOptions;let o=!1,a;if(t)for(let h in t){if(yn(h))continue;const l=t[h];let c;n&&rt(n,c=Mi(h))?!r||!r.includes(c)?i[c]=l:(a||(a={}))[c]=l:qr(e.emitsOptions,h)||(!(h in s)||l!==s[h])&&(s[h]=l,o=!0)}if(r){const h=nt(i),l=a||yt;for(let c=0;c<r.length;c++){const u=r[c];i[u]=Na(n,h,u,l[u],e,!rt(l,u))}}return o}function Na(e,t,i,s,n,r){const o=e[i];if(o!=null){const a=rt(o,"default");if(a&&s===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&X(h)){const{propsDefaults:l}=n;if(i in l)s=l[i];else{const c=Hn(n);s=l[i]=h.call(null,t),c()}}else s=h;n.ce&&n.ce._setProp(i,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===hs(i))&&(s=!0))}return s}const hp=new WeakMap;function Cd(e,t,i=!1){const s=i?hp:t.propsCache,n=s.get(e);if(n)return n;const r=e.props,o={},a=[];let h=!1;if(!X(e)){const c=u=>{h=!0;const[f,d]=Cd(u,t,!0);It(o,f),d&&a.push(...d)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!h)return Lt(e)&&s.set(e,Bs),Bs;if(K(r))for(let c=0;c<r.length;c++){const u=Mi(r[c]);dl(u)&&(o[u]=yt)}else if(r)for(const c in r){const u=Mi(c);if(dl(u)){const f=r[c],d=o[u]=K(f)||X(f)?{type:f}:It({},f),g=d.type;let m=!1,x=!0;if(K(g))for(let C=0;C<g.length;++C){const b=g[C],P=X(b)&&b.name;if(P==="Boolean"){m=!0;break}else P==="String"&&(x=!1)}else m=X(g)&&g.name==="Boolean";d[0]=m,d[1]=x,(m||rt(d,"default"))&&a.push(u)}}const l=[o,a];return Lt(e)&&s.set(e,l),l}function dl(e){return e[0]!=="$"&&!yn(e)}const Td=e=>e[0]==="_"||e==="$stable",Ph=e=>K(e)?e.map(Ye):[Ye(e)],lp=(e,t,i)=>{if(t._n)return t;const s=D_((...n)=>Ph(t(...n)),i);return s._c=!1,s},Rd=(e,t,i)=>{const s=e._ctx;for(const n in e){if(Td(n))continue;const r=e[n];if(X(r))t[n]=lp(n,r,s);else if(r!=null){const o=Ph(r);t[n]=()=>o}}},Sd=(e,t)=>{const i=Ph(t);e.slots.default=()=>i},Pd=(e,t,i)=>{for(const s in t)(i||s!=="_")&&(e[s]=t[s])},cp=(e,t,i)=>{const s=e.slots=xd();if(e.vnode.shapeFlag&32){const n=t._;n?(Pd(s,t,i),i&&Nu(s,"_",n,!0)):Rd(t,s)}else t&&Sd(e,t)},up=(e,t,i)=>{const{vnode:s,slots:n}=e;let r=!0,o=yt;if(s.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:Pd(n,t,i):(r=!t.$stable,Rd(t,n)),o=t}else t&&(Sd(e,t),o={default:1});if(r)for(const a in n)!Td(a)&&o[a]==null&&delete n[a]},fe=Tp;function dp(e){return fp(e)}function fp(e,t){const i=Kr();i.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:h,setText:l,setElementText:c,parentNode:u,nextSibling:f,setScopeId:d=qe,insertStaticContent:g}=e,m=(_,p,w,R=null,E=null,T=null,k=void 0,B=null,O=!!p.dynamicChildren)=>{if(_===p)return;_&&!Zs(_,p)&&(R=Jn(_),Yt(_,E,T,!0),_=null),p.patchFlag===-2&&(O=!1,p.dynamicChildren=null);const{type:S,ref:z,shapeFlag:M}=p;switch(S){case Jr:x(_,p,w,R);break;case Bn:C(_,p,w,R);break;case bo:_==null&&b(p,w,R,k);break;case fi:dt(_,p,w,R,E,T,k,B,O);break;default:M&1?A(_,p,w,R,E,T,k,B,O):M&6?te(_,p,w,R,E,T,k,B,O):(M&64||M&128)&&S.process(_,p,w,R,E,T,k,B,O,Gs)}z!=null&&E&&Ir(z,_&&_.ref,T,p||_,!p)},x=(_,p,w,R)=>{if(_==null)s(p.el=a(p.children),w,R);else{const E=p.el=_.el;p.children!==_.children&&l(E,p.children)}},C=(_,p,w,R)=>{_==null?s(p.el=h(p.children||""),w,R):p.el=_.el},b=(_,p,w,R)=>{[_.el,_.anchor]=g(_.children,p,w,R,_.el,_.anchor)},P=({el:_,anchor:p},w,R)=>{let E;for(;_&&_!==p;)E=f(_),s(_,w,R),_=E;s(p,w,R)},v=({el:_,anchor:p})=>{let w;for(;_&&_!==p;)w=f(_),n(_),_=w;n(p)},A=(_,p,w,R,E,T,k,B,O)=>{p.type==="svg"?k="svg":p.type==="math"&&(k="mathml"),_==null?Y(p,w,R,E,T,k,B,O):Et(_,p,E,T,k,B,O)},Y=(_,p,w,R,E,T,k,B)=>{let O,S;const{props:z,shapeFlag:M,transition:F,dirs:V}=_;if(O=_.el=o(_.type,T,z&&z.is,z),M&8?c(O,_.children):M&16&&it(_.children,O,null,R,E,wo(_,T),k,B),V&&Fi(_,null,R,"created"),G(O,_,_.scopeId,k,R),z){for(const pt in z)pt!=="value"&&!yn(pt)&&r(O,pt,null,z[pt],T,R);"value"in z&&r(O,"value",null,z.value,T),(S=z.onVnodeBeforeMount)&&ze(S,R,_)}V&&Fi(_,null,R,"beforeMount");const J=_p(E,F);J&&F.beforeEnter(O),s(O,p,w),((S=z&&z.onVnodeMounted)||J||V)&&fe(()=>{S&&ze(S,R,_),J&&F.enter(O),V&&Fi(_,null,R,"mounted")},E)},G=(_,p,w,R,E)=>{if(w&&d(_,w),R)for(let T=0;T<R.length;T++)d(_,R[T]);if(E){let T=E.subTree;if(p===T||Ad(T.type)&&(T.ssContent===p||T.ssFallback===p)){const k=E.vnode;G(_,k,k.scopeId,k.slotScopeIds,E.parent)}}},it=(_,p,w,R,E,T,k,B,O=0)=>{for(let S=O;S<_.length;S++){const z=_[S]=B?Li(_[S]):Ye(_[S]);m(null,z,p,w,R,E,T,k,B)}},Et=(_,p,w,R,E,T,k)=>{const B=p.el=_.el;let{patchFlag:O,dynamicChildren:S,dirs:z}=p;O|=_.patchFlag&16;const M=_.props||yt,F=p.props||yt;let V;if(w&&Hi(w,!1),(V=F.onVnodeBeforeUpdate)&&ze(V,w,p,_),z&&Fi(p,_,w,"beforeUpdate"),w&&Hi(w,!0),(M.innerHTML&&F.innerHTML==null||M.textContent&&F.textContent==null)&&c(B,""),S?st(_.dynamicChildren,S,B,w,R,wo(p,E),T):k||N(_,p,B,null,w,R,wo(p,E),T,!1),O>0){if(O&16)q(B,M,F,w,E);else if(O&2&&M.class!==F.class&&r(B,"class",null,F.class,E),O&4&&r(B,"style",M.style,F.style,E),O&8){const J=p.dynamicProps;for(let pt=0;pt<J.length;pt++){const lt=J[pt],le=M[lt],zt=F[lt];(zt!==le||lt==="value")&&r(B,lt,le,zt,E,w)}}O&1&&_.children!==p.children&&c(B,p.children)}else!k&&S==null&&q(B,M,F,w,E);((V=F.onVnodeUpdated)||z)&&fe(()=>{V&&ze(V,w,p,_),z&&Fi(p,_,w,"updated")},R)},st=(_,p,w,R,E,T,k)=>{for(let B=0;B<p.length;B++){const O=_[B],S=p[B],z=O.el&&(O.type===fi||!Zs(O,S)||O.shapeFlag&70)?u(O.el):w;m(O,S,z,null,R,E,T,k,!0)}},q=(_,p,w,R,E)=>{if(p!==w){if(p!==yt)for(const T in p)!yn(T)&&!(T in w)&&r(_,T,p[T],null,E,R);for(const T in w){if(yn(T))continue;const k=w[T],B=p[T];k!==B&&T!=="value"&&r(_,T,B,k,E,R)}"value"in w&&r(_,"value",p.value,w.value,E)}},dt=(_,p,w,R,E,T,k,B,O)=>{const S=p.el=_?_.el:a(""),z=p.anchor=_?_.anchor:a("");let{patchFlag:M,dynamicChildren:F,slotScopeIds:V}=p;V&&(B=B?B.concat(V):V),_==null?(s(S,w,R),s(z,w,R),it(p.children||[],w,z,E,T,k,B,O)):M>0&&M&64&&F&&_.dynamicChildren?(st(_.dynamicChildren,F,w,E,T,k,B),(p.key!=null||E&&p===E.subTree)&&Ld(_,p,!0)):N(_,p,w,z,E,T,k,B,O)},te=(_,p,w,R,E,T,k,B,O)=>{p.slotScopeIds=B,_==null?p.shapeFlag&512?E.ctx.activate(p,w,R,k,O):he(p,w,R,E,T,k,O):me(_,p,O)},he=(_,p,w,R,E,T,k)=>{const B=_.component=Ip(_,R,E);if(pd(_)&&(B.ctx.renderer=Gs),Wp(B,!1,k),B.asyncDep){if(E&&E.registerDep(B,xt,k),!_.el){const O=B.subTree=Qi(Bn);C(null,O,p,w)}}else xt(B,_,p,w,E,T,k)},me=(_,p,w)=>{const R=p.component=_.component;if(Ep(_,p,w))if(R.asyncDep&&!R.asyncResolved){tt(R,p,w);return}else R.next=p,R.update();else p.el=_.el,R.vnode=p},xt=(_,p,w,R,E,T,k)=>{const B=()=>{if(_.isMounted){let{next:M,bu:F,u:V,parent:J,vnode:pt}=_;{const ce=Od(_);if(ce){M&&(M.el=pt.el,tt(_,M,k)),ce.asyncDep.then(()=>{_.isUnmounted||B()});return}}let lt=M,le;Hi(_,!1),M?(M.el=pt.el,tt(_,M,k)):M=pt,F&&fo(F),(le=M.props&&M.props.onVnodeBeforeUpdate)&&ze(le,J,M,pt),Hi(_,!0);const zt=xo(_),Re=_.subTree;_.subTree=zt,m(Re,zt,u(Re.el),Jn(Re),_,E,T),M.el=zt.el,lt===null&&Cp(_,zt.el),V&&fe(V,E),(le=M.props&&M.props.onVnodeUpdated)&&fe(()=>ze(le,J,M,pt),E)}else{let M;const{el:F,props:V}=p,{bm:J,m:pt,parent:lt,root:le,type:zt}=_,Re=xn(p);if(Hi(_,!1),J&&fo(J),!Re&&(M=V&&V.onVnodeBeforeMount)&&ze(M,lt,p),Hi(_,!0),F&&el){const ce=()=>{_.subTree=xo(_),el(F,_.subTree,_,E,null)};Re&&zt.__asyncHydrate?zt.__asyncHydrate(F,_,ce):ce()}else{le.ce&&le.ce._injectChildStyle(zt);const ce=_.subTree=xo(_);m(null,ce,w,R,_,E,T),p.el=ce.el}if(pt&&fe(pt,E),!Re&&(M=V&&V.onVnodeMounted)){const ce=p;fe(()=>ze(M,lt,ce),E)}(p.shapeFlag&256||lt&&xn(lt.vnode)&&lt.vnode.shapeFlag&256)&&_.a&&fe(_.a,E),_.isMounted=!0,p=w=R=null}};_.scope.on();const O=_.effect=new Gu(B);_.scope.off();const S=_.update=O.run.bind(O),z=_.job=O.runIfDirty.bind(O);z.i=_,z.id=_.uid,O.scheduler=()=>Ch(z),Hi(_,!0),S()},tt=(_,p,w)=>{p.component=_;const R=_.vnode.props;_.vnode=p,_.next=null,ap(_,p.props,R,w),up(_,p.children,w),Ii(),al(_),Wi()},N=(_,p,w,R,E,T,k,B,O=!1)=>{const S=_&&_.children,z=_?_.shapeFlag:0,M=p.children,{patchFlag:F,shapeFlag:V}=p;if(F>0){if(F&128){ni(S,M,w,R,E,T,k,B,O);return}else if(F&256){Ht(S,M,w,R,E,T,k,B,O);return}}V&8?(z&16&&Ys(S,E,T),M!==S&&c(w,M)):z&16?V&16?ni(S,M,w,R,E,T,k,B,O):Ys(S,E,T,!0):(z&8&&c(w,""),V&16&&it(M,w,R,E,T,k,B,O))},Ht=(_,p,w,R,E,T,k,B,O)=>{_=_||Bs,p=p||Bs;const S=_.length,z=p.length,M=Math.min(S,z);let F;for(F=0;F<M;F++){const V=p[F]=O?Li(p[F]):Ye(p[F]);m(_[F],V,w,null,E,T,k,B,O)}S>z?Ys(_,E,T,!0,!1,M):it(p,w,R,E,T,k,B,O,M)},ni=(_,p,w,R,E,T,k,B,O)=>{let S=0;const z=p.length;let M=_.length-1,F=z-1;for(;S<=M&&S<=F;){const V=_[S],J=p[S]=O?Li(p[S]):Ye(p[S]);if(Zs(V,J))m(V,J,w,null,E,T,k,B,O);else break;S++}for(;S<=M&&S<=F;){const V=_[M],J=p[F]=O?Li(p[F]):Ye(p[F]);if(Zs(V,J))m(V,J,w,null,E,T,k,B,O);else break;M--,F--}if(S>M){if(S<=F){const V=F+1,J=V<z?p[V].el:R;for(;S<=F;)m(null,p[S]=O?Li(p[S]):Ye(p[S]),w,J,E,T,k,B,O),S++}}else if(S>F)for(;S<=M;)Yt(_[S],E,T,!0),S++;else{const V=S,J=S,pt=new Map;for(S=J;S<=F;S++){const ue=p[S]=O?Li(p[S]):Ye(p[S]);ue.key!=null&&pt.set(ue.key,S)}let lt,le=0;const zt=F-J+1;let Re=!1,ce=0;const Ks=new Array(zt);for(S=0;S<zt;S++)Ks[S]=0;for(S=V;S<=M;S++){const ue=_[S];if(le>=zt){Yt(ue,E,T,!0);continue}let He;if(ue.key!=null)He=pt.get(ue.key);else for(lt=J;lt<=F;lt++)if(Ks[lt-J]===0&&Zs(ue,p[lt])){He=lt;break}He===void 0?Yt(ue,E,T,!0):(Ks[He-J]=S+1,He>=ce?ce=He:Re=!0,m(ue,p[He],w,null,E,T,k,B,O),le++)}const il=Re?pp(Ks):Bs;for(lt=il.length-1,S=zt-1;S>=0;S--){const ue=J+S,He=p[ue],sl=ue+1<z?p[ue+1].el:R;Ks[S]===0?m(null,He,w,sl,E,T,k,B,O):Re&&(lt<0||S!==il[lt]?$t(He,w,sl,2):lt--)}}},$t=(_,p,w,R,E=null)=>{const{el:T,type:k,transition:B,children:O,shapeFlag:S}=_;if(S&6){$t(_.component.subTree,p,w,R);return}if(S&128){_.suspense.move(p,w,R);return}if(S&64){k.move(_,p,w,Gs);return}if(k===fi){s(T,p,w);for(let M=0;M<O.length;M++)$t(O[M],p,w,R);s(_.anchor,p,w);return}if(k===bo){P(_,p,w);return}if(R!==2&&S&1&&B)if(R===0)B.beforeEnter(T),s(T,p,w),fe(()=>B.enter(T),E);else{const{leave:M,delayLeave:F,afterLeave:V}=B,J=()=>s(T,p,w),pt=()=>{M(T,()=>{J(),V&&V()})};F?F(T,J,pt):pt()}else s(T,p,w)},Yt=(_,p,w,R=!1,E=!1)=>{const{type:T,props:k,ref:B,children:O,dynamicChildren:S,shapeFlag:z,patchFlag:M,dirs:F,cacheIndex:V}=_;if(M===-2&&(E=!1),B!=null&&Ir(B,null,w,_,!0),V!=null&&(p.renderCache[V]=void 0),z&256){p.ctx.deactivate(_);return}const J=z&1&&F,pt=!xn(_);let lt;if(pt&&(lt=k&&k.onVnodeBeforeUnmount)&&ze(lt,p,_),z&6)zf(_.component,w,R);else{if(z&128){_.suspense.unmount(w,R);return}J&&Fi(_,null,p,"beforeUnmount"),z&64?_.type.remove(_,p,w,Gs,R):S&&!S.hasOnce&&(T!==fi||M>0&&M&64)?Ys(S,p,w,!1,!0):(T===fi&&M&384||!E&&z&16)&&Ys(O,p,w),R&&Zn(_)}(pt&&(lt=k&&k.onVnodeUnmounted)||J)&&fe(()=>{lt&&ze(lt,p,_),J&&Fi(_,null,p,"unmounted")},w)},Zn=_=>{const{type:p,el:w,anchor:R,transition:E}=_;if(p===fi){qn(w,R);return}if(p===bo){v(_);return}const T=()=>{n(w),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(_.shapeFlag&1&&E&&!E.persisted){const{leave:k,delayLeave:B}=E,O=()=>k(w,T);B?B(_.el,T,O):O()}else T()},qn=(_,p)=>{let w;for(;_!==p;)w=f(_),n(_),_=w;n(p)},zf=(_,p,w)=>{const{bum:R,scope:E,job:T,subTree:k,um:B,m:O,a:S}=_;fl(O),fl(S),R&&fo(R),E.stop(),T&&(T.flags|=8,Yt(k,_,p,w)),B&&fe(B,p),fe(()=>{_.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Ys=(_,p,w,R=!1,E=!1,T=0)=>{for(let k=T;k<_.length;k++)Yt(_[k],p,w,R,E)},Jn=_=>{if(_.shapeFlag&6)return Jn(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const p=f(_.anchor||_.el),w=p&&p[I_];return w?f(w):p};let co=!1;const Qh=(_,p,w)=>{_==null?p._vnode&&Yt(p._vnode,null,null,!0):m(p._vnode||null,_,p,null,null,null,w),p._vnode=_,co||(co=!0,al(),ud(),co=!1)},Gs={p:m,um:Yt,m:$t,r:Zn,mt:he,mc:it,pc:N,pbc:st,n:Jn,o:e};let tl,el;return{render:Qh,hydrate:tl,createApp:np(Qh,tl)}}function wo({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Hi({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function _p(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ld(e,t,i=!1){const s=e.children,n=t.children;if(K(s)&&K(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=Li(n[r]),a.el=o.el),!i&&a.patchFlag!==-2&&Ld(o,a)),a.type===Jr&&(a.el=o.el)}}function pp(e){const t=e.slice(),i=[0];let s,n,r,o,a;const h=e.length;for(s=0;s<h;s++){const l=e[s];if(l!==0){if(n=i[i.length-1],e[n]<l){t[s]=n,i.push(s);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<l?r=a+1:o=a;l<e[i[r]]&&(r>0&&(t[s]=i[r-1]),i[r]=s)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function Od(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Od(t)}function fl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const gp=Symbol.for("v-scx"),yp=()=>Cr(gp);function vo(e,t,i){return Bd(e,t,i)}function Bd(e,t,i=yt){const{immediate:s,deep:n,flush:r,once:o}=i,a=It({},i),h=t&&s||!t&&r!=="post";let l;if(Mn){if(r==="sync"){const d=yp();l=d.__watcherHandles||(d.__watcherHandles=[])}else if(!h){const d=()=>{};return d.stop=qe,d.resume=qe,d.pause=qe,d}}const c=Jt;a.call=(d,g,m)=>Je(d,c,g,m);let u=!1;r==="post"?a.scheduler=d=>{fe(d,c&&c.suspense)}:r!=="sync"&&(u=!0,a.scheduler=(d,g)=>{g?d():Ch(d)}),a.augmentJob=d=>{t&&(d.flags|=4),u&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const f=O_(e,t,a);return Mn&&(l?l.push(f):h&&f()),f}function mp(e,t,i){const s=this.proxy,n=At(e)?e.includes(".")?kd(s,e):()=>s[e]:e.bind(s,s);let r;X(t)?r=t:(r=t.handler,i=t);const o=Hn(this),a=Bd(n,r.bind(s),i);return o(),a}function kd(e,t){const i=t.split(".");return()=>{let s=e;for(let n=0;n<i.length&&s;n++)s=s[i[n]];return s}}const wp=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Mi(t)}Modifiers`]||e[`${hs(t)}Modifiers`];function vp(e,t,...i){if(e.isUnmounted)return;const s=e.vnode.props||yt;let n=i;const r=t.startsWith("update:"),o=r&&wp(s,t.slice(7));o&&(o.trim&&(n=i.map(c=>At(c)?c.trim():c)),o.number&&(n=i.map(Gf)));let a,h=s[a=uo(t)]||s[a=uo(Mi(t))];!h&&r&&(h=s[a=uo(hs(t))]),h&&Je(h,e,6,n);const l=s[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Je(l,e,6,n)}}function Md(e,t,i=!1){const s=t.emitsCache,n=s.get(e);if(n!==void 0)return n;const r=e.emits;let o={},a=!1;if(!X(e)){const h=l=>{const c=Md(l,t,!0);c&&(a=!0,It(o,c))};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!r&&!a?(Lt(e)&&s.set(e,null),null):(K(r)?r.forEach(h=>o[h]=null):It(o,r),Lt(e)&&s.set(e,o),o)}function qr(e,t){return!e||!Ur(t)?!1:(t=t.slice(2).replace(/Once$/,""),rt(e,t[0].toLowerCase()+t.slice(1))||rt(e,hs(t))||rt(e,t))}function xo(e){const{type:t,vnode:i,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:h,render:l,renderCache:c,props:u,data:f,setupState:d,ctx:g,inheritAttrs:m}=e,x=Dr(e);let C,b;try{if(i.shapeFlag&4){const v=n||s,A=v;C=Ye(l.call(A,v,c,u,d,f,g)),b=a}else{const v=t;C=Ye(v.length>1?v(u,{attrs:a,slots:o,emit:h}):v(u,null)),b=t.props?a:xp(a)}}catch(v){En.length=0,Xr(v,e,1),C=Qi(Bn)}let P=C;if(b&&m!==!1){const v=Object.keys(b),{shapeFlag:A}=P;v.length&&A&7&&(r&&v.some(ch)&&(b=bp(b,r)),P=$s(P,b,!1,!0))}return i.dirs&&(P=$s(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(i.dirs):i.dirs),i.transition&&Th(P,i.transition),C=P,Dr(x),C}const xp=e=>{let t;for(const i in e)(i==="class"||i==="style"||Ur(i))&&((t||(t={}))[i]=e[i]);return t},bp=(e,t)=>{const i={};for(const s in e)(!ch(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function Ep(e,t,i){const{props:s,children:n,component:r}=e,{props:o,children:a,patchFlag:h}=t,l=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return s?_l(s,o,l):!!o;if(h&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const f=c[u];if(o[f]!==s[f]&&!qr(l,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?_l(s,o,l):!0:!!o;return!1}function _l(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==e[r]&&!qr(i,r))return!0}return!1}function Cp({vnode:e,parent:t},i){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=i,t=t.parent;else break}}const Ad=e=>e.__isSuspense;function Tp(e,t){t&&t.pendingBranch?K(e)?t.effects.push(...e):t.effects.push(e):A_(e)}const fi=Symbol.for("v-fgt"),Jr=Symbol.for("v-txt"),Bn=Symbol.for("v-cmt"),bo=Symbol.for("v-stc"),En=[];let ge=null;function Rp(e=!1){En.push(ge=e?null:[])}function Sp(){En.pop(),ge=En[En.length-1]||null}let kn=1;function pl(e,t=!1){kn+=e,e<0&&ge&&t&&(ge.hasOnce=!0)}function Pp(e){return e.dynamicChildren=kn>0?ge||Bs:null,Sp(),kn>0&&ge&&ge.push(e),e}function Lp(e,t,i,s,n,r){return Pp(_e(e,t,i,s,n,r,!0))}function Dd(e){return e?e.__v_isVNode===!0:!1}function Zs(e,t){return e.type===t.type&&e.key===t.key}const Id=({key:e})=>e??null,Tr=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?At(e)||jt(e)||X(e)?{i:Xe,r:e,k:t,f:!!i}:e:null);function _e(e,t=null,i=null,s=0,n=null,r=e===fi?0:1,o=!1,a=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Id(t),ref:t&&Tr(t),scopeId:fd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Xe};return a?(Lh(h,i),r&128&&e.normalize(h)):i&&(h.shapeFlag|=At(i)?8:16),kn>0&&!o&&ge&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&ge.push(h),h}const Qi=Op;function Op(e,t=null,i=null,s=0,n=null,r=!1){if((!e||e===Z_)&&(e=Bn),Dd(e)){const a=$s(e,t,!0);return i&&Lh(a,i),kn>0&&!r&&ge&&(a.shapeFlag&6?ge[ge.indexOf(e)]=a:ge.push(a)),a.patchFlag=-2,a}if(zp(e)&&(e=e.__vccOpts),t){t=Bp(t);let{class:a,style:h}=t;a&&!At(a)&&(t.class=_h(a)),Lt(h)&&(Eh(h)&&!K(h)&&(h=It({},h)),t.style=fh(h))}const o=At(e)?1:Ad(e)?128:W_(e)?64:Lt(e)?4:X(e)?2:0;return _e(e,t,i,s,n,o,r,!0)}function Bp(e){return e?Eh(e)||bd(e)?It({},e):e:null}function $s(e,t,i=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:h}=e,l=t?Mp(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Id(l),ref:t&&t.ref?i&&r?K(r)?r.concat(Tr(t)):[r,Tr(t)]:Tr(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fi?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$s(e.ssContent),ssFallback:e.ssFallback&&$s(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&s&&Th(c,h.clone(c)),c}function kp(e=" ",t=0){return Qi(Jr,null,e,t)}function Ye(e){return e==null||typeof e=="boolean"?Qi(Bn):K(e)?Qi(fi,null,e.slice()):Dd(e)?Li(e):Qi(Jr,null,String(e))}function Li(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$s(e)}function Lh(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(K(t))i=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Lh(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!bd(t)?t._ctx=Xe:n===3&&Xe&&(Xe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else X(t)?(t={default:t,_ctx:Xe},i=32):(t=String(t),s&64?(i=16,t=[kp(t)]):i=8);e.children=t,e.shapeFlag|=i}function Mp(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=_h([t.class,s.class]));else if(n==="style")t.style=fh([t.style,s.style]);else if(Ur(n)){const r=t[n],o=s[n];o&&r!==o&&!(K(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function ze(e,t,i,s=null){Je(e,t,7,[i,s])}const Ap=wd();let Dp=0;function Ip(e,t,i){const s=e.type,n=(t?t.appContext:e.appContext)||Ap,r={uid:Dp++,vnode:e,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new t_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cd(s,n),emitsOptions:Md(s,n),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:s.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=vp.bind(null,r),e.ce&&e.ce(r),r}let Jt=null,$r,ja;{const e=Kr(),t=(i,s)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};$r=t("__VUE_INSTANCE_SETTERS__",i=>Jt=i),ja=t("__VUE_SSR_SETTERS__",i=>Mn=i)}const Hn=e=>{const t=Jt;return $r(e),e.scope.on(),()=>{e.scope.off(),$r(t)}},gl=()=>{Jt&&Jt.scope.off(),$r(null)};function Wd(e){return e.vnode.shapeFlag&4}let Mn=!1;function Wp(e,t=!1,i=!1){t&&ja(t);const{props:s,children:n}=e.vnode,r=Wd(e);op(e,s,r,t),cp(e,n,i);const o=r?$p(e,t):void 0;return t&&ja(!1),o}function $p(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,q_);const{setup:s}=i;if(s){Ii();const n=e.setupContext=s.length>1?Hp(e):null,r=Hn(e),o=Fn(s,e,0,[e.props,n]),a=$u(o);if(Wi(),r(),(a||e.sp)&&!xn(e)&&_d(e),a){if(o.then(gl,gl),t)return o.then(h=>{yl(e,h,t)}).catch(h=>{Xr(h,e,0)});e.asyncDep=o}else yl(e,o,t)}else $d(e,t)}function yl(e,t,i){X(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Lt(t)&&(e.setupState=hd(t)),$d(e,i)}let ml;function $d(e,t,i){const s=e.type;if(!e.render){if(!t&&ml&&!s.render){const n=s.template||Sh(e).template;if(n){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:h}=s,l=It(It({isCustomElement:r,delimiters:a},o),h);s.render=ml(n,l)}}e.render=s.render||qe}{const n=Hn(e);Ii();try{J_(e)}finally{Wi(),n()}}}const Fp={get(e,t){return Nt(e,"get",""),e[t]}};function Hp(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Fp),slots:e.slots,emit:e.emit,expose:t}}function Oh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(hd(x_(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in bn)return bn[i](e)},has(t,i){return i in t||i in bn}})):e.proxy}function zp(e){return X(e)&&"__vccOpts"in e}const Np=(e,t)=>P_(e,t,Mn),jp="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Va;const wl=typeof window<"u"&&window.trustedTypes;if(wl)try{Va=wl.createPolicy("vue",{createHTML:e=>e})}catch{}const Fd=Va?e=>Va.createHTML(e):e=>e,Vp="http://www.w3.org/2000/svg",Up="http://www.w3.org/1998/Math/MathML",di=typeof document<"u"?document:null,vl=di&&di.createElement("template"),Yp={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const n=t==="svg"?di.createElementNS(Vp,e):t==="mathml"?di.createElementNS(Up,e):i?di.createElement(e,{is:i}):di.createElement(e);return e==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:e=>di.createTextNode(e),createComment:e=>di.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>di.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,s,n,r){const o=i?i.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===r||!(n=n.nextSibling)););else{vl.innerHTML=Fd(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=vl.content;if(s==="svg"||s==="mathml"){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Gp=Symbol("_vtc");function Kp(e,t,i){const s=e[Gp];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const xl=Symbol("_vod"),Xp=Symbol("_vsh"),Zp=Symbol(""),qp=/(^|;)\s*display\s*:/;function Jp(e,t,i){const s=e.style,n=At(i);let r=!1;if(i&&!n){if(t)if(At(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Rr(s,a,"")}else for(const o in t)i[o]==null&&Rr(s,o,"");for(const o in i)o==="display"&&(r=!0),Rr(s,o,i[o])}else if(n){if(t!==i){const o=s[Zp];o&&(i+=";"+o),s.cssText=i,r=qp.test(i)}}else t&&e.removeAttribute("style");xl in e&&(e[xl]=r?s.display:"",e[Xp]&&(s.display="none"))}const bl=/\s*!important$/;function Rr(e,t,i){if(K(i))i.forEach(s=>Rr(e,t,s));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=Qp(e,t);bl.test(i)?e.setProperty(hs(s),i.replace(bl,""),"important"):e[s]=i}}const El=["Webkit","Moz","ms"],Eo={};function Qp(e,t){const i=Eo[t];if(i)return i;let s=Mi(t);if(s!=="filter"&&s in e)return Eo[t]=s;s=zu(s);for(let n=0;n<El.length;n++){const r=El[n]+s;if(r in e)return Eo[t]=r}return t}const Cl="http://www.w3.org/1999/xlink";function Tl(e,t,i,s,n,r=Qf(t)){s&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Cl,t.slice(6,t.length)):e.setAttributeNS(Cl,t,i):i==null||r&&!ju(i)?e.removeAttribute(t):e.setAttribute(t,r?"":Di(i)?String(i):i)}function Rl(e,t,i,s,n){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?Fd(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,h=i==null?e.type==="checkbox"?"on":"":String(i);(a!==h||!("_value"in e))&&(e.value=h),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=ju(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(n||t)}function tg(e,t,i,s){e.addEventListener(t,i,s)}function eg(e,t,i,s){e.removeEventListener(t,i,s)}const Sl=Symbol("_vei");function ig(e,t,i,s,n=null){const r=e[Sl]||(e[Sl]={}),o=r[t];if(s&&o)o.value=s;else{const[a,h]=sg(t);if(s){const l=r[t]=og(s,n);tg(e,a,l,h)}else o&&(eg(e,a,o,h),r[t]=void 0)}}const Pl=/(?:Once|Passive|Capture)$/;function sg(e){let t;if(Pl.test(e)){t={};let s;for(;s=e.match(Pl);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hs(e.slice(2)),t]}let Co=0;const ng=Promise.resolve(),rg=()=>Co||(ng.then(()=>Co=0),Co=Date.now());function og(e,t){const i=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=i.attached)return;Je(ag(s,i.value),t,5,[s])};return i.value=e,i.attached=rg(),i}function ag(e,t){if(K(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Ll=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,hg=(e,t,i,s,n,r)=>{const o=n==="svg";t==="class"?Kp(e,s,o):t==="style"?Jp(e,i,s):Ur(t)?ch(t)||ig(e,t,i,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lg(e,t,s,o))?(Rl(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Tl(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!At(s))?Rl(e,Mi(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Tl(e,t,s,o))};function lg(e,t,i,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ll(t)&&X(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Ll(t)&&At(i)?!1:t in e}const cg=It({patchProp:hg},Yp);let Ol;function ug(){return Ol||(Ol=dp(cg))}const dg=(...e)=>{const t=ug().createApp(...e),{mount:i}=t;return t.mount=s=>{const n=_g(s);if(!n)return;const r=t._component;!X(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=i(n,!1,fg(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function fg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function _g(e){return At(e)?document.querySelector(e):e}const D={toURL(e,t){let i=encodeURIComponent(e);return t==="text"?i="data:text/plain;charset=utf-8,"+i:t==="svg"&&(i="data:image/svg+xml,"+i),i},image:{hitCanvasSize:100,maxCacheSize:2560*1600,maxPatternSize:4096*2160,crossOrigin:"anonymous",getRealURL(e){const{prefix:t,suffix:i}=D.image;return i&&!e.startsWith("data:")&&!e.startsWith("blob:")&&(e+=(e.includes("?")?"&":"?")+i),t&&e[0]==="/"&&(e=t+e),e}}},St={},yi={RUNTIME:"runtime",LEAF:"leaf",TASK:"task",CNAVAS:"canvas",IMAGE:"image",types:{},create(e){const{types:t}=pg;return t[e]?t[e]++:(t[e]=1,0)}},pg=yi,{round:gg,pow:yg,PI:Bh}=Math,Wt={within(e,t,i){return typeof t=="object"&&(i=t.max,t=t.min),t!==void 0&&e<t&&(e=t),i!==void 0&&e>i&&(e=i),e},fourNumber(e,t){let i;if(e instanceof Array)switch(e.length){case 4:i=t===void 0?e:[...e];break;case 2:i=[e[0],e[1],e[0],e[1]];break;case 3:i=[e[0],e[1],e[2],e[1]];break;case 1:e=e[0];break;default:e=0}if(i||(i=[e,e,e,e]),t)for(let s=0;s<4;s++)i[s]>t&&(i[s]=t);return i},formatRotation(e,t){return e%=360,t?e<0&&(e+=360):(e>180&&(e-=360),e<-180&&(e+=360)),Wt.float(e)},getGapRotation(e,t,i=0){let s=e+i;if(t>1){const n=Math.abs(s%t);(n<1||n>t-1)&&(s=Math.round(s/t)*t)}return s-i},float(e,t){const i=t?yg(10,t):1e12;return e=gg(e*i)/i,e===-0?0:e},getScaleData(e,t,i,s){return s||(s={}),t?(s.scaleX=(typeof t=="number"?t:t.width)/i.width,s.scaleY=(typeof t=="number"?t:t.height)/i.height):e&&Wt.assignScale(s,e),s},assignScale(e,t){typeof t=="number"?e.scaleX=e.scaleY=t:(e.scaleX=t.x,e.scaleY=t.y)}},ut=Bh/180,Ee=Bh*2,Ss=Bh/2;function kh(){return{x:0,y:0}}function Hd(){return{x:0,y:0,width:0,height:0}}function Fr(){return{a:1,b:0,c:0,d:1,e:0,f:0}}const{sin:To,cos:Ro,acos:ir,sqrt:So}=Math,{float:fs}=Wt,_s={};function Bl(){return Object.assign(Object.assign(Object.assign({},Fr()),Hd()),{scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0})}const U={defaultMatrix:Fr(),defaultWorld:Bl(),tempMatrix:{},set(e,t=1,i=0,s=0,n=1,r=0,o=0){e.a=t,e.b=i,e.c=s,e.d=n,e.e=r,e.f=o},get:Fr,getWorld:Bl,copy(e,t){e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f},translate(e,t,i){e.e+=t,e.f+=i},translateInner(e,t,i,s){e.e+=e.a*t+e.c*i,e.f+=e.b*t+e.d*i,s&&(e.e-=t,e.f-=i)},scale(e,t,i=t){e.a*=t,e.b*=t,e.c*=i,e.d*=i},scaleOfOuter(e,t,i,s){bt.toInnerPoint(e,t,_s),bt.scaleOfInner(e,_s,i,s)},scaleOfInner(e,t,i,s=i){bt.translateInner(e,t.x,t.y),bt.scale(e,i,s),bt.translateInner(e,-t.x,-t.y)},rotate(e,t){const{a:i,b:s,c:n,d:r}=e;t*=ut;const o=Ro(t),a=To(t);e.a=i*o-s*a,e.b=i*a+s*o,e.c=n*o-r*a,e.d=n*a+r*o},rotateOfOuter(e,t,i){bt.toInnerPoint(e,t,_s),bt.rotateOfInner(e,_s,i)},rotateOfInner(e,t,i){bt.translateInner(e,t.x,t.y),bt.rotate(e,i),bt.translateInner(e,-t.x,-t.y)},skew(e,t,i){const{a:s,b:n,c:r,d:o}=e;i&&(i*=ut,e.a=s+r*i,e.b=n+o*i),t&&(t*=ut,e.c=r+s*t,e.d=o+n*t)},skewOfOuter(e,t,i,s){bt.toInnerPoint(e,t,_s),bt.skewOfInner(e,_s,i,s)},skewOfInner(e,t,i,s=0){bt.translateInner(e,t.x,t.y),bt.skew(e,i,s),bt.translateInner(e,-t.x,-t.y)},multiply(e,t){const{a:i,b:s,c:n,d:r,e:o,f:a}=e;e.a=t.a*i+t.b*n,e.b=t.a*s+t.b*r,e.c=t.c*i+t.d*n,e.d=t.c*s+t.d*r,e.e=t.e*i+t.f*n+o,e.f=t.e*s+t.f*r+a},multiplyParent(e,t,i,s,n,r){let{e:o,f:a}=e;if(r&&(o+=r.scrollX,a+=r.scrollY),i||(i=e),s===void 0&&(s=e.a!==1||e.b||e.c||e.d!==1),s){const{a:h,b:l,c,d:u}=e;i.a=h*t.a+l*t.c,i.b=h*t.b+l*t.d,i.c=c*t.a+u*t.c,i.d=c*t.b+u*t.d,n&&(i.scaleX=t.scaleX*n.scaleX,i.scaleY=t.scaleY*n.scaleY)}else i.a=t.a,i.b=t.b,i.c=t.c,i.d=t.d,n&&(i.scaleX=t.scaleX,i.scaleY=t.scaleY);i.e=o*t.a+a*t.c+t.e,i.f=o*t.b+a*t.d+t.f},divide(e,t){bt.multiply(e,bt.tempInvert(t))},divideParent(e,t){bt.multiplyParent(e,bt.tempInvert(t))},tempInvert(e){const{tempMatrix:t}=bt;return bt.copy(t,e),bt.invert(t),t},invert(e){const{a:t,b:i,c:s,d:n,e:r,f:o}=e;if(!i&&!s)if(t===1&&n===1)e.e=-r,e.f=-o;else{const a=1/(t*n);e.a=n*a,e.d=t*a,e.e=-r*n*a,e.f=-o*t*a}else{const a=1/(t*n-i*s);e.a=n*a,e.b=-i*a,e.c=-s*a,e.d=t*a,e.e=-(r*n-o*s)*a,e.f=-(o*t-r*i)*a}},toOuterPoint(e,t,i,s){const{x:n,y:r}=t;i||(i=t),i.x=n*e.a+r*e.c,i.y=n*e.b+r*e.d,s||(i.x+=e.e,i.y+=e.f)},toInnerPoint(e,t,i,s){const{a:n,b:r,c:o,d:a}=e,h=1/(n*a-r*o),{x:l,y:c}=t;if(i||(i=t),i.x=(l*a-c*o)*h,i.y=(c*n-l*r)*h,!s){const{e:u,f}=e;i.x-=(u*a-f*o)*h,i.y-=(f*n-u*r)*h}},setLayout(e,t,i,s,n){const{x:r,y:o,scaleX:a,scaleY:h}=t;if(n===void 0&&(n=t.rotation||t.skewX||t.skewY),n){const{rotation:l,skewX:c,skewY:u}=t,f=l*ut,d=Ro(f),g=To(f);if(c||u){const m=c*ut,x=u*ut;e.a=(d+x*-g)*a,e.b=(g+x*d)*a,e.c=(-g+m*d)*h,e.d=(d+m*g)*h}else e.a=d*a,e.b=g*a,e.c=-g*h,e.d=d*h}else e.a=a,e.b=0,e.c=0,e.d=h;e.e=r,e.f=o,(i=i||s)&&bt.translateInner(e,-i.x,-i.y,!s)},getLayout(e,t,i,s){const{a:n,b:r,c:o,d:a,e:h,f:l}=e;let c=h,u=l,f,d,g,m,x;if(r||o){const C=n*a-r*o;if(o&&!s){f=So(n*n+r*r),d=C/f;const v=n/f;g=r>0?ir(v):-ir(v)}else{d=So(o*o+a*a),f=C/d;const v=o/d;g=Ss-(a>0?ir(-v):-ir(v))}const b=fs(Ro(g)),P=To(g);f=fs(f),d=fs(d),m=b?fs((o/d+P)/b/ut,9):0,x=b?fs((r/f-P)/b/ut,9):0,g=fs(g/ut)}else f=n,d=a,g=m=x=0;return(t=i||t)&&(c+=t.x*n+t.y*o,u+=t.x*r+t.y*a,i||(c-=t.x,u-=t.y)),{x:c,y:u,scaleX:f,scaleY:d,rotation:g,skewX:m,skewY:x}},withScale(e,t,i=t){const s=e;if(!t||!i){const{a:n,b:r,c:o,d:a}=e;r||o?(t=So(n*n+r*r),i=(n*a-r*o)/t):(t=n,i=a)}return s.scaleX=t,s.scaleY=i,s},reset(e){bt.set(e)}},bt=U,{toInnerPoint:Po,toOuterPoint:kl}=U,{sin:Ml,cos:Al,abs:Dl,sqrt:mg,atan2:Lo,min:wg,PI:vg}=Math,j={defaultPoint:kh(),tempPoint:{},tempRadiusPoint:{},set(e,t=0,i=0){e.x=t,e.y=i},setRadius(e,t,i){e.radiusX=t,e.radiusY=i===void 0?t:i},copy(e,t){e.x=t.x,e.y=t.y},copyFrom(e,t,i){e.x=t,e.y=i},move(e,t,i){e.x+=t,e.y+=i},scale(e,t,i=t){e.x&&(e.x*=t),e.y&&(e.y*=i)},scaleOf(e,t,i,s=i){e.x+=(e.x-t.x)*(i-1),e.y+=(e.y-t.y)*(s-1)},rotate(e,t,i){i||(i=Xi.defaultPoint),t*=ut;const s=Al(t),n=Ml(t),r=e.x-i.x,o=e.y-i.y;e.x=i.x+r*s-o*n,e.y=i.y+r*n+o*s},tempToInnerOf(e,t){const{tempPoint:i}=Xi;return Bo(i,e),Po(t,i,i),i},tempToOuterOf(e,t){const{tempPoint:i}=Xi;return Bo(i,e),kl(t,i,i),i},tempToInnerRadiusPointOf(e,t){const{tempRadiusPoint:i}=Xi;return Bo(i,e),Xi.toInnerRadiusPointOf(e,t,i),i},toInnerRadiusPointOf(e,t,i){i||(i=e),Po(t,e,i),i.radiusX=Math.abs(e.radiusX/t.scaleX),i.radiusY=Math.abs(e.radiusY/t.scaleY)},toInnerOf(e,t,i){Po(t,e,i)},toOuterOf(e,t,i){kl(t,e,i)},getCenter(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}},getCenterX(e,t){return e+(t-e)/2},getCenterY(e,t){return e+(t-e)/2},getDistance(e,t){return Oo(e.x,e.y,t.x,t.y)},getDistanceFrom(e,t,i,s){const n=Dl(i-e),r=Dl(s-t);return mg(n*n+r*r)},getMinDistanceFrom(e,t,i,s,n,r){return wg(Oo(e,t,i,s),Oo(i,s,n,r))},getAngle(e,t){return Il(e,t)/ut},getRotation(e,t,i,s){return s||(s=t),Xi.getRadianFrom(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)/ut},getRadianFrom(e,t,i,s,n,r,o,a){o===void 0&&(o=i,a=s);let h=Lo(t-s,e-i);const c=Lo(r-a,n-o)-h;return c<-vg?c+Ee:c},getAtan2(e,t){return Lo(t.y-e.y,t.x-e.x)},getDistancePoint(e,t,i,s){const n=Il(e,t);return t=s?t:{},t.x=e.x+Al(n)*i,t.y=e.y+Ml(n)*i,t},toNumberPoints(e){let t=e;return typeof e[0]=="object"&&(t=[],e.forEach(i=>t.push(i.x,i.y))),t},reset(e){}},Xi=j,{getDistanceFrom:Oo,copy:Bo,getAtan2:Il}=Xi;class Cn{constructor(t,i){this.set(t,i)}set(t,i){return typeof t=="object"?j.copy(this,t):j.set(this,t,i),this}get(){const{x:t,y:i}=this;return{x:t,y:i}}clone(){return new Cn(this)}move(t,i){return j.move(this,t,i),this}scale(t,i){return j.scale(this,t,i),this}scaleOf(t,i,s){return j.scaleOf(this,t,i,s),this}rotate(t,i){return j.rotate(this,t,i),this}rotateOf(t,i){return j.rotate(this,i,t),this}getRotation(t,i,s){return j.getRotation(this,t,i,s)}toInnerOf(t,i){return j.toInnerOf(this,t,i),this}toOuterOf(t,i){return j.toOuterOf(this,t,i),this}getCenter(t){return new Cn(j.getCenter(this,t))}getDistance(t){return j.getDistance(this,t)}getDistancePoint(t,i,s){return new Cn(j.getDistancePoint(this,t,i,s))}getAngle(t){return j.getAngle(this,t)}getAtan2(t){return j.getAtan2(this,t)}reset(){return this}}new Cn;class re{constructor(t,i,s,n,r,o){this.set(t,i,s,n,r,o)}set(t,i,s,n,r,o){return typeof t=="object"?U.copy(this,t):U.set(this,t,i,s,n,r,o),this}setWith(t){return U.copy(this,t),this.scaleX=t.scaleX,this.scaleY=t.scaleY,this}get(){const{a:t,b:i,c:s,d:n,e:r,f:o}=this;return{a:t,b:i,c:s,d:n,e:r,f:o}}clone(){return new re(this)}translate(t,i){return U.translate(this,t,i),this}translateInner(t,i){return U.translateInner(this,t,i),this}scale(t,i){return U.scale(this,t,i),this}scaleWith(t,i){return U.scale(this,t,i),this.scaleX*=t,this.scaleY*=i||t,this}scaleOfOuter(t,i,s){return U.scaleOfOuter(this,t,i,s),this}scaleOfInner(t,i,s){return U.scaleOfInner(this,t,i,s),this}rotate(t){return U.rotate(this,t),this}rotateOfOuter(t,i){return U.rotateOfOuter(this,t,i),this}rotateOfInner(t,i){return U.rotateOfInner(this,t,i),this}skew(t,i){return U.skew(this,t,i),this}skewOfOuter(t,i,s){return U.skewOfOuter(this,t,i,s),this}skewOfInner(t,i,s){return U.skewOfInner(this,t,i,s),this}multiply(t){return U.multiply(this,t),this}multiplyParent(t){return U.multiplyParent(this,t),this}divide(t){return U.divide(this,t),this}divideParent(t){return U.divideParent(this,t),this}invert(){return U.invert(this),this}invertWith(){return U.invert(this),this.scaleX=1/this.scaleX,this.scaleY=1/this.scaleY,this}toOuterPoint(t,i,s){U.toOuterPoint(this,t,i,s)}toInnerPoint(t,i,s){U.toInnerPoint(this,t,i,s)}setLayout(t,i,s){return U.setLayout(this,t,i,s),this}getLayout(t,i,s){return U.getLayout(this,t,i,s)}withScale(t,i){return U.withScale(this,t,i)}reset(){U.reset(this)}}new re;const zn={tempPointBounds:{},setPoint(e,t,i){e.minX=e.maxX=t,e.minY=e.maxY=i},addPoint(e,t,i){e.minX=t<e.minX?t:e.minX,e.minY=i<e.minY?i:e.minY,e.maxX=t>e.maxX?t:e.maxX,e.maxY=i>e.maxY?i:e.maxY},addBounds(e,t,i,s,n){Wl(e,t,i),Wl(e,t+s,i+n)},copy(e,t){e.minX=t.minX,e.minY=t.minY,e.maxX=t.maxX,e.maxY=t.maxY},addPointBounds(e,t){e.minX=t.minX<e.minX?t.minX:e.minX,e.minY=t.minY<e.minY?t.minY:e.minY,e.maxX=t.maxX>e.maxX?t.maxX:e.maxX,e.maxY=t.maxY>e.maxY?t.maxY:e.maxY},toBounds(e,t){t.x=e.minX,t.y=e.minY,t.width=e.maxX-e.minX,t.height=e.maxY-e.minY}},{addPoint:Wl}=zn,{tempPointBounds:Ti,setPoint:$l,addPoint:sr,toBounds:Fl}=zn,{toOuterPoint:nr}=U,{float:rr,fourNumber:xg}=Wt,{floor:Hl,ceil:or}=Math;let Ne,je,zi,Ni;const oi={},we={},H={tempBounds:{},set(e,t=0,i=0,s=0,n=0){e.x=t,e.y=i,e.width=s,e.height=n},copy(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},copyAndSpread(e,t,i,s,n){const{x:r,y:o,width:a,height:h}=t;if(i instanceof Array){const l=xg(i);s?et.set(e,r+l[3],o+l[0],a-l[1]-l[3],h-l[2]-l[0]):et.set(e,r-l[3],o-l[0],a+l[1]+l[3],h+l[2]+l[0])}else s&&(i=-i),et.set(e,r-i,o-i,a+i*2,h+i*2);n&&(n==="width"?(e.y=o,e.height=h):(e.x=r,e.width=a))},minX(e){return e.width>0?e.x:e.x+e.width},minY(e){return e.height>0?e.y:e.y+e.height},maxX(e){return e.width>0?e.x+e.width:e.x},maxY(e){return e.height>0?e.y+e.height:e.y},move(e,t,i){e.x+=t,e.y+=i},getByMove(e,t,i){return e=Object.assign({},e),et.move(e,t,i),e},toOffsetOutBounds(e,t,i){t?Nl(t,e):t=e,i?(t.offsetX=-(et.maxX(i)-e.x),t.offsetY=-(et.maxY(i)-e.y)):(t.offsetX=e.x+e.width,t.offsetY=e.y+e.height),et.move(t,-t.offsetX,-t.offsetY)},scale(e,t,i=t){j.scale(e,t,i),e.width*=t,e.height*=i},scaleOf(e,t,i,s=i){j.scaleOf(e,t,i,s),e.width*=i,e.height*=s},tempToOuterOf(e,t){return et.copy(et.tempBounds,e),et.toOuterOf(et.tempBounds,t),et.tempBounds},getOuterOf(e,t){return e=Object.assign({},e),et.toOuterOf(e,t),e},toOuterOf(e,t,i){if(i||(i=e),t.b===0&&t.c===0){const{a:s,d:n}=t;s>0?(i.width=e.width*s,i.x=t.e+e.x*s):(i.width=e.width*-s,i.x=t.e+e.x*s-i.width),n>0?(i.height=e.height*n,i.y=t.f+e.y*n):(i.height=e.height*-n,i.y=t.f+e.y*n-i.height)}else oi.x=e.x,oi.y=e.y,nr(t,oi,we),$l(Ti,we.x,we.y),oi.x=e.x+e.width,nr(t,oi,we),sr(Ti,we.x,we.y),oi.y=e.y+e.height,nr(t,oi,we),sr(Ti,we.x,we.y),oi.x=e.x,nr(t,oi,we),sr(Ti,we.x,we.y),Fl(Ti,i)},toInnerOf(e,t,i){i||(i=e),et.move(i,-t.e,-t.f),et.scale(i,1/t.a,1/t.d)},getFitMatrix(e,t,i=1){const s=Math.min(i,Math.min(e.width/t.width,e.height/t.height));return new re(s,0,0,s,-t.x*s,-t.y*s)},getSpread(e,t,i){const s={};return et.copyAndSpread(s,e,t,!1,i),s},spread(e,t,i){et.copyAndSpread(e,e,t,!1,i)},shrink(e,t,i){et.copyAndSpread(e,e,t,!0,i)},ceil(e){const{x:t,y:i}=e;e.x=Hl(e.x),e.y=Hl(e.y),e.width=t>e.x?or(e.width+t-e.x):or(e.width),e.height=i>e.y?or(e.height+i-e.y):or(e.height)},unsign(e){e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height)},float(e,t){e.x=rr(e.x,t),e.y=rr(e.y,t),e.width=rr(e.width,t),e.height=rr(e.height,t)},add(e,t,i){Ne=e.x+e.width,je=e.y+e.height,zi=t.x,Ni=t.y,i||(zi+=t.width,Ni+=t.height),Ne=Ne>zi?Ne:zi,je=je>Ni?je:Ni,e.x=e.x<t.x?e.x:t.x,e.y=e.y<t.y?e.y:t.y,e.width=Ne-e.x,e.height=je-e.y},addList(e,t){et.setListWithFn(e,t,void 0,!0)},setList(e,t,i=!1){et.setListWithFn(e,t,void 0,i)},addListWithFn(e,t,i){et.setListWithFn(e,t,i,!0)},setListWithFn(e,t,i,s=!1){let n,r=!0;for(let o=0,a=t.length;o<a;o++)n=i?i(t[o]):t[o],n&&(n.width||n.height)&&(r?(r=!1,s||Nl(e,n)):zl(e,n));r&&et.reset(e)},setPoints(e,t){t.forEach((i,s)=>s===0?$l(Ti,i.x,i.y):sr(Ti,i.x,i.y)),Fl(Ti,e)},setPoint(e,t){et.set(e,t.x,t.y)},addPoint(e,t){zl(e,t,!0)},getPoints(e){const{x:t,y:i,width:s,height:n}=e;return[{x:t,y:i},{x:t+s,y:i},{x:t+s,y:i+n},{x:t,y:i+n}]},hitRadiusPoint(e,t,i){return i&&(t=j.tempToInnerRadiusPointOf(t,i)),t.x>=e.x-t.radiusX&&t.x<=e.x+e.width+t.radiusX&&t.y>=e.y-t.radiusY&&t.y<=e.y+e.height+t.radiusY},hitPoint(e,t,i){return i&&(t=j.tempToInnerOf(t,i)),t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},hit(e,t,i){return i&&(t=et.tempToOuterOf(t,i)),!(e.y+e.height<t.y||t.y+t.height<e.y||e.x+e.width<t.x||t.x+t.width<e.x)},includes(e,t,i){return i&&(t=et.tempToOuterOf(t,i)),e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height},getIntersectData(e,t,i){if(i&&(t=et.tempToOuterOf(t,i)),!et.hit(e,t))return Hd();let{x:s,y:n,width:r,height:o}=t;return Ne=s+r,je=n+o,zi=e.x+e.width,Ni=e.y+e.height,s=s>e.x?s:e.x,n=n>e.y?n:e.y,Ne=Ne<zi?Ne:zi,je=je<Ni?je:Ni,r=Ne-s,o=je-n,{x:s,y:n,width:r,height:o}},intersect(e,t,i){et.copy(e,et.getIntersectData(e,t,i))},isSame(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},isEmpty(e){return e.x===0&&e.y===0&&e.width===0&&e.height===0},reset(e){et.set(e)}},et=H,{add:zl,copy:Nl}=et;class wt{get minX(){return H.minX(this)}get minY(){return H.minY(this)}get maxX(){return H.maxX(this)}get maxY(){return H.maxY(this)}constructor(t,i,s,n){this.set(t,i,s,n)}set(t,i,s,n){return typeof t=="object"?H.copy(this,t):H.set(this,t,i,s,n),this}get(){const{x:t,y:i,width:s,height:n}=this;return{x:t,y:i,width:s,height:n}}clone(){return new wt(this)}move(t,i){return H.move(this,t,i),this}scale(t,i){return H.scale(this,t,i),this}scaleOf(t,i,s){return H.scaleOf(this,t,i,s),this}toOuterOf(t,i){return H.toOuterOf(this,t,i),this}toInnerOf(t,i){return H.toInnerOf(this,t,i),this}getFitMatrix(t,i){return H.getFitMatrix(this,t,i)}spread(t,i){return H.spread(this,t,i),this}shrink(t,i){return H.shrink(this,t,i),this}ceil(){return H.ceil(this),this}unsign(){return H.unsign(this),this}float(t){return H.float(this,t),this}add(t){return H.add(this,t),this}addList(t){return H.setList(this,t,!0),this}setList(t){return H.setList(this,t),this}addListWithFn(t,i){return H.setListWithFn(this,t,i,!0),this}setListWithFn(t,i){return H.setListWithFn(this,t,i),this}setPoint(t){return H.setPoint(this,t),this}setPoints(t){return H.setPoints(this,t),this}addPoint(t){return H.addPoint(this,t),this}getPoints(){return H.getPoints(this)}hitPoint(t,i){return H.hitPoint(this,t,i)}hitRadiusPoint(t,i){return H.hitRadiusPoint(this,t,i)}hit(t,i){return H.hit(this,t,i)}includes(t,i){return H.includes(this,t,i)}intersect(t,i){return H.intersect(this,t,i),this}getIntersect(t,i){return new wt(H.getIntersectData(this,t,i))}isSame(t){return H.isSame(this,t)}isEmpty(){return H.isEmpty(this)}reset(){H.reset(this)}}const ct=new wt;class bg{constructor(t,i,s,n,r,o){typeof t=="object"?this.copy(t):this.set(t,i,s,n,r,o)}set(t=0,i=0,s=0,n=0,r=0,o=0){this.top=t,this.right=i,this.bottom=s,this.left=n,this.width=r,this.height=o}copy(t){const{top:i,right:s,bottom:n,left:r,width:o,height:a}=t;this.set(i,s,n,r,o,a)}getBoundsFrom(t){const{top:i,right:s,bottom:n,left:r,width:o,height:a}=this;return new wt(r,i,o||t.width-r-s,a||t.height-i-n)}}var Ua;(function(e){e[e.top=0]="top",e[e.right=1]="right",e[e.bottom=2]="bottom",e[e.left=3]="left"})(Ua||(Ua={}));var Fs;(function(e){e[e.topLeft=0]="topLeft",e[e.top=1]="top",e[e.topRight=2]="topRight",e[e.right=3]="right",e[e.bottomRight=4]="bottomRight",e[e.bottom=5]="bottom",e[e.bottomLeft=6]="bottomLeft",e[e.left=7]="left",e[e.center=8]="center",e[e["top-left"]=0]="top-left",e[e["top-right"]=2]="top-right",e[e["bottom-right"]=4]="bottom-right",e[e["bottom-left"]=6]="bottom-left"})(Fs||(Fs={}));const Mh=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:1,y:.5},{x:1,y:1},{x:.5,y:1},{x:0,y:1},{x:0,y:.5},{x:.5,y:.5}];Mh.forEach(e=>e.type="percent");const mi={directionData:Mh,tempPoint:{},get:jl,toPoint(e,t,i,s,n){const r=jl(e);i.x=r.x,i.y=r.y,r.type==="percent"&&(i.x*=t.width,i.y*=t.height,n&&(i.x-=n.x,i.y-=n.y,r.x&&(i.x-=r.x===1?n.width:r.x===.5?r.x*n.width:0),r.y&&(i.y-=r.y===1?n.height:r.y===.5?r.y*n.height:0))),s||(i.x+=t.x,i.y+=t.y)}};function jl(e){return typeof e=="string"?Mh[Fs[e]]:e}const{toPoint:Eg}=mi,Cg={toPoint(e,t,i,s,n){Eg(e,i,s,n,t)}},Tg={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,".":1,e:1,E:1};class ht{constructor(t){this.repeatMap={},this.name=t}static get(t){return new ht(t)}static set filter(t){this.filterList=Vl(t)}static set exclude(t){this.excludeList=Vl(t)}log(...t){if(ji.enable){if(ji.filterList.length&&ji.filterList.every(i=>i!==this.name)||ji.excludeList.length&&ji.excludeList.some(i=>i===this.name))return;console.log("%c"+this.name,"color:#21ae62",...t)}}tip(...t){ji.enable&&this.warn(...t)}warn(...t){ji.showWarn&&console.warn(this.name,...t)}repeat(t,...i){this.repeatMap[t]||(this.warn("repeat:"+t,...i),this.repeatMap[t]=!0)}error(...t){try{throw new Error}catch(i){console.error(this.name,...t,i)}}}ht.filterList=[];ht.excludeList=[];ht.showWarn=!0;function Vl(e){return e?typeof e=="string"&&(e=[e]):e=[],e}const ji=ht,Rg=ht.get("RunTime"),ke={currentId:0,currentName:"",idMap:{},nameMap:{},nameToIdMap:{},start(e,t){const i=yi.create(yi.RUNTIME);return ve.currentId=ve.idMap[i]=t?performance.now():Date.now(),ve.currentName=ve.nameMap[i]=e,ve.nameToIdMap[e]=i,i},end(e,t){const i=ve.idMap[e],s=ve.nameMap[e],n=t?(performance.now()-i)/1e3:Date.now()-i;ve.idMap[e]=ve.nameMap[e]=ve.nameToIdMap[s]=void 0,Rg.log(s,n,"ms")},endOfName(e,t){const i=ve.nameToIdMap[e];i!==void 0&&ve.end(i,t)}},ve=ke;function Hs(e){console.error("need plugin: @leafer-in/"+e)}const Sg=ht.get("UICreator"),Qr={list:{},register(e){const{__tag:t}=e.prototype;ko[t]?Sg.repeat(t):ko[t]=e},get(e,t,i,s,n,r){const o=new ko[e](t);return i!==void 0&&(o.x=i,s&&(o.y=s),n&&(o.width=n),r&&(o.height=r)),o}},{list:ko}=Qr,Pg=ht.get("EventCreator"),zs={nameList:{},register(e){let t;Object.keys(e).forEach(i=>{t=e[i],typeof t=="string"&&(qs[t]?Pg.repeat(t):qs[t]=e)})},changeName(e,t){const i=qs[e];if(i){const s=Object.keys(i).find(n=>i[n]===e);s&&(i[s]=t,qs[t]=i)}},has(e){return!!this.nameList[e]},get(e,...t){return new qs[e](...t)}},{nameList:qs}=zs;class zd{constructor(){this.list=[]}add(t){t.manager=this,this.list.push(t)}get(t){let i;const{list:s}=this;for(let r=0,o=s.length;r<o;r++)if(i=s[r],i.recycled&&i.isSameSize(t))return i.recycled=!1,i.manager||(i.manager=this),i;const n=St.canvas(t);return this.add(n),n}recycle(t){t.recycled=!0}clearRecycled(){let t;const i=[];for(let s=0,n=this.list.length;s<n;s++)t=this.list[s],t.recycled?t.destroy():i.push(t);this.list=i}clear(){this.list.forEach(t=>{t.destroy()}),this.list.length=0}destroy(){this.clear()}}const Ot={default(e,t){return Mo(t,e),Mo(e,t),e},assign(e,t){let i;Object.keys(t).forEach(s=>{var n;i=t[s],(i==null?void 0:i.constructor)===Object&&((n=e[s])===null||n===void 0?void 0:n.constructor)===Object?Mo(e[s],t[s]):e[s]=t[s]})},copyAttrs(e,t,i){return i.forEach(s=>{t[s]!==void 0&&(e[s]=t[s])}),e},clone(e){return JSON.parse(JSON.stringify(e))},toMap(e){const t={};for(let i=0,s=e.length;i<s;i++)t[e[i]]=!0;return t}},{assign:Mo}=Ot;class Nd{get __useNaturalRatio(){return!0}get __isLinePath(){const{path:t}=this;return t&&t.length===6&&t[0]===1}get __blendMode(){if(this.eraser&&this.eraser!=="path")return"destination-out";const{blendMode:t}=this;return t==="pass-through"?null:t}constructor(t){this.__leaf=t}__get(t){if(this.__input){const i=this.__input[t];if(i!==void 0)return i}return this[t]}__getData(){const t={tag:this.__leaf.tag},{__input:i}=this;let s;for(let n in this)n[0]!=="_"&&(s=i?i[n]:void 0,t[n]=s===void 0?this[n]:s);return t}__setInput(t,i){this.__input||(this.__input={}),this.__input[t]=i}__getInput(t){if(this.__input){const i=this.__input[t];if(i!==void 0)return i}if(!(t==="path"&&!this.__pathInputed))return this["_"+t]}__removeInput(t){this.__input&&this.__input[t]!==void 0&&(this.__input[t]=void 0)}__getInputData(t,i){const s={};if(t)if(t instanceof Array)for(let n of t)s[n]=this.__getInput(n);else for(let n in t)s[n]=this.__getInput(n);else{let n,r,{__input:o}=this;s.tag=this.__leaf.tag;for(let a in this)if(a[0]!=="_"&&(n=this["_"+a],n!==void 0)){if(a==="path"&&!this.__pathInputed)continue;r=o?o[a]:void 0,s[a]=r===void 0?n:r}}if(i&&i.matrix){const{a:n,b:r,c:o,d:a,e:h,f:l}=this.__leaf.__localMatrix;s.matrix={a:n,b:r,c:o,d:a,e:h,f:l}}return s}__setMiddle(t,i){this.__middle||(this.__middle={}),this.__middle[t]=i}__getMiddle(t){return this.__middle&&this.__middle[t]}__checkSingle(){const t=this;if(t.blendMode==="pass-through"){const i=this.__leaf;t.opacity<1&&i.isBranch||i.__hasEraser||t.eraser?t.__single=!0:t.__single&&(t.__single=!1)}else t.__single=!0}__removeNaturalSize(){this.__naturalWidth=this.__naturalHeight=void 0}destroy(){this.__input=this.__middle=null}}var Hr;(function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.NoAndSkip=2]="NoAndSkip",e[e.YesAndSkip=3]="YesAndSkip"})(Hr||(Hr={}));function I(e,t,i,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function jd(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(c){try{l(s.next(c))}catch(u){o(u)}}function h(c){try{l(s.throw(c))}catch(u){o(u)}}function l(c){c.done?r(c.value):n(c.value).then(a,h)}l((s=s.apply(e,[])).next())})}function vt(e){return(t,i)=>{e||(e=i),Object.defineProperty(t,i,{get(){return this.context[e]},set(s){this.context[e]=s}})}}const Vd=[];function Q(){return(e,t)=>{Vd.push(t)}}const Lg=[];let W=class{set blendMode(t){t==="normal"&&(t="source-over"),this.context.globalCompositeOperation=t}get blendMode(){return this.context.globalCompositeOperation}set dashPattern(t){this.context.setLineDash(t||Lg)}get dashPattern(){return this.context.getLineDash()}__bindContext(){let t;Vd.forEach(i=>{t=this.context[i],t&&(this[i]=t.bind(this.context))}),this.textBaseline="alphabetic"}setTransform(t,i,s,n,r,o){}resetTransform(){}getTransform(){}save(){}restore(){}transform(t,i,s,n,r,o){typeof t=="object"?this.context.transform(t.a,t.b,t.c,t.d,t.e,t.f):this.context.transform(t,i,s,n,r,o)}translate(t,i){}scale(t,i){}rotate(t){}fill(t,i){}stroke(t){}clip(t,i){}fillRect(t,i,s,n){}strokeRect(t,i,s,n){}clearRect(t,i,s,n){}drawImage(t,i,s,n,r,o,a,h,l){switch(arguments.length){case 9:if(i<0){const c=-i/n*h;n+=i,i=0,o+=c,h-=c}if(s<0){const c=-s/r*l;r+=s,s=0,a+=c,l-=c}this.context.drawImage(t,i,s,n,r,o,a,h,l);break;case 5:this.context.drawImage(t,i,s,n,r);break;case 3:this.context.drawImage(t,i,s)}}beginPath(){}moveTo(t,i){}lineTo(t,i){}bezierCurveTo(t,i,s,n,r,o){}quadraticCurveTo(t,i,s,n){}closePath(){}arc(t,i,s,n,r,o){}arcTo(t,i,s,n,r){}ellipse(t,i,s,n,r,o,a,h){}rect(t,i,s,n){}roundRect(t,i,s,n,r){}createConicGradient(t,i,s){}createLinearGradient(t,i,s,n){}createPattern(t,i){}createRadialGradient(t,i,s,n,r,o){}fillText(t,i,s,n){}measureText(t){}strokeText(t,i,s,n){}destroy(){this.context=null}};I([vt("imageSmoothingEnabled")],W.prototype,"smooth",void 0);I([vt("imageSmoothingQuality")],W.prototype,"smoothLevel",void 0);I([vt("globalAlpha")],W.prototype,"opacity",void 0);I([vt()],W.prototype,"fillStyle",void 0);I([vt()],W.prototype,"strokeStyle",void 0);I([vt("lineWidth")],W.prototype,"strokeWidth",void 0);I([vt("lineCap")],W.prototype,"strokeCap",void 0);I([vt("lineJoin")],W.prototype,"strokeJoin",void 0);I([vt("lineDashOffset")],W.prototype,"dashOffset",void 0);I([vt()],W.prototype,"miterLimit",void 0);I([vt()],W.prototype,"shadowBlur",void 0);I([vt()],W.prototype,"shadowColor",void 0);I([vt()],W.prototype,"shadowOffsetX",void 0);I([vt()],W.prototype,"shadowOffsetY",void 0);I([vt()],W.prototype,"filter",void 0);I([vt()],W.prototype,"font",void 0);I([vt()],W.prototype,"fontKerning",void 0);I([vt()],W.prototype,"fontStretch",void 0);I([vt()],W.prototype,"fontVariantCaps",void 0);I([vt()],W.prototype,"textAlign",void 0);I([vt()],W.prototype,"textBaseline",void 0);I([vt()],W.prototype,"textRendering",void 0);I([vt()],W.prototype,"wordSpacing",void 0);I([vt()],W.prototype,"letterSpacing",void 0);I([vt()],W.prototype,"direction",void 0);I([Q()],W.prototype,"setTransform",null);I([Q()],W.prototype,"resetTransform",null);I([Q()],W.prototype,"getTransform",null);I([Q()],W.prototype,"save",null);I([Q()],W.prototype,"restore",null);I([Q()],W.prototype,"translate",null);I([Q()],W.prototype,"scale",null);I([Q()],W.prototype,"rotate",null);I([Q()],W.prototype,"fill",null);I([Q()],W.prototype,"stroke",null);I([Q()],W.prototype,"clip",null);I([Q()],W.prototype,"fillRect",null);I([Q()],W.prototype,"strokeRect",null);I([Q()],W.prototype,"clearRect",null);I([Q()],W.prototype,"beginPath",null);I([Q()],W.prototype,"moveTo",null);I([Q()],W.prototype,"lineTo",null);I([Q()],W.prototype,"bezierCurveTo",null);I([Q()],W.prototype,"quadraticCurveTo",null);I([Q()],W.prototype,"closePath",null);I([Q()],W.prototype,"arc",null);I([Q()],W.prototype,"arcTo",null);I([Q()],W.prototype,"ellipse",null);I([Q()],W.prototype,"rect",null);I([Q()],W.prototype,"roundRect",null);I([Q()],W.prototype,"createConicGradient",null);I([Q()],W.prototype,"createLinearGradient",null);I([Q()],W.prototype,"createPattern",null);I([Q()],W.prototype,"createRadialGradient",null);I([Q()],W.prototype,"fillText",null);I([Q()],W.prototype,"measureText",null);I([Q()],W.prototype,"strokeText",null);const{copy:Og}=U,Bg={width:1,height:1,pixelRatio:1},Ge=["width","height","pixelRatio"];class Ah extends W{get width(){return this.size.width}get height(){return this.size.height}get pixelRatio(){return this.size.pixelRatio}get pixelWidth(){return this.width*this.pixelRatio}get pixelHeight(){return this.height*this.pixelRatio}get allowBackgroundColor(){return this.view&&this.parentView}constructor(t,i){super(),this.size={},this.worldTransform={},t||(t=Bg),t.pixelRatio||(t.pixelRatio=D.devicePixelRatio),this.manager=i,this.innerId=yi.create(yi.CNAVAS);const{width:s,height:n,pixelRatio:r}=t;this.autoLayout=!s||!n,this.size.pixelRatio=r,this.config=t,this.init()}init(){}__createContext(){const{view:t}=this,{contextSettings:i}=this.config;this.context=i?t.getContext("2d",i):t.getContext("2d"),this.__bindContext()}export(t,i){}toBlob(t,i){}toDataURL(t,i){}saveAs(t,i){}resize(t){if(this.isSameSize(t))return;let i;this.context&&!this.unreal&&this.width&&(i=this.getSameCanvas(),i.copyWorld(this)),Ot.copyAttrs(this.size,t,Ge),this.size.pixelRatio||(this.size.pixelRatio=1),this.bounds=new wt(0,0,this.width,this.height),this.context&&!this.unreal&&(this.updateViewSize(),this.smooth=this.config.smooth),this.updateClientBounds(),this.context&&!this.unreal&&i&&(this.clearWorld(i.bounds),this.copyWorld(i),i.recycle())}updateViewSize(){}updateClientBounds(){}getClientBounds(t){return t&&this.updateClientBounds(),this.clientBounds||this.bounds}startAutoLayout(t,i){}stopAutoLayout(){}setCursor(t){}setWorld(t,i){const{pixelRatio:s}=this,n=this.worldTransform;if(i){const{a:r,b:o,c:a,d:h,e:l,f:c}=i;this.setTransform(n.a=(t.a*r+t.b*a)*s,n.b=(t.a*o+t.b*h)*s,n.c=(t.c*r+t.d*a)*s,n.d=(t.c*o+t.d*h)*s,n.e=(t.e*r+t.f*a+l)*s,n.f=(t.e*o+t.f*h+c)*s)}else this.setTransform(n.a=t.a*s,n.b=t.b*s,n.c=t.c*s,n.d=t.d*s,n.e=t.e*s,n.f=t.f*s)}useWorldTransform(t){t&&(this.worldTransform=t);const i=this.worldTransform;i&&this.setTransform(i.a,i.b,i.c,i.d,i.e,i.f)}setStroke(t,i,s){i&&(this.strokeWidth=i),t&&(this.strokeStyle=t),s&&this.setStrokeOptions(s)}setStrokeOptions(t){this.strokeCap=t.strokeCap==="none"?"butt":t.strokeCap,this.strokeJoin=t.strokeJoin,this.dashPattern=t.dashPattern,this.dashOffset=t.dashOffset,this.miterLimit=t.miterLimit}saveBlendMode(t){this.savedBlendMode=this.blendMode,this.blendMode=t}restoreBlendMode(){this.blendMode=this.savedBlendMode}hitFill(t,i){return!0}hitStroke(t,i){return!0}hitPixel(t,i,s=1){return!0}setWorldShadow(t,i,s,n){const{pixelRatio:r}=this;this.shadowOffsetX=t*r,this.shadowOffsetY=i*r,this.shadowBlur=s*r,this.shadowColor=n||"black"}setWorldBlur(t){const{pixelRatio:i}=this;this.filter=`blur(${t*i}px)`}copyWorld(t,i,s,n){if(n&&(this.blendMode=n),i){const{pixelRatio:r}=this;s||(s=i),this.drawImage(t.view,i.x*r,i.y*r,i.width*r,i.height*r,s.x*r,s.y*r,s.width*r,s.height*r)}else this.drawImage(t.view,0,0);n&&(this.blendMode="source-over")}copyWorldToInner(t,i,s,n){if(n&&(this.blendMode=n),i.b||i.c)this.save(),this.resetTransform(),this.copyWorld(t,i,H.tempToOuterOf(s,i)),this.restore();else{const{pixelRatio:r}=this;this.drawImage(t.view,i.x*r,i.y*r,i.width*r,i.height*r,s.x,s.y,s.width,s.height)}n&&(this.blendMode="source-over")}copyWorldByReset(t,i,s,n,r){this.resetTransform(),this.copyWorld(t,i,s,n),r||this.useWorldTransform()}useMask(t,i,s){this.copyWorld(t,i,s,"destination-in")}useEraser(t,i,s){this.copyWorld(t,i,s,"destination-out")}fillWorld(t,i,s){s&&(this.blendMode=s),this.fillStyle=i,ct.set(t).scale(this.pixelRatio),this.fillRect(ct.x,ct.y,ct.width,ct.height),s&&(this.blendMode="source-over")}strokeWorld(t,i,s){s&&(this.blendMode=s),this.strokeStyle=i,ct.set(t).scale(this.pixelRatio),this.strokeRect(ct.x,ct.y,ct.width,ct.height),s&&(this.blendMode="source-over")}clearWorld(t,i){ct.set(t).scale(this.pixelRatio),i&&ct.ceil(),this.clearRect(ct.x,ct.y,ct.width,ct.height)}clipWorld(t,i){this.beginPath(),ct.set(t).scale(this.pixelRatio),i&&ct.ceil(),this.rect(ct.x,ct.y,ct.width,ct.height),this.clip()}clear(){const{pixelRatio:t}=this;this.clearRect(0,0,this.width*t+2,this.height*t+2)}isSameSize(t){return this.width===t.width&&this.height===t.height&&this.pixelRatio===t.pixelRatio}getSameCanvas(t,i){const s=this.manager?this.manager.get(this.size):St.canvas(Object.assign({},this.size));return s.save(),t&&(Og(s.worldTransform,this.worldTransform),s.useWorldTransform()),i&&(s.smooth=this.smooth),s}recycle(t){this.recycled||(this.restore(),t?this.clearWorld(t,!0):this.clear(),this.manager?this.manager.recycle(this):this.destroy())}updateRender(t){}unrealCanvas(){}destroy(){this.manager=this.view=this.parentView=null}}const Ke={creator:{},parse(e,t){},convertToCanvasData(e,t){}},Ud={N:21,D:22,X:23,G:24,F:25,O:26,P:27,U:28},Te=Object.assign({M:1,m:10,L:2,l:20,H:3,h:30,V:4,v:40,C:5,c:50,S:6,s:60,Q:7,q:70,T:8,t:80,A:9,a:90,Z:11,z:11,R:12},Ud),Yd={M:3,m:3,L:3,l:3,H:2,h:2,V:2,v:2,C:7,c:7,S:5,s:5,Q:5,q:5,T:3,t:3,A:8,a:8,Z:1,z:1,N:5,D:9,X:6,G:9,F:5,O:7,P:4,U:6},Gd={m:10,l:20,H:3,h:30,V:4,v:40,c:50,S:6,s:60,q:70,T:8,t:80,A:9,a:90},kg=Object.assign(Object.assign({},Gd),Ud),zr=Te,Kd={};for(let e in zr)Kd[zr[e]]=e;const Xd={};for(let e in zr)Xd[zr[e]]=Yd[e];const Zd={drawRoundRect(e,t,i,s,n,r){const o=Wt.fourNumber(r,Math.min(s/2,n/2)),a=t+s,h=i+n;o[0]?e.moveTo(t+o[0],i):e.moveTo(t,i),o[1]?e.arcTo(a,i,a,h,o[1]):e.lineTo(a,i),o[2]?e.arcTo(a,h,t,h,o[2]):e.lineTo(a,h),o[3]?e.arcTo(t,h,t,i,o[3]):e.lineTo(t,h),o[0]?e.arcTo(t,i,a,i,o[0]):e.lineTo(t,i)}},{sin:ps,cos:Js,atan2:Ul,ceil:Mg,abs:Ao,PI:Yl,sqrt:Gl,pow:ar}=Math,{setPoint:Do,addPoint:hr}=zn,{set:lr,toNumberPoints:Ag}=j,{M:Kl,L:Io,C:Wo,Q:Xl,Z:Dg}=Te,$o={},ts={points(e,t,i,s){let n=Ag(t);if(e.push(Kl,n[0],n[1]),i&&n.length>5){let r,o,a,h,l,c,u,f,d,g,m,x,C,b=n.length;const P=i===!0?.5:i;s&&(n=[n[b-2],n[b-1],...n,n[0],n[1],n[2],n[3]],b=n.length);for(let v=2;v<b-2;v+=2)r=n[v-2],o=n[v-1],a=n[v],h=n[v+1],l=n[v+2],c=n[v+3],m=Gl(ar(a-r,2)+ar(h-o,2)),x=Gl(ar(l-a,2)+ar(c-h,2)),C=m+x,m=P*m/C,x=P*x/C,l-=r,c-=o,u=a-m*l,f=h-m*c,v===2?s||e.push(Xl,u,f,a,h):e.push(Wo,d,g,u,f,a,h),d=a+x*l,g=h+x*c;s||e.push(Xl,d,g,n[b-2],n[b-1])}else for(let r=2,o=n.length;r<o;r+=2)e.push(Io,n[r],n[r+1]);s&&e.push(Dg)},rect(e,t,i,s,n){Ke.creator.path=e,Ke.creator.moveTo(t,i).lineTo(t+s,i).lineTo(t+s,i+n).lineTo(t,i+n).lineTo(t,i)},roundRect(e,t,i,s,n,r){Ke.creator.path=[],Zd.drawRoundRect(Ke.creator,t,i,s,n,r),e.push(...Ke.convertToCanvasData(Ke.creator.path,!0))},arcTo(e,t,i,s,n,r,o,a,h,l,c){const u=s-t,f=n-i,d=r-s,g=o-n;let m=Ul(f,u),x=Ul(g,d),C=x-m;if(C<0&&(C+=Ee),C===Yl||Ao(u+f)<1e-12||Ao(d+g)<1e-12){e&&e.push(Io,s,n),h&&(Do(h,t,i),hr(h,s,n)),c&&lr(c,t,i),l&&lr(l,s,n);return}const b=u*g-d*f<0,P=b?-1:1,v=a/Js(C/2),A=s+v*Js(m+C/2+Ss*P),Y=n+v*ps(m+C/2+Ss*P);return m-=Ss*P,x-=Ss*P,Jl(e,A,Y,a,a,0,m/ut,x/ut,b,h,l,c)},arc(e,t,i,s,n,r,o,a,h,l){return Jl(e,t,i,s,s,0,n,r,o,a,h,l)},ellipse(e,t,i,s,n,r,o,a,h,l,c,u){const f=r*ut,d=ps(f),g=Js(f);let m=o*ut,x=a*ut;m>Yl&&(m-=Ee),x<0&&(x+=Ee);let C=x-m;C<0?C+=Ee:C>Ee&&(C-=Ee),h&&(C-=Ee);const b=Mg(Ao(C/Ss)),P=C/b,v=ps(P/4),A=8/3*v*v/ps(P/2);x=m+P;let Y=Js(m),G=ps(m),it,Et,st,q,dt,te,he,me,xt=st=g*s*Y-d*n*G,tt=q=d*s*Y+g*n*G,N=t+st,Ht=i+q;e&&e.push(e.length?Io:Kl,N,Ht),l&&Do(l,N,Ht),u&&lr(u,N,Ht);for(let ni=0;ni<b;ni++)it=Js(x),Et=ps(x),st=g*s*it-d*n*Et,q=d*s*it+g*n*Et,dt=t+xt-A*(g*s*G+d*n*Y),te=i+tt-A*(d*s*G-g*n*Y),he=t+st+A*(g*s*Et+d*n*it),me=i+q+A*(d*s*Et-g*n*it),e&&e.push(Wo,dt,te,he,me,t+st,i+q),l&&ql(t+xt,i+tt,dt,te,he,me,t+st,i+q,l,!0),xt=st,tt=q,Y=it,G=Et,m=x,x+=P;c&&lr(c,t+st,i+q)},quadraticCurveTo(e,t,i,s,n,r,o){e.push(Wo,(t+2*s)/3,(i+2*n)/3,(r+2*s)/3,(o+2*n)/3,r,o)},toTwoPointBoundsByQuadraticCurve(e,t,i,s,n,r,o,a){ql(e,t,(e+2*i)/3,(t+2*s)/3,(n+2*i)/3,(r+2*s)/3,n,r,o,a)},toTwoPointBounds(e,t,i,s,n,r,o,a,h,l){const c=[];let u,f,d,g,m,x,C,b,P=e,v=i,A=n,Y=o;for(let G=0;G<2;++G){if(G==1&&(P=t,v=s,A=r,Y=a),u=-3*P+9*v-9*A+3*Y,f=6*P-12*v+6*A,d=3*v-3*P,Math.abs(u)<1e-12){if(Math.abs(f)<1e-12)continue;g=-d/f,0<g&&g<1&&c.push(g);continue}C=f*f-4*d*u,b=Math.sqrt(C),!(C<0)&&(m=(-f+b)/(2*u),0<m&&m<1&&c.push(m),x=(-f-b)/(2*u),0<x&&x<1&&c.push(x))}l?hr(h,e,t):Do(h,e,t),hr(h,o,a);for(let G=0,it=c.length;G<it;G++)Zl(c[G],e,t,i,s,n,r,o,a,$o),hr(h,$o.x,$o.y)},getPointAndSet(e,t,i,s,n,r,o,a,h,l){const c=1-e,u=c*c*c,f=3*c*c*e,d=3*c*e*e,g=e*e*e;l.x=u*t+f*s+d*r+g*a,l.y=u*i+f*n+d*o+g*h},getPoint(e,t,i,s,n,r,o,a,h){const l={};return Zl(e,t,i,s,n,r,o,a,h,l),l}},{getPointAndSet:Zl,toTwoPointBounds:ql,ellipse:Jl}=ts,{sin:Ig,cos:Wg,sqrt:Ql,atan2:tc}=Math,{ellipse:$g}=ts,Fg={ellipticalArc(e,t,i,s,n,r,o,a,h,l,c){const u=(h-t)/2,f=(l-i)/2,d=r*ut,g=Ig(d),m=Wg(d),x=-m*u-g*f,C=-m*f+g*u,b=s*s,P=n*n,v=C*C,A=x*x,Y=b*P-b*v-P*A;let G=0;if(Y<0){const xt=Ql(1-Y/(b*P));s*=xt,n*=xt}else G=(o===a?-1:1)*Ql(Y/(b*v+P*A));const it=G*s*C/n,Et=-G*n*x/s,st=tc((C-Et)/n,(x-it)/s),q=tc((-C-Et)/n,(-x-it)/s);let dt=q-st;a===0&&dt>0?dt-=Ee:a===1&&dt<0&&(dt+=Ee);const te=t+u+m*it-g*Et,he=i+f+g*it+m*Et,me=dt<0?1:0;c||D.ellipseToCurve?$g(e,te,he,s,n,r,st/ut,q/ut,me):s===n&&!r?e.push(Te.O,te,he,s,st/ut,q/ut,me):e.push(Te.G,te,he,s,n,r,st/ut,q/ut,me)}},{M:Fo,m:Hg,L:Qs,l:zg,H:Ng,h:jg,V:Vg,v:Ug,C:gs,c:Yg,S:Ho,s:Gg,Q:ys,q:Kg,T:zo,t:Xg,A:Zg,a:qg,Z:No,z:Jg,N:Qg,D:ty,X:ey,G:iy,F:sy,O:ny,P:ry,U:oy}=Te,{rect:ay,roundRect:ec,arcTo:hy,arc:ic,ellipse:sc,quadraticCurveTo:nc}=ts,{ellipticalArc:ly}=Fg,cy=ht.get("PathConvert"),ai={},ss={current:{dot:0},stringify(e,t){let i=0,s=e.length,n,r="",o,a;for(;i<s;){o=e[i],n=Xd[o],o===a?r+=" ":r+=Kd[o];for(let h=1;h<n;h++)r+=Wt.float(e[i+h],t),h===n-1||(r+=" ");a=o,i+=n}return r},parse(e,t){let i,s,n,r="";const o=[],a=t?kg:Gd;for(let h=0,l=e.length;h<l;h++)s=e[h],Tg[s]?(s==="."&&(xe.dot&&(Vi(o,r),r=""),xe.dot++),r==="0"&&s!=="."&&(Vi(o,r),r=""),r+=s):Te[s]?(r&&(Vi(o,r),r=""),xe.name=Te[s],xe.length=Yd[s],xe.index=0,Vi(o,xe.name),!i&&a[s]&&(i=!0)):s==="-"||s==="+"?n==="e"||n==="E"?r+=s:(r&&Vi(o,r),r=s):r&&(Vi(o,r),r=""),n=s;return r&&Vi(o,r),i?ss.toCanvasData(o,t):o},toCanvasData(e,t){let i=0,s=0,n=0,r=0,o=0,a=e.length,h,l,c,u,f;const d=[];for(;o<a;){switch(c=e[o],c){case Hg:e[o+1]+=i,e[o+2]+=s;case Fo:i=e[o+1],s=e[o+2],d.push(Fo,i,s),o+=3;break;case jg:e[o+1]+=i;case Ng:i=e[o+1],d.push(Qs,i,s),o+=2;break;case Ug:e[o+1]+=s;case Vg:s=e[o+1],d.push(Qs,i,s),o+=2;break;case zg:e[o+1]+=i,e[o+2]+=s;case Qs:i=e[o+1],s=e[o+2],d.push(Qs,i,s),o+=3;break;case Gg:e[o+1]+=i,e[o+2]+=s,e[o+3]+=i,e[o+4]+=s,c=Ho;case Ho:f=u===gs||u===Ho,n=f?i*2-h:e[o+1],r=f?s*2-l:e[o+2],h=e[o+1],l=e[o+2],i=e[o+3],s=e[o+4],d.push(gs,n,r,h,l,i,s),o+=5;break;case Yg:e[o+1]+=i,e[o+2]+=s,e[o+3]+=i,e[o+4]+=s,e[o+5]+=i,e[o+6]+=s,c=gs;case gs:h=e[o+3],l=e[o+4],i=e[o+5],s=e[o+6],d.push(gs,e[o+1],e[o+2],h,l,i,s),o+=7;break;case Xg:e[o+1]+=i,e[o+2]+=s,c=zo;case zo:f=u===ys||u===zo,h=f?i*2-h:e[o+1],l=f?s*2-l:e[o+2],t?nc(d,i,s,h,l,e[o+1],e[o+2]):d.push(ys,h,l,e[o+1],e[o+2]),i=e[o+1],s=e[o+2],o+=3;break;case Kg:e[o+1]+=i,e[o+2]+=s,e[o+3]+=i,e[o+4]+=s,c=ys;case ys:h=e[o+1],l=e[o+2],t?nc(d,i,s,h,l,e[o+3],e[o+4]):d.push(ys,h,l,e[o+3],e[o+4]),i=e[o+3],s=e[o+4],o+=5;break;case qg:e[o+6]+=i,e[o+7]+=s;case Zg:ly(d,i,s,e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],e[o+6],e[o+7],t),i=e[o+6],s=e[o+7],o+=8;break;case Jg:case No:d.push(No),o++;break;case Qg:i=e[o+1],s=e[o+2],t?ay(d,i,s,e[o+3],e[o+4]):Ri(d,e,o,5),o+=5;break;case ty:i=e[o+1],s=e[o+2],t?ec(d,i,s,e[o+3],e[o+4],[e[o+5],e[o+6],e[o+7],e[o+8]]):Ri(d,e,o,9),o+=9;break;case ey:i=e[o+1],s=e[o+2],t?ec(d,i,s,e[o+3],e[o+4],e[o+5]):Ri(d,e,o,6),o+=6;break;case iy:sc(t?d:Ri(d,e,o,9),e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],e[o+6],e[o+7],e[o+8],null,ai),i=ai.x,s=ai.y,o+=9;break;case sy:t?sc(d,e[o+1],e[o+2],e[o+3],e[o+4],0,0,360,!1):Ri(d,e,o,5),i=e[o+1]+e[o+3],s=e[o+2],o+=5;break;case ny:ic(t?d:Ri(d,e,o,7),e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],e[o+6],null,ai),i=ai.x,s=ai.y,o+=7;break;case ry:t?ic(d,e[o+1],e[o+2],e[o+3],0,360,!1):Ri(d,e,o,4),i=e[o+1]+e[o+3],s=e[o+2],o+=4;break;case oy:hy(t?d:Ri(d,e,o,6),i,s,e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],null,ai),i=ai.x,s=ai.y,o+=6;break;default:return cy.error(`command: ${c} [index:${o}]`,e),d}u=c}return d},objectToCanvasData(e){const t=[];return e.forEach(i=>{switch(i.name){case"M":t.push(Fo,i.x,i.y);break;case"L":t.push(Qs,i.x,i.y);break;case"C":t.push(gs,i.x1,i.y1,i.x2,i.y2,i.x,i.y);break;case"Q":t.push(ys,i.x1,i.y1,i.x,i.y);break;case"Z":t.push(No)}}),t},copyData(e,t,i,s){for(let n=i,r=i+s;n<r;n++)e.push(t[n])},pushData(e,t){xe.index===xe.length&&(xe.index=1,e.push(xe.name)),e.push(Number(t)),xe.index++,xe.dot=0}},{current:xe,pushData:Vi,copyData:Ri}=ss,{M:jo,L:uy,C:dy,Q:fy,Z:_y,N:rc,D:py,X:gy,G:yy,F:my,O:wy,P:vy,U:oc}=Te,{getMinDistanceFrom:xy,getRadianFrom:by}=j,{tan:Ey,min:Cy,abs:Ty}=Math,ms={},ls={beginPath(e){e.length=0},moveTo(e,t,i){e.push(jo,t,i)},lineTo(e,t,i){e.push(uy,t,i)},bezierCurveTo(e,t,i,s,n,r,o){e.push(dy,t,i,s,n,r,o)},quadraticCurveTo(e,t,i,s,n){e.push(fy,t,i,s,n)},closePath(e){e.push(_y)},rect(e,t,i,s,n){e.push(rc,t,i,s,n)},roundRect(e,t,i,s,n,r){if(typeof r=="number")e.push(gy,t,i,s,n,r);else{const o=Wt.fourNumber(r);o?e.push(py,t,i,s,n,...o):e.push(rc,t,i,s,n)}},ellipse(e,t,i,s,n,r,o,a,h){r===void 0?e.push(my,t,i,s,n):(o===void 0&&(o=0),a===void 0&&(a=360),e.push(yy,t,i,s,n,r,o,a,h?1:0))},arc(e,t,i,s,n,r,o){n===void 0?e.push(vy,t,i,s):(r===void 0&&(r=360),e.push(wy,t,i,s,n,r,o?1:0))},arcTo(e,t,i,s,n,r,o,a){if(o!==void 0){const h=Ey(by(o,a,t,i,s,n)/2)*(xy(o,a,t,i,s,n)/2);e.push(oc,t,i,s,n,Cy(r,Ty(h)))}else e.push(oc,t,i,s,n,r)},drawEllipse(e,t,i,s,n,r,o,a,h){ts.ellipse(null,t,i,s,n,r===void 0?0:r,o===void 0?0:o,a===void 0?360:a,h,null,null,ms),e.push(jo,ms.x,ms.y),Ry(e,t,i,s,n,r,o,a,h)},drawArc(e,t,i,s,n,r,o){ts.arc(null,t,i,s,n===void 0?0:n,r===void 0?360:r,o,null,null,ms),e.push(jo,ms.x,ms.y),Sy(e,t,i,s,n,r,o)},drawPoints(e,t,i,s){ts.points(e,t,i,s)}},{ellipse:Ry,arc:Sy}=ls,{moveTo:Py,lineTo:Ly,quadraticCurveTo:Oy,bezierCurveTo:By,closePath:ky,beginPath:My,rect:Ay,roundRect:Dy,ellipse:Iy,arc:Wy,arcTo:$y,drawEllipse:Fy,drawArc:Hy,drawPoints:zy}=ls;class Dh{set path(t){this.__path=t}get path(){return this.__path}constructor(t){this.set(t)}set(t){return t?this.__path=typeof t=="string"?Ke.parse(t):t:this.__path=[],this}beginPath(){return My(this.__path),this.paint(),this}moveTo(t,i){return Py(this.__path,t,i),this.paint(),this}lineTo(t,i){return Ly(this.__path,t,i),this.paint(),this}bezierCurveTo(t,i,s,n,r,o){return By(this.__path,t,i,s,n,r,o),this.paint(),this}quadraticCurveTo(t,i,s,n){return Oy(this.__path,t,i,s,n),this.paint(),this}closePath(){return ky(this.__path),this.paint(),this}rect(t,i,s,n){return Ay(this.__path,t,i,s,n),this.paint(),this}roundRect(t,i,s,n,r){return Dy(this.__path,t,i,s,n,r),this.paint(),this}ellipse(t,i,s,n,r,o,a,h){return Iy(this.__path,t,i,s,n,r,o,a,h),this.paint(),this}arc(t,i,s,n,r,o){return Wy(this.__path,t,i,s,n,r,o),this.paint(),this}arcTo(t,i,s,n,r){return $y(this.__path,t,i,s,n,r),this.paint(),this}drawEllipse(t,i,s,n,r,o,a,h){return Fy(this.__path,t,i,s,n,r,o,a,h),this.paint(),this}drawArc(t,i,s,n,r,o){return Hy(this.__path,t,i,s,n,r,o),this.paint(),this}drawPoints(t,i,s){return zy(this.__path,t,i,s),this.paint(),this}clearPath(){return this.beginPath()}paint(){}}const{M:Ny,L:jy,C:Vy,Q:Uy,Z:Yy,N:Gy,D:Ky,X:Xy,G:Zy,F:qy,O:Jy,P:Qy,U:tm}=Te,em=ht.get("PathDrawer"),im={drawPathByData(e,t){if(!t)return;let i,s=0,n=t.length;for(;s<n;)switch(i=t[s],i){case Ny:e.moveTo(t[s+1],t[s+2]),s+=3;break;case jy:e.lineTo(t[s+1],t[s+2]),s+=3;break;case Vy:e.bezierCurveTo(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5],t[s+6]),s+=7;break;case Uy:e.quadraticCurveTo(t[s+1],t[s+2],t[s+3],t[s+4]),s+=5;break;case Yy:e.closePath(),s+=1;break;case Gy:e.rect(t[s+1],t[s+2],t[s+3],t[s+4]),s+=5;break;case Ky:e.roundRect(t[s+1],t[s+2],t[s+3],t[s+4],[t[s+5],t[s+6],t[s+7],t[s+8]]),s+=9;break;case Xy:e.roundRect(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]),s+=6;break;case Zy:e.ellipse(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]*ut,t[s+6]*ut,t[s+7]*ut,t[s+8]),s+=9;break;case qy:e.ellipse(t[s+1],t[s+2],t[s+3],t[s+4],0,0,Ee,!1),s+=5;break;case Jy:e.arc(t[s+1],t[s+2],t[s+3],t[s+4]*ut,t[s+5]*ut,t[s+6]),s+=7;break;case Qy:e.arc(t[s+1],t[s+2],t[s+3],0,Ee,!1),s+=4;break;case tm:e.arcTo(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]),s+=6;break;default:em.error(`command: ${i} [index:${s}]`,t);return}}},{M:sm,L:nm,C:ac,Q:hc,Z:lc,N:rm,D:cc,X:om,G:am,F:hm,O:lm,P:cm,U:um}=Te,{toTwoPointBounds:dm,toTwoPointBoundsByQuadraticCurve:fm,arcTo:_m,arc:pm,ellipse:gm}=ts,{addPointBounds:tn,copy:Vo,addPoint:ym,setPoint:Uo,addBounds:cr,toBounds:mm}=zn,wm=ht.get("PathBounds");let ws,ur,Yo;const de={},uc={},hi={},Ih={toBounds(e,t){Ih.toTwoPointBounds(e,uc),mm(uc,t)},toTwoPointBounds(e,t){if(!e||!e.length)return Uo(t,0,0);let i=0,s=0,n=0,r,o,a,h,l;const c=e.length;for(;i<c;)switch(l=e[i],i===0&&(l===lc||l===ac||l===hc?Uo(t,s,n):Uo(t,e[i+1],e[i+2])),l){case sm:case nm:s=e[i+1],n=e[i+2],ym(t,s,n),i+=3;break;case ac:a=e[i+5],h=e[i+6],dm(s,n,e[i+1],e[i+2],e[i+3],e[i+4],a,h,de),tn(t,de),s=a,n=h,i+=7;break;case hc:r=e[i+1],o=e[i+2],a=e[i+3],h=e[i+4],fm(s,n,r,o,a,h,de),tn(t,de),s=a,n=h,i+=5;break;case lc:i+=1;break;case rm:s=e[i+1],n=e[i+2],cr(t,s,n,e[i+3],e[i+4]),i+=5;break;case cc:case om:s=e[i+1],n=e[i+2],cr(t,s,n,e[i+3],e[i+4]),i+=l===cc?9:6;break;case am:gm(null,e[i+1],e[i+2],e[i+3],e[i+4],e[i+5],e[i+6],e[i+7],e[i+8],de,hi),i===0?Vo(t,de):tn(t,de),s=hi.x,n=hi.y,i+=9;break;case hm:s=e[i+1],n=e[i+2],ur=e[i+3],Yo=e[i+4],cr(t,s-ur,n-Yo,ur*2,Yo*2),s+=ur,i+=5;break;case lm:pm(null,e[i+1],e[i+2],e[i+3],e[i+4],e[i+5],e[i+6],de,hi),i===0?Vo(t,de):tn(t,de),s=hi.x,n=hi.y,i+=7;break;case cm:s=e[i+1],n=e[i+2],ws=e[i+3],cr(t,s-ws,n-ws,ws*2,ws*2),s+=ws,i+=4;break;case um:_m(null,s,n,e[i+1],e[i+2],e[i+3],e[i+4],e[i+5],de,hi),i===0?Vo(t,de):tn(t,de),s=hi.x,n=hi.y,i+=6;break;default:wm.error(`command: ${l} [index:${i}]`,e);return}}},{M:Go,L:dr,C:dc,Z:fr}=Te,{getCenterX:vm,getCenterY:xm}=j,{arcTo:Ko}=ls,bm={smooth(e,t,i){let s,n=0,r=0,o=0,a=0,h=0,l=0,c=0,u=0,f=0;const d=e.length,g=[];for(;n<d;)switch(s=e[n],s){case Go:a=u=e[n+1],h=f=e[n+2],n+=3,e[n]===dr?(l=e[n+1],c=e[n+2],g.push(Go,vm(a,l),xm(h,c))):g.push(Go,a,h);break;case dr:switch(r=e[n+1],o=e[n+2],n+=3,e[n]){case dr:Ko(g,r,o,e[n+1],e[n+2],t,u,f);break;case fr:Ko(g,r,o,a,h,t,u,f);break;default:g.push(dr,r,o)}u=r,f=o;break;case dc:g.push(dc,e[n+1],e[n+2],e[n+3],e[n+4],e[n+5],e[n+6]),n+=7;break;case fr:Ko(g,a,h,l,c,t,u,f),g.push(fr),n+=1;break}return s!==fr&&(g[1]=a,g[2]=h),g}};Ke.creator=new Dh;Ke.parse=ss.parse;Ke.convertToCanvasData=ss.toCanvasData;const en=new Dh,{drawRoundRect:Em}=Zd;function Cm(e){e&&!e.roundRect&&(e.roundRect=function(t,i,s,n,r){Em(this,t,i,s,n,r)})}function qd(e){Cm(e)}const gi={opacityTypes:["png","webp","svg"],upperCaseTypeMap:{},mineType(e){return!e||e.startsWith("image")?e:(e==="jpg"&&(e="jpeg"),"image/"+e)},fileType(e){const t=e.split(".");return t[t.length-1]},isOpaqueImage(e){const t=Ya.fileType(e);return["jpg","jpeg"].some(i=>i===t)},getExportOptions(e){switch(typeof e){case"object":return e;case"number":return{quality:e};case"boolean":return{blob:e};default:return{}}}},Ya=gi;Ya.opacityTypes.forEach(e=>Ya.upperCaseTypeMap[e]=e.toUpperCase());const Tm=ht.get("TaskProcessor");class Rm{constructor(t){this.parallel=!0,this.time=1,this.id=yi.create(yi.TASK),this.task=t}run(){return jd(this,void 0,void 0,function*(){try{this.task&&!this.isComplete&&this.parent.running&&(yield this.task())}catch(t){Tm.error(t)}})}complete(){this.isComplete=!0,this.parent=null,this.task=null}cancel(){this.isCancel=!0,this.complete()}}class Ga{get total(){return this.list.length+this.delayNumber}get finishedIndex(){return this.isComplete?0:this.index+this.parallelSuccessNumber}get remain(){return this.isComplete?this.total:this.total-this.finishedIndex}get percent(){const{total:t}=this;let i=0,s=0;for(let n=0;n<t;n++)n<=this.finishedIndex?(s+=this.list[n].time,n===this.finishedIndex&&(i=s)):i+=this.list[n].time;return this.isComplete?1:s/i}constructor(t){this.config={parallel:6},this.list=[],this.running=!1,this.isComplete=!0,this.index=0,this.delayNumber=0,t&&Ot.assign(this.config,t),this.empty()}add(t,i){let s,n,r,o;const a=new Rm(t);return a.parent=this,typeof i=="number"?o=i:i&&(n=i.parallel,s=i.start,r=i.time,o=i.delay),r&&(a.time=r),n===!1&&(a.parallel=!1),o===void 0?this.push(a,s):(this.delayNumber++,setTimeout(()=>{this.delayNumber&&(this.delayNumber--,this.push(a,s))},o)),this.isComplete=!1,a}push(t,i){this.list.push(t),i!==!1&&!this.timer&&(this.timer=setTimeout(()=>this.start()))}empty(){this.index=0,this.parallelSuccessNumber=0,this.list=[],this.parallelList=[],this.delayNumber=0}start(){this.running||(this.running=!0,this.isComplete=!1,this.run())}pause(){clearTimeout(this.timer),this.timer=null,this.running=!1}resume(){this.start()}skip(){this.index++,this.resume()}stop(){this.isComplete=!0,this.list.forEach(t=>{t.isComplete||t.cancel()}),this.pause(),this.empty()}run(){this.running&&(this.setParallelList(),this.parallelList.length>1?this.runParallelTasks():this.remain?this.runTask():this.onComplete())}runTask(){const t=this.list[this.index];if(!t){this.nextTask();return}t.run().then(()=>{this.onTask(t),this.index++,this.nextTask()}).catch(i=>{this.onError(i)})}runParallelTasks(){this.parallelList.forEach(t=>this.runParallelTask(t))}runParallelTask(t){t.run().then(()=>{this.onTask(t),this.fillParallelTask()}).catch(i=>{this.onParallelError(i)})}nextTask(){this.total===this.finishedIndex?this.onComplete():this.timer=setTimeout(()=>this.run())}setParallelList(){let t;this.parallelList=[],this.parallelSuccessNumber=0;let i=this.index+this.config.parallel;i>this.list.length&&(i=this.list.length);for(let s=this.index;s<i&&(t=this.list[s],t.parallel);s++)this.parallelList.push(t)}fillParallelTask(){let t;const i=this.parallelList;this.parallelSuccessNumber++,i.pop();const s=i.length,n=this.finishedIndex+s;if(i.length){if(!this.running)return;n<this.total&&(t=this.list[n],t&&t.parallel&&(i.push(t),this.runParallelTask(t)))}else this.index+=this.parallelSuccessNumber,this.parallelSuccessNumber=0,this.nextTask()}onComplete(){this.stop(),this.config.onComplete&&this.config.onComplete()}onTask(t){t.complete(),this.config.onTask&&this.config.onTask()}onParallelError(t){this.parallelList.forEach(i=>{i.parallel=!1}),this.parallelList.length=0,this.parallelSuccessNumber=0,this.onError(t)}onError(t){this.pause(),this.config.onError&&this.config.onError(t)}destroy(){this.stop()}}const oe={map:{},recycledList:[],tasker:new Ga,patternTasker:new Ga,get isComplete(){return li.tasker.isComplete},get(e){let t=li.map[e.url];return t||(t=St.image(e),li.map[e.url]=t),t.use++,t},recycle(e){e.use--,setTimeout(()=>{e.use||li.recycledList.push(e)})},clearRecycled(){const e=li.recycledList;e.length>100&&(e.forEach(t=>{!t.use&&t.url&&(delete li.map[t.url],t.destroy())}),e.length=0)},hasOpacityPixel(e){return gi.opacityTypes.some(t=>li.isFormat(t,e))},isFormat(e,t){if(t.format===e)return!0;const{url:i}=t;if(i.startsWith("data:")){if(i.startsWith("data:"+gi.mineType(e)))return!0}else{if(i.includes("."+e)||i.includes("."+gi.upperCaseTypeMap[e]))return!0;if(e==="png"&&!i.includes("."))return!0}return!1},destroy(){li.map={},li.recycledList=[]}},li=oe,{IMAGE:Sm,create:Pm}=yi;class Jd{get url(){return this.config.url}get completed(){return this.ready||!!this.error}constructor(t){this.use=0,this.waitComplete=[],this.innerId=Pm(Sm),this.config=t||{url:""},this.isSVG=oe.isFormat("svg",t),this.hasOpacityPixel=oe.hasOpacityPixel(t)}load(t,i){return this.loading||(this.loading=!0,oe.tasker.add(()=>jd(this,void 0,void 0,function*(){return yield D.origin.loadImage(this.url).then(s=>{this.ready=!0,this.width=s.naturalWidth||s.width,this.height=s.naturalHeight||s.height,this.view=s,this.onComplete(!0)}).catch(s=>{this.error=s,this.onComplete(!1)})}))),this.waitComplete.push(t,i),this.waitComplete.length-2}unload(t,i){const s=this.waitComplete;if(i){const n=s[t+1];n&&n({type:"stop"})}s[t]=s[t+1]=void 0}onComplete(t){let i;this.waitComplete.forEach((s,n)=>{i=n%2,s&&(t?i||s(this):i&&s(this.error))}),this.waitComplete.length=0,this.loading=!1}getCanvas(t,i,s,n){if(t||(t=this.width),i||(i=this.height),this.cache){let{params:a,data:h}=this.cache;for(let l in a)if(a[l]!==arguments[l]){h=null;break}if(h)return h}const r=D.origin.createCanvas(t,i),o=r.getContext("2d");return s&&(o.globalAlpha=s),o.drawImage(this.view,0,0,t,i),this.cache=this.use>1?{data:r,params:arguments}:null,r}getPattern(t,i,s,n){const r=D.canvas.createPattern(t,i);try{s&&r.setTransform&&(r.setTransform(s),s=null)}catch{}return n&&(n.transform=s),r}destroy(){this.config={url:""},this.cache=null,this.waitComplete.length=0}}function ye(e,t,i,s){i.configurable=i.enumerable=!0,Object.defineProperty(e,t,i)}function Qd(e,t){return Object.getOwnPropertyDescriptor(e,t)}function Lm(e){return Object.getOwnPropertyNames(e)}function kt(e,t){return(i,s)=>Om(i,s,e,t&&t(s))}function Om(e,t,i,s){ye(e,t,Object.assign({get(){return this.__getAttr(t)},set(r){this.__setAttr(t,r)}},s||{})),nf(e,t,i)}function $e(e){return kt(e)}function Us(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.matrixChanged||this.__layout.matrixChange())}}))}function tf(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.matrixChanged||this.__layout.matrixChange(),this.__hasAutoLayout=!!(this.origin||this.around||this.flow),this.__local||this.__layout.createLocal())}}))}function ef(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.scaleChanged||this.__layout.scaleChange())}}))}function Wh(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.rotationChanged||this.__layout.rotationChange())}}))}function mt(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&Nn(this)}}))}function Bm(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(Nn(this),this.__.__removeNaturalSize())}}))}function Nn(e){e.__layout.boxChanged||e.__layout.boxChange(),e.__hasAutoLayout&&(e.__layout.matrixChanged||e.__layout.matrixChange())}function km(e){return kt(e,t=>({set(i){const s=this.__;s.__pathInputed!==2&&(s.__pathInputed=i?1:0),i||(s.__pathForRender=void 0),this.__setAttr(t,i),Nn(this)}}))}const Qt=mt;function to(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&Mm(this)}}))}function Mm(e){e.__layout.strokeChanged||e.__layout.strokeChange(),e.__.__useArrow&&Nn(e)}const ii=to;function sf(e){return kt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.renderChanged||this.__layout.renderChange()}}))}function jn(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange())}}))}function Am(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.opacityChanged||this.__layout.opacityChange())}}))}function Dm(e){return kt(e,t=>({set(i){const s=this.visible;if(s===!0&&i===0){if(this.animationOut)return this.__runAnimation("out",()=>fc(this,t,i,s))}else s===0&&i===!0&&this.animation&&this.__runAnimation("in");fc(this,t,i,s)}}))}function fc(e,t,i,s){e.__setAttr(t,i)&&(e.__layout.opacityChanged||e.__layout.opacityChange(),(s===0||i===0)&&Nn(e))}function Im(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange(),this.waitParent(()=>{this.parent.__layout.childrenSortChange()}))}}))}function Wm(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.boxChanged||this.__layout.boxChange(),this.waitParent(()=>{this.parent.__updateMask(i)}))}}))}function $m(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&this.waitParent(()=>{this.parent.__updateEraser(i)})}}))}function cs(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.hitCanvasChanged=!0,ht.showHitView&&(this.__layout.surfaceChanged||this.__layout.surfaceChange()),this.leafer&&this.leafer.updateCursor())}}))}function Fm(e){return kt(e,t=>({set(i){this.__setAttr(t,i),this.leafer&&this.leafer.updateCursor()}}))}function Vt(e){return(t,i)=>{ye(t,"__DataProcessor",{get(){return e}})}}function Hm(e){return"set"+e.charAt(0).toUpperCase()+e.slice(1)}function nf(e,t,i){const s=e.__DataProcessor.prototype,n="_"+t,r=Hm(t),o={get(){const l=this[n];return l===void 0?i:l},set(l){this[n]=l}};if(i===void 0)o.get=function(){return this[n]};else if(typeof i=="object"){const{clone:l}=Ot;o.get=function(){let c=this[n];return c===void 0&&(this[n]=c=l(i)),c}}t==="width"?o.get=function(){const l=this[n];if(l===void 0){const c=this;return c._height&&c.__naturalWidth&&c.__useNaturalRatio?c._height*c.__naturalWidth/c.__naturalHeight:c.__naturalWidth||i}else return l}:t==="height"&&(o.get=function(){const l=this[n];if(l===void 0){const c=this;return c._width&&c.__naturalHeight&&c.__useNaturalRatio?c._width*c.__naturalHeight/c.__naturalWidth:c.__naturalHeight||i}else return l});let a,h=s;for(;!a&&h;)a=Qd(h,t),h=h.__proto__;a&&a.set&&(o.set=a.set),s[r]&&(o.set=s[r],delete s[r]),ye(s,t,o)}const zm=new ht("rewrite"),Sr=[],Nm=["destroy","constructor"];function Fe(e){return(t,i)=>{Sr.push({name:t.constructor.name+"."+i,run:()=>{t[i]=e}})}}function eo(){return e=>{rf()}}function rf(e){Sr.length&&(Sr.forEach(t=>{e&&zm.error(t.name,"需在Class上装饰@rewriteAble()"),t.run()}),Sr.length=0)}setTimeout(()=>rf(!0));function Be(e,t){return i=>{(e.prototype?Lm(e.prototype):Object.keys(e)).forEach(n=>{!Nm.includes(n)&&(!t||!t.includes(n))&&(e.prototype?Qd(e.prototype,n).writable&&(i.prototype[n]=e.prototype[n]):i.prototype[n]=e[n])})}}function Ut(){return e=>{Qr.register(e)}}function $i(){return e=>{zs.register(e)}}const{copy:vs,toInnerPoint:jm,toOuterPoint:Vm,scaleOfOuter:_c,rotateOfOuter:Um,skewOfOuter:Ym,multiplyParent:pc,divideParent:gc,getLayout:Gm}=U,Ct={},ae={updateAllMatrix(e,t,i){if(t&&e.__hasAutoLayout&&e.__layout.matrixChanged&&(i=!0),Xm(e,t,i),e.isBranch){const{children:s}=e;for(let n=0,r=s.length;n<r;n++)Km(s[n],t,i)}},updateMatrix(e,t,i){const s=e.__layout;t?i&&(s.waitAutoLayout=!0,e.__hasAutoLayout&&(s.matrixChanged=!1)):s.waitAutoLayout&&(s.waitAutoLayout=!1),s.matrixChanged&&e.__updateLocalMatrix(),s.waitAutoLayout||e.__updateWorldMatrix()},updateBounds(e){const t=e.__layout;t.boundsChanged&&e.__updateLocalBounds(),t.waitAutoLayout||e.__updateWorldBounds()},updateAllWorldOpacity(e){if(e.__updateWorldOpacity(),e.isBranch){const{children:t}=e;for(let i=0,s=t.length;i<s;i++)yc(t[i])}},updateAllChange(e){if(yc(e),e.__updateChange(),e.isBranch){const{children:t}=e;for(let i=0,s=t.length;i<s;i++)Zm(t[i])}},worldHittable(e){for(;e;){if(!e.__.hittable)return!1;e=e.parent}return!0},moveWorld(e,t,i=0,s){const n=typeof t=="object"?Object.assign({},t):{x:t,y:i};s?Vm(e.localTransform,n,n,!0):e.parent&&jm(e.parent.worldTransform,n,n,!0),Kt.moveLocal(e,n.x,n.y)},moveLocal(e,t,i=0){typeof t=="object"?(e.x+=t.x,e.y+=t.y):(e.x+=t,e.y+=i)},zoomOfWorld(e,t,i,s,n){Kt.zoomOfLocal(e,Xo(e,t),i,s,n)},zoomOfLocal(e,t,i,s=i,n){vs(Ct,e.__localMatrix),_c(Ct,t,i,s),e.origin||e.around?Kt.setTransform(e,Ct,n):(mc(e,Ct),e.scaleResize(i,s,n!==!0))},rotateOfWorld(e,t,i){Kt.rotateOfLocal(e,Xo(e,t),i)},rotateOfLocal(e,t,i){vs(Ct,e.__localMatrix),Um(Ct,t,i),e.origin||e.around?Kt.setTransform(e,Ct):(mc(e,Ct),e.rotation=Wt.formatRotation(e.rotation+i))},skewOfWorld(e,t,i,s,n){Kt.skewOfLocal(e,Xo(e,t),i,s,n)},skewOfLocal(e,t,i,s=0,n){vs(Ct,e.__localMatrix),Ym(Ct,t,i,s),Kt.setTransform(e,Ct,n)},transformWorld(e,t,i){vs(Ct,e.worldTransform),pc(Ct,t),e.parent&&gc(Ct,e.parent.worldTransform),Kt.setTransform(e,Ct,i)},transform(e,t,i){vs(Ct,e.localTransform),pc(Ct,t),Kt.setTransform(e,Ct,i)},setTransform(e,t,i){const s=Gm(t,e.origin&&Kt.getInnerOrigin(e,e.origin),e.around&&Kt.getInnerOrigin(e,e.around));if(i){const n=s.scaleX/e.scaleX,r=s.scaleY/e.scaleY;delete s.scaleX,delete s.scaleY,e.set(s),e.scaleResize(n,r,i!==!0)}else e.set(s)},getFlipTransform(e,t){const i=Fr(),s=t==="x"?1:-1;return _c(i,Kt.getLocalOrigin(e,"center"),-1*s,1*s),i},getLocalOrigin(e,t){return j.tempToOuterOf(Kt.getInnerOrigin(e,t),e.localTransform)},getInnerOrigin(e,t){const i={};return mi.toPoint(t,e.boxBounds,i),i},getRelativeWorld(e,t,i){return vs(Ct,e.worldTransform),gc(Ct,t.worldTransform),i?Ct:Object.assign({},Ct)},drop(e,t,i,s){e.setTransform(Kt.getRelativeWorld(e,t,!0),s),t.add(e,i)},hasParent(e,t){if(!t)return!1;for(;e;){if(t===e)return!0;e=e.parent}}},Kt=ae,{updateAllMatrix:Km,updateMatrix:Xm,updateAllWorldOpacity:yc,updateAllChange:Zm}=Kt;function mc(e,t){const{e:i,f:s}=e.__localMatrix;e.x+=t.e-i,e.y+=t.f-s}function Xo(e,t){return e.__layout.update(),e.parent?j.tempToInnerOf(t,e.parent.__world):t}const io={worldBounds(e){return e.__world},localBoxBounds(e){return e.__.eraser||e.__.visible===0?null:e.__local||e.__layout},localStrokeBounds(e){return e.__.eraser||e.__.visible===0?null:e.__layout.localStrokeBounds},localRenderBounds(e){return e.__.eraser||e.__.visible===0?null:e.__layout.localRenderBounds},maskLocalBoxBounds(e){return e.__.mask?e.__localBoxBounds:null},maskLocalStrokeBounds(e){return e.__.mask?e.__layout.localStrokeBounds:null},maskLocalRenderBounds(e){return e.__.mask?e.__layout.localRenderBounds:null},excludeRenderBounds(e,t){return!!(t.bounds&&!t.bounds.hit(e.__world,t.matrix)||t.hideBounds&&t.hideBounds.includes(e.__world,t.matrix))}},{updateBounds:wc}=ae,Vn={sort(e,t){return e.__.zIndex===t.__.zIndex?e.__tempNumber-t.__tempNumber:e.__.zIndex-t.__.zIndex},pushAllChildBranch(e,t){if(e.__tempNumber=1,e.__.__childBranchNumber){const{children:i}=e;for(let s=0,n=i.length;s<n;s++)e=i[s],e.isBranch&&(e.__tempNumber=1,t.add(e),qm(e,t))}},pushAllParent(e,t){const{keys:i}=t;if(i)for(;e.parent&&i[e.parent.innerId]===void 0;)t.add(e.parent),e=e.parent;else for(;e.parent;)t.add(e.parent),e=e.parent},pushAllBranchStack(e,t){let i=t.length;const{children:s}=e;for(let n=0,r=s.length;n<r;n++)s[n].isBranch&&t.push(s[n]);for(let n=i,r=t.length;n<r;n++)vc(t[n],t)},updateBounds(e,t){const i=[e];vc(e,i),Jm(i,t)},updateBoundsByBranchStack(e,t){let i,s;for(let n=e.length-1;n>-1;n--){i=e[n],s=i.children;for(let r=0,o=s.length;r<o;r++)wc(s[r]);t&&t===i||wc(i)}}},{pushAllChildBranch:qm,pushAllBranchStack:vc,updateBoundsByBranchStack:Jm}=Vn,sn={run(e){if(e&&e.length){const t=e.length;for(let i=0;i<t;i++)e[i]();e.length===t?e.length=0:e.splice(0,t)}}},{getRelativeWorld:xc}=ae,{toOuterOf:_r,getPoints:Qm,copy:t0}=H,Zo="_localContentBounds",qo="_worldContentBounds",Jo="_worldBoxBounds",Qo="_worldStrokeBounds";class e0{get contentBounds(){return this._contentBounds||this.boxBounds}set contentBounds(t){this._contentBounds=t}get strokeBounds(){return this._strokeBounds||this.boxBounds}get renderBounds(){return this._renderBounds||this.boxBounds}get localContentBounds(){return _r(this.contentBounds,this.leaf.__localMatrix,this[Zo]||(this[Zo]={})),this[Zo]}get localStrokeBounds(){return this._localStrokeBounds||this}get localRenderBounds(){return this._localRenderBounds||this}get worldContentBounds(){return _r(this.contentBounds,this.leaf.__world,this[qo]||(this[qo]={})),this[qo]}get worldBoxBounds(){return _r(this.boxBounds,this.leaf.__world,this[Jo]||(this[Jo]={})),this[Jo]}get worldStrokeBounds(){return _r(this.strokeBounds,this.leaf.__world,this[Qo]||(this[Qo]={})),this[Qo]}get a(){return 1}get b(){return 0}get c(){return 0}get d(){return 1}get e(){return this.leaf.__.x}get f(){return this.leaf.__.y}get x(){return this.e+this.boxBounds.x}get y(){return this.f+this.boxBounds.y}get width(){return this.boxBounds.width}get height(){return this.boxBounds.height}constructor(t){this.leaf=t,this.boxBounds={x:0,y:0,width:0,height:0},this.leaf.__local&&(this._localRenderBounds=this._localStrokeBounds=this.leaf.__local),this.boxChange(),this.matrixChange()}createLocal(){const t=this.leaf.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0};this._localStrokeBounds||(this._localStrokeBounds=t),this._localRenderBounds||(this._localRenderBounds=t)}update(){const{leafer:t}=this.leaf;if(t)t.ready?t.watcher.changed&&t.layouter.layout():t.start();else{let i=this.leaf;for(;i.parent&&!i.parent.leafer;)i=i.parent;D.layout(i)}}getTransform(t="world"){this.update();const{leaf:i}=this;switch(t){case"world":return i.__world;case"local":return i.__localMatrix;case"inner":return U.defaultMatrix;case"page":t=i.zoomLayer;default:return xc(i,t)}}getBounds(t,i="world"){switch(this.update(),i){case"world":return this.getWorldBounds(t);case"local":return this.getLocalBounds(t);case"inner":return this.getInnerBounds(t);case"page":i=this.leaf.zoomLayer;default:return new wt(this.getInnerBounds(t)).toOuterOf(this.getTransform(i))}}getInnerBounds(t="box"){switch(t){case"render":return this.renderBounds;case"content":if(this.contentBounds)return this.contentBounds;case"box":return this.boxBounds;case"stroke":return this.strokeBounds}}getLocalBounds(t="box"){switch(t){case"render":return this.localRenderBounds;case"stroke":return this.localStrokeBounds;case"content":if(this.contentBounds)return this.localContentBounds;case"box":return this.leaf.__localBoxBounds}}getWorldBounds(t="box"){switch(t){case"render":return this.leaf.__world;case"stroke":return this.worldStrokeBounds;case"content":if(this.contentBounds)return this.worldContentBounds;case"box":return this.worldBoxBounds}}getLayoutBounds(t,i="world",s){const{leaf:n}=this;let r,o,a,h=this.getInnerBounds(t);switch(i){case"world":r=n.getWorldPoint(h),o=n.__world;break;case"local":const{scaleX:l,scaleY:c,rotation:u,skewX:f,skewY:d}=n.__;a={scaleX:l,scaleY:c,rotation:u,skewX:f,skewY:d},r=n.getLocalPointByInner(h);break;case"inner":r=h,o=U.defaultMatrix;break;case"page":i=n.zoomLayer;default:r=n.getWorldPoint(h,i),o=xc(n,i,!0)}if(a||(a=U.getLayout(o)),t0(a,h),j.copy(a,r),s){const{scaleX:l,scaleY:c}=a,u=Math.abs(l),f=Math.abs(c);(u!==1||f!==1)&&(a.scaleX/=u,a.scaleY/=f,a.width*=u,a.height*=f)}return a}getLayoutPoints(t,i="world"){const{leaf:s}=this,n=Qm(this.getInnerBounds(t));let r;switch(i){case"world":r=null;break;case"local":r=s.parent;break;case"inner":break;case"page":i=s.zoomLayer;default:r=i}return r!==void 0&&n.forEach(o=>s.innerToWorld(o,null,!1,r)),n}shrinkContent(){const{x:t,y:i,width:s,height:n}=this.boxBounds;this._contentBounds={x:t,y:i,width:s,height:n}}spreadStroke(){const{x:t,y:i,width:s,height:n}=this.strokeBounds;this._strokeBounds={x:t,y:i,width:s,height:n},this._localStrokeBounds={x:t,y:i,width:s,height:n},this.renderSpread||this.spreadRenderCancel()}spreadRender(){const{x:t,y:i,width:s,height:n}=this.renderBounds;this._renderBounds={x:t,y:i,width:s,height:n},this._localRenderBounds={x:t,y:i,width:s,height:n}}shrinkContentCancel(){this._contentBounds=void 0}spreadStrokeCancel(){const t=this.renderBounds===this.strokeBounds;this._strokeBounds=this.boxBounds,this._localStrokeBounds=this.leaf.__localBoxBounds,t&&this.spreadRenderCancel()}spreadRenderCancel(){this._renderBounds=this._strokeBounds,this._localRenderBounds=this._localStrokeBounds}boxChange(){this.boxChanged=!0,this.localBoxChanged||this.localBoxChange(),this.hitCanvasChanged=!0}localBoxChange(){this.localBoxChanged=!0,this.boundsChanged=!0}strokeChange(){this.strokeChanged=!0,this.strokeSpread||(this.strokeSpread=1),this.boundsChanged=!0,this.hitCanvasChanged=!0}renderChange(){this.renderChanged=!0,this.renderSpread||(this.renderSpread=1),this.boundsChanged=!0}scaleChange(){this.scaleChanged=!0,this._scaleOrRotationChange()}rotationChange(){this.rotationChanged=!0,this.affectRotation=!0,this._scaleOrRotationChange()}_scaleOrRotationChange(){this.affectScaleOrRotation=!0,this.matrixChange(),this.leaf.__local||this.createLocal()}matrixChange(){this.matrixChanged=!0,this.localBoxChanged||this.localBoxChange()}surfaceChange(){this.surfaceChanged=!0}opacityChange(){this.opacityChanged=!0,this.surfaceChanged||this.surfaceChange()}childrenSortChange(){this.childrenSortChanged||(this.childrenSortChanged=!0,this.leaf.forceUpdate("surface"))}destroy(){}}class si{constructor(t,i){this.bubbles=!1,this.type=t,i&&(this.target=i)}stopDefault(){this.isStopDefault=!0,this.origin&&D.event.stopDefault(this.origin)}stopNow(){this.isStopNow=!0,this.isStop=!0,this.origin&&D.event.stopNow(this.origin)}stop(){this.isStop=!0,this.origin&&D.event.stop(this.origin)}}class Pt extends si{constructor(t,i,s){super(t,i),this.parent=s,this.child=i}}Pt.ADD="child.add";Pt.REMOVE="child.remove";Pt.CREATED="created";Pt.MOUNTED="mounted";Pt.UNMOUNTED="unmounted";Pt.DESTROY="destroy";class Ze extends si{constructor(t,i,s,n,r){super(t,i),this.attrName=s,this.oldValue=n,this.newValue=r}}Ze.CHANGE="property.change";Ze.LEAFER_CHANGE="property.leafer_change";class Qe extends si{constructor(t,i){super(t),Object.assign(this,i)}}Qe.LOAD="image.load";Qe.LOADED="image.loaded";Qe.ERROR="image.error";class wi extends si{get bigger(){if(!this.old)return!0;const{width:t,height:i}=this.old;return this.width>=t&&this.height>=i}get smaller(){return!this.bigger}get samePixelRatio(){return this.old?this.pixelRatio===this.old.pixelRatio:!0}constructor(t,i){typeof t=="object"?(super(wi.RESIZE),Object.assign(this,t)):super(t),this.old=i}}wi.RESIZE="resize";class ki extends si{constructor(t,i){super(t),this.data=i}}ki.REQUEST="watch.request";ki.DATA="watch.data";class ot extends si{constructor(t,i,s){super(t),i&&(this.data=i,this.times=s)}}ot.CHECK_UPDATE="layout.check_update";ot.REQUEST="layout.request";ot.START="layout.start";ot.BEFORE="layout.before";ot.LAYOUT="layout";ot.AFTER="layout.after";ot.AGAIN="layout.again";ot.END="layout.end";class at extends si{constructor(t,i,s,n){super(t),i&&(this.times=i),s&&(this.renderBounds=s,this.renderOptions=n)}}at.REQUEST="render.request";at.CHILD_START="render.child_start";at.START="render.start";at.BEFORE="render.before";at.RENDER="render";at.AFTER="render.after";at.AGAIN="render.again";at.END="render.end";at.NEXT="render.next";class Rt extends si{}Rt.START="leafer.start";Rt.BEFORE_READY="leafer.before_ready";Rt.READY="leafer.ready";Rt.AFTER_READY="leafer.after_ready";Rt.VIEW_READY="leafer.view_ready";Rt.VIEW_COMPLETED="leafer.view_completed";Rt.STOP="leafer.stop";Rt.RESTART="leafer.restart";Rt.END="leafer.end";const bc={};class i0{set event(t){this.on(t)}on(t,i,s){if(!i){let c,u=t;for(let f in u)c=u[f],c instanceof Array?this.on(f,c[0],c[1]):this.on(f,c);return}let n,r;s&&(s==="once"?r=!0:typeof s=="boolean"?n=s:(n=s.capture,r=s.once));let o;const a=ta(this,n,!0),h=typeof t=="string"?t.split(" "):t,l=r?{listener:i,once:r}:{listener:i};h.forEach(c=>{c&&(o=a[c],o?o.findIndex(u=>u.listener===i)===-1&&o.push(l):a[c]=[l])})}off(t,i,s){if(t){const n=typeof t=="string"?t.split(" "):t;if(i){let r;s&&(r=typeof s=="boolean"?s:s==="once"?!1:s.capture);let o,a;const h=ta(this,r);n.forEach(l=>{l&&(o=h[l],o&&(a=o.findIndex(c=>c.listener===i),a>-1&&o.splice(a,1),o.length||delete h[l]))})}else{const{__bubbleMap:r,__captureMap:o}=this;n.forEach(a=>{r&&delete r[a],o&&delete o[a]})}}else this.__bubbleMap=this.__captureMap=void 0}on_(t,i,s,n){return s&&(i=i.bind(s)),this.on(t,i,n),{type:t,current:this,listener:i,options:n}}off_(t){if(!t)return;const i=t instanceof Array?t:[t];i.forEach(s=>s.current.off(s.type,s.listener,s.options)),i.length=0}once(t,i,s){this.on(t,i,{once:!0,capture:s})}emit(t,i,s){!i&&zs.has(t)&&(i=zs.get(t,{type:t,target:this,current:this}));const r=ta(this,s)[t];if(r){let o;for(let a=0,h=r.length;a<h&&(o=r[a],o.listener(i),o.once&&(this.off(t,o.listener,s),a--,h--),!(i&&i.isStopNow));a++);}this.syncEventer&&this.syncEventer.emitEvent(i,s)}emitEvent(t,i){t.current=this,this.emit(t.type,t,i)}hasEvent(t,i){if(this.syncEventer&&this.syncEventer.hasEvent(t,i))return!0;const{__bubbleMap:s,__captureMap:n}=this,r=s&&s[t],o=n&&n[t];return!!(i===void 0?r||o:i?o:r)}destroy(){this.__captureMap=this.__bubbleMap=this.syncEventer=null}}function ta(e,t,i){if(t){const{__captureMap:s}=e;return s||(i?e.__captureMap={}:bc)}else{const{__bubbleMap:s}=e;return s||(i?e.__bubbleMap={}:bc)}}const{on:s0,on_:n0,off:r0,off_:o0,once:a0,emit:h0,emitEvent:l0,hasEvent:c0,destroy:u0}=i0.prototype,d0={on:s0,on_:n0,off:r0,off_:o0,once:a0,emit:h0,emitEvent:l0,hasEvent:c0,destroyEventer:u0},{isFinite:f0}=Number,_0=ht.get("setAttr"),p0={__setAttr(e,t,i){if(this.leaferIsCreated){const s=this.__.__getInput(e);if(i&&!f0(t)&&t!==void 0&&(_0.warn(this.innerName,e,t),t=void 0),typeof t=="object"||s!==t){this.__realSetAttr(e,t);const{CHANGE:n}=Ze,r=new Ze(n,this,e,s,t);return this.isLeafer?this.emitEvent(new Ze(Ze.LEAFER_CHANGE,this,e,s,t)):this.hasEvent(n)&&this.emitEvent(r),this.leafer.emitEvent(r),!0}else return!1}else return this.__realSetAttr(e,t),!0},__realSetAttr(e,t){const i=this.__;i[e]=t,this.__proxyData&&this.setProxyAttr(e,t),i.normalStyle&&(this.lockNormalStyle||i.normalStyle[e]===void 0||(i.normalStyle[e]=t))},__getAttr(e){return this.__proxyData?this.getProxyAttr(e):this.__.__get(e)}},{setLayout:g0,multiplyParent:y0,translateInner:m0,defaultWorld:w0}=U,{toPoint:v0,tempPoint:ea}=mi,x0={__updateWorldMatrix(){y0(this.__local||this.__layout,this.parent?this.parent.__world:w0,this.__world,!!this.__layout.affectScaleOrRotation,this.__,this.parent&&this.parent.__)},__updateLocalMatrix(){if(this.__local){const e=this.__layout,t=this.__local,i=this.__;e.affectScaleOrRotation&&(e.scaleChanged||e.rotationChanged)&&(g0(t,i,null,null,e.affectRotation),e.scaleChanged=e.rotationChanged=!1),t.e=i.x+i.offsetX,t.f=i.y+i.offsetY,(i.around||i.origin)&&(v0(i.around||i.origin,e.boxBounds,ea),m0(t,-ea.x,-ea.y,!i.around))}this.__layout.matrixChanged=!1}},{updateMatrix:b0,updateAllMatrix:Ec}=ae,{updateBounds:Cc}=Vn,{toOuterOf:pr,copyAndSpread:Tc,copy:E0}=H,{toBounds:C0}=Ih,T0={__updateWorldBounds(){pr(this.__layout.renderBounds,this.__world,this.__world),this.__layout.resized&&(this.__onUpdateSize(),this.__layout.resized=!1)},__updateLocalBounds(){const e=this.__layout;e.boxChanged&&(this.__.__pathInputed||this.__updatePath(),this.__updateRenderPath(),this.__updateBoxBounds(),e.resized=!0),e.localBoxChanged&&(this.__local&&this.__updateLocalBoxBounds(),e.localBoxChanged=!1,e.strokeSpread&&(e.strokeChanged=!0),e.renderSpread&&(e.renderChanged=!0),this.parent&&this.parent.__layout.boxChange()),e.boxChanged=!1,e.strokeChanged&&(e.strokeSpread=this.__updateStrokeSpread(),e.strokeSpread?(e.strokeBounds===e.boxBounds&&e.spreadStroke(),this.__updateStrokeBounds(),this.__updateLocalStrokeBounds()):e.spreadStrokeCancel(),e.strokeChanged=!1,(e.renderSpread||e.strokeSpread!==e.strokeBoxSpread)&&(e.renderChanged=!0),this.parent&&this.parent.__layout.strokeChange(),e.resized=!0),e.renderChanged&&(e.renderSpread=this.__updateRenderSpread(),e.renderSpread?((e.renderBounds===e.boxBounds||e.renderBounds===e.strokeBounds)&&e.spreadRender(),this.__updateRenderBounds(),this.__updateLocalRenderBounds()):e.spreadRenderCancel(),e.renderChanged=!1,this.parent&&this.parent.__layout.renderChange()),e.boundsChanged=!1},__updateLocalBoxBounds(){this.__hasMotionPath&&this.__updateMotionPath(),this.__hasAutoLayout&&this.__updateAutoLayout(),pr(this.__layout.boxBounds,this.__local,this.__local)},__updateLocalStrokeBounds(){pr(this.__layout.strokeBounds,this.__localMatrix,this.__layout.localStrokeBounds)},__updateLocalRenderBounds(){pr(this.__layout.renderBounds,this.__localMatrix,this.__layout.localRenderBounds)},__updateBoxBounds(){const e=this.__layout.boxBounds,t=this.__;t.__pathInputed?C0(t.path,e):(e.x=0,e.y=0,e.width=t.width,e.height=t.height)},__updateAutoLayout(){this.__layout.matrixChanged=!0,this.isBranch?(this.leaferIsReady&&this.leafer.layouter.addExtra(this),this.__.flow?(this.__layout.boxChanged&&this.__updateFlowLayout(),Ec(this),Cc(this,this),this.__.__autoSide&&this.__updateBoxBounds(!0)):(Ec(this),Cc(this,this))):b0(this)},__updateNaturalSize(){const{__:e,__layout:t}=this;e.__naturalWidth=t.boxBounds.width,e.__naturalHeight=t.boxBounds.height},__updateStrokeBounds(){const e=this.__layout;Tc(e.strokeBounds,e.boxBounds,e.strokeBoxSpread)},__updateRenderBounds(){const e=this.__layout;e.renderSpread>0?Tc(e.renderBounds,e.boxBounds,e.renderSpread):E0(e.renderBounds,e.strokeBounds)}},R0={__render(e,t){if(this.__worldOpacity)if(e.setWorld(this.__nowWorld=this.__getNowWorld(t)),e.opacity=this.__.opacity,this.__.__single){if(this.__.eraser==="path")return this.__renderEraser(e,t);const i=e.getSameCanvas(!0,!0);this.__draw(i,t),this.__worldFlipped?e.copyWorldByReset(i,this.__nowWorld,null,this.__.__blendMode,!0):e.copyWorldToInner(i,this.__nowWorld,this.__layout.renderBounds,this.__.__blendMode),i.recycle(this.__nowWorld)}else this.__draw(e,t)},__clip(e,t){this.__worldOpacity&&(e.setWorld(this.__nowWorld=this.__getNowWorld(t)),this.__drawRenderPath(e),this.windingRule?e.clip(this.windingRule):e.clip())},__updateWorldOpacity(){this.__worldOpacity=this.__.visible?this.parent?this.parent.__worldOpacity*this.__.opacity:this.__.opacity:0,this.__layout.opacityChanged&&(this.__layout.opacityChanged=!1)}},{excludeRenderBounds:Rc}=io,S0={__updateChange(){const{__layout:e}=this;e.childrenSortChanged&&(this.__updateSortChildren(),e.childrenSortChanged=!1),this.__.__checkSingle()},__render(e,t){if(this.__worldOpacity)if(this.__.__single){if(this.__.eraser==="path")return this.__renderEraser(e,t);const i=e.getSameCanvas(!1,!0);this.__renderBranch(i,t);const s=this.__getNowWorld(t);e.opacity=this.__.opacity,e.copyWorldByReset(i,s,s,this.__.__blendMode,!0),i.recycle(s)}else this.__renderBranch(e,t)},__renderBranch(e,t){if(this.__hasMask)this.__renderMask(e,t);else{const{children:i}=this;for(let s=0,n=i.length;s<n;s++)Rc(i[s],t)||i[s].__render(e,t)}},__clip(e,t){if(this.__worldOpacity){const{children:i}=this;for(let s=0,n=i.length;s<n;s++)Rc(i[s],t)||i[s].__clip(e,t)}}},{LEAF:P0,create:L0}=yi,{toInnerPoint:O0,toOuterPoint:B0,multiplyParent:k0}=U,{toOuterOf:Sc}=H,{copy:Pc,move:Lc}=j,{moveLocal:M0,zoomOfLocal:A0,rotateOfLocal:D0,skewOfLocal:I0,moveWorld:Oc,zoomOfWorld:W0,rotateOfWorld:$0,skewOfWorld:F0,transform:Bc,transformWorld:H0,setTransform:z0,getFlipTransform:N0,getLocalOrigin:ia,getRelativeWorld:j0,drop:V0}=ae;let ns=class{get tag(){return this.__tag}set tag(t){}get __tag(){return"Leaf"}get innerName(){return this.__.name||this.tag+this.innerId}get __DataProcessor(){return Nd}get __LayoutProcessor(){return e0}get leaferIsCreated(){return this.leafer&&this.leafer.created}get leaferIsReady(){return this.leafer&&this.leafer.ready}get isLeafer(){return!1}get isBranch(){return!1}get isBranchLeaf(){return!1}get __localMatrix(){return this.__local||this.__layout}get __localBoxBounds(){return this.__local||this.__layout}get worldTransform(){return this.__layout.getTransform("world")}get localTransform(){return this.__layout.getTransform("local")}get boxBounds(){return this.getBounds("box","inner")}get renderBounds(){return this.getBounds("render","inner")}get worldBoxBounds(){return this.getBounds("box")}get worldStrokeBounds(){return this.getBounds("stroke")}get worldRenderBounds(){return this.getBounds("render")}get worldOpacity(){return this.__layout.update(),this.__worldOpacity}get __worldFlipped(){return this.__world.scaleX<0||this.__world.scaleY<0}get __onlyHitMask(){return this.__hasMask&&!this.__.hitChildren}get __ignoreHitWorld(){return(this.__hasMask||this.__hasEraser)&&this.__.hitChildren}get __inLazyBounds(){const{leafer:t}=this;return t&&t.created&&t.lazyBounds.hit(this.__world)}get pathInputed(){return this.__.__pathInputed}set event(t){this.on(t)}constructor(t){this.innerId=L0(P0),this.reset(t),this.__bubbleMap&&this.__emitLifeEvent(Pt.CREATED)}reset(t){this.leafer&&this.leafer.forceRender(this.__world),this.__world={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0,scaleX:1,scaleY:1},t!==null&&(this.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0}),this.__worldOpacity=1,this.__=new this.__DataProcessor(this),this.__layout=new this.__LayoutProcessor(this),this.__level&&this.resetCustom(),t&&(t.__&&(t=t.toJSON()),t.children?this.set(t):Object.assign(this,t))}resetCustom(){this.__hasMask=this.__hasEraser=null,this.forceUpdate()}waitParent(t,i){i&&(t=t.bind(i)),this.parent?t():this.on(Pt.ADD,t,"once")}waitLeafer(t,i){i&&(t=t.bind(i)),this.leafer?t():this.on(Pt.MOUNTED,t,"once")}nextRender(t,i,s){this.leafer?this.leafer.nextRender(t,i,s):this.waitLeafer(()=>this.leafer.nextRender(t,i,s))}removeNextRender(t){this.nextRender(t,null,"off")}__bindLeafer(t){if(this.isLeafer&&t!==null&&(t=this),this.leafer&&!t&&this.leafer.leafs--,this.leafer=t,t?(t.leafs++,this.__level=this.parent?this.parent.__level+1:1,this.animation&&this.__runAnimation("in"),this.__bubbleMap&&this.__emitLifeEvent(Pt.MOUNTED)):this.__emitLifeEvent(Pt.UNMOUNTED),this.isBranch){const{children:i}=this;for(let s=0,n=i.length;s<n;s++)i[s].__bindLeafer(t)}}set(t,i){}get(t){}setAttr(t,i){this[t]=i}getAttr(t){return this[t]}getComputedAttr(t){return this.__[t]}toJSON(t){return t&&this.__layout.update(),this.__.__getInputData(null,t)}toString(t){return JSON.stringify(this.toJSON(t))}toSVG(){}__SVG(t){}toHTML(){}__setAttr(t,i){return!0}__getAttr(t){}setProxyAttr(t,i){}getProxyAttr(t){}find(t,i){}findTag(t){}findOne(t,i){}findId(t){}focus(t){}updateState(){}updateLayout(){this.__layout.update()}forceUpdate(t){t===void 0?t="width":t==="surface"&&(t="blendMode");const i=this.__.__getInput(t);this.__[t]=i===void 0?null:void 0,this[t]=i}forceRender(t){this.forceUpdate("surface")}__updateWorldMatrix(){}__updateLocalMatrix(){}__updateWorldBounds(){}__updateLocalBounds(){}__updateLocalBoxBounds(){}__updateLocalStrokeBounds(){}__updateLocalRenderBounds(){}__updateBoxBounds(){}__updateContentBounds(){}__updateStrokeBounds(){}__updateRenderBounds(){}__updateAutoLayout(){}__updateFlowLayout(){}__updateNaturalSize(){}__updateStrokeSpread(){return 0}__updateRenderSpread(){return 0}__onUpdateSize(){}__updateEraser(t){this.__hasEraser=t?!0:this.children.some(i=>i.__.eraser)}__renderEraser(t,i){t.save(),this.__clip(t,i);const{renderBounds:s}=this.__layout;t.clearRect(s.x,s.y,s.width,s.height),t.restore()}__updateMask(t){this.__hasMask=t?!0:this.children.some(i=>i.__.mask)}__renderMask(t,i){}__getNowWorld(t){if(t.matrix){this.__cameraWorld||(this.__cameraWorld={});const i=this.__cameraWorld;return k0(this.__world,t.matrix,i,void 0,this.__world),Sc(this.__layout.renderBounds,i,i),i}else return this.__world}getTransform(t){return this.__layout.getTransform(t||"local")}getBounds(t,i){return this.__layout.getBounds(t,i)}getLayoutBounds(t,i,s){return this.__layout.getLayoutBounds(t,i,s)}getLayoutPoints(t,i){return this.__layout.getLayoutPoints(t,i)}getWorldBounds(t,i,s){const n=i?j0(this,i):this.worldTransform,r=s?t:{};return Sc(t,n,r),r}worldToLocal(t,i,s,n){this.parent?this.parent.worldToInner(t,i,s,n):i&&Pc(i,t)}localToWorld(t,i,s,n){this.parent?this.parent.innerToWorld(t,i,s,n):i&&Pc(i,t)}worldToInner(t,i,s,n){n&&(n.innerToWorld(t,i,s),t=i||t),O0(this.worldTransform,t,i,s)}innerToWorld(t,i,s,n){B0(this.worldTransform,t,i,s),n&&n.worldToInner(i||t,null,s)}getBoxPoint(t,i,s,n){return this.getBoxPointByInner(this.getInnerPoint(t,i,s,n),null,null,!0)}getBoxPointByInner(t,i,s,n){const r=n?t:Object.assign({},t),{x:o,y:a}=this.boxBounds;return Lc(r,-o,-a),r}getInnerPoint(t,i,s,n){const r=n?t:{};return this.worldToInner(t,r,s,i),r}getInnerPointByBox(t,i,s,n){const r=n?t:Object.assign({},t),{x:o,y:a}=this.boxBounds;return Lc(r,o,a),r}getInnerPointByLocal(t,i,s,n){return this.getInnerPoint(t,this.parent,s,n)}getLocalPoint(t,i,s,n){const r=n?t:{};return this.worldToLocal(t,r,s,i),r}getLocalPointByInner(t,i,s,n){return this.getWorldPoint(t,this.parent,s,n)}getPagePoint(t,i,s,n){return(this.leafer?this.leafer.zoomLayer:this).getInnerPoint(t,i,s,n)}getWorldPoint(t,i,s,n){const r=n?t:{};return this.innerToWorld(t,r,s,i),r}getWorldPointByBox(t,i,s,n){return this.getWorldPoint(this.getInnerPointByBox(t,null,null,n),i,s,!0)}getWorldPointByLocal(t,i,s,n){const r=n?t:{};return this.localToWorld(t,r,s,i),r}getWorldPointByPage(t,i,s,n){return(this.leafer?this.leafer.zoomLayer:this).getWorldPoint(t,i,s,n)}setTransform(t,i){z0(this,t,i)}transform(t,i){Bc(this,t,i)}move(t,i){M0(this,t,i)}moveInner(t,i){Oc(this,t,i,!0)}scaleOf(t,i,s,n){A0(this,ia(this,t),i,s,n)}rotateOf(t,i){D0(this,ia(this,t),i)}skewOf(t,i,s,n){I0(this,ia(this,t),i,s,n)}transformWorld(t,i){H0(this,t,i)}moveWorld(t,i){Oc(this,t,i)}scaleOfWorld(t,i,s,n){W0(this,t,i,s,n)}rotateOfWorld(t,i){$0(this,t,i)}skewOfWorld(t,i,s,n){F0(this,t,i,s,n)}flip(t){Bc(this,N0(this,t))}scaleResize(t,i=t,s){this.scaleX*=t,this.scaleY*=i}__scaleResize(t,i){}resizeWidth(t){}resizeHeight(t){}__hitWorld(t){return!0}__hit(t){return!0}__hitFill(t){return!0}__hitStroke(t,i){return!0}__hitPixel(t){return!0}__drawHitPath(t){}__updateHitCanvas(){}__render(t,i){}__drawFast(t,i){}__draw(t,i){}__clip(t,i){}__renderShape(t,i,s,n){}__updateWorldOpacity(){}__updateChange(){}__drawPath(t){}__drawRenderPath(t){}__updatePath(){}__updateRenderPath(){}getMotionPathData(){return Hs("path")}getMotionPoint(t){return Hs("path")}getMotionTotal(){return 0}__updateMotionPath(){}__runAnimation(t,i){}__updateSortChildren(){}add(t,i){}remove(t,i){this.parent&&this.parent.remove(this,i)}dropTo(t,i,s){V0(this,t,i,s)}on(t,i,s){}off(t,i,s){}on_(t,i,s,n){}off_(t){}once(t,i,s){}emit(t,i,s){}emitEvent(t,i){}hasEvent(t,i){return!1}static changeAttr(t,i,s){s?this.addAttr(t,i,s):nf(this.prototype,t,i)}static addAttr(t,i,s){s||(s=mt),s(i)(this.prototype,t)}__emitLifeEvent(t){this.hasEvent(t)&&this.emitEvent(new Pt(t,this,this.parent))}destroy(){this.destroyed||(this.parent&&this.remove(),this.children&&this.clear(),this.__emitLifeEvent(Pt.DESTROY),this.__.destroy(),this.__layout.destroy(),this.destroyEventer(),this.destroyed=!0)}};ns=I([Be(p0),Be(x0),Be(T0),Be(d0),Be(R0)],ns);const{setListWithFn:sa}=H,{sort:U0}=Vn,{localBoxBounds:Y0,localStrokeBounds:G0,localRenderBounds:K0,maskLocalBoxBounds:X0,maskLocalStrokeBounds:Z0,maskLocalRenderBounds:q0}=io;let Ka=class extends ns{__updateStrokeSpread(){const{children:t}=this;for(let i=0,s=t.length;i<s;i++)if(t[i].__layout.strokeSpread)return 1;return 0}__updateRenderSpread(){const{children:t}=this;for(let i=0,s=t.length;i<s;i++)if(t[i].__layout.renderSpread)return 1;return 0}__updateBoxBounds(){sa(this.__layout.boxBounds,this.children,this.__hasMask?X0:Y0)}__updateStrokeBounds(){sa(this.__layout.strokeBounds,this.children,this.__hasMask?Z0:G0)}__updateRenderBounds(){sa(this.__layout.renderBounds,this.children,this.__hasMask?q0:K0)}__updateSortChildren(){let t;const{children:i}=this;if(i.length>1){for(let s=0,n=i.length;s<n;s++)i[s].__tempNumber=s,i[s].__.zIndex&&(t=!0);i.sort(U0),this.__layout.affectChildrenSort=t}}add(t,i){if(t===this)return;const s=i===void 0;if(!t.__){if(t instanceof Array)return t.forEach(n=>{this.add(n,i),s||i++});t=Qr.get(t.tag,t)}t.parent&&t.parent.remove(t),t.parent=this,s?this.children.push(t):this.children.splice(i,0,t),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||0)+1),t.__layout.boxChanged||t.__layout.boxChange(),t.__layout.matrixChanged||t.__layout.matrixChange(),t.__bubbleMap&&t.__emitLifeEvent(Pt.ADD),this.leafer&&(t.__bindLeafer(this.leafer),this.leafer.created&&this.__emitChildEvent(Pt.ADD,t)),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}addMany(...t){this.add(t)}remove(t,i){t?t.__?t.animationOut?t.__runAnimation("out",()=>this.__remove(t,i)):this.__remove(t,i):this.find(t).forEach(s=>this.remove(s,i)):t===void 0&&super.remove(null,i)}removeAll(t){const{children:i}=this;i.length&&(this.children=[],this.__preRemove(),this.__.__childBranchNumber=0,i.forEach(s=>{this.__realRemoveChild(s),t&&s.destroy()}))}clear(){this.removeAll(!0)}__remove(t,i){const s=this.children.indexOf(t);s>-1&&(this.children.splice(s,1),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||1)-1),this.__preRemove(),this.__realRemoveChild(t),i&&t.destroy())}__preRemove(){this.__hasMask&&this.__updateMask(),this.__hasEraser&&this.__updateEraser(),this.__layout.boxChange(),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}__realRemoveChild(t){t.__emitLifeEvent(Pt.REMOVE),t.parent=null,this.leafer&&(t.__bindLeafer(null),this.leafer.created&&(this.__emitChildEvent(Pt.REMOVE,t),this.leafer.hitCanvasManager&&this.leafer.hitCanvasManager.clear()))}__emitChildEvent(t,i){const s=new Pt(t,i,this);this.hasEvent(t)&&!this.isLeafer&&this.emitEvent(s),this.leafer.emitEvent(s)}};Ka=I([Be(S0)],Ka);class ft{get length(){return this.list.length}constructor(t){this.reset(),t&&(t instanceof Array?this.addList(t):this.add(t))}has(t){return t&&this.keys[t.innerId]!==void 0}indexAt(t){return this.list[t]}indexOf(t){const i=this.keys[t.innerId];return i===void 0?-1:i}add(t){const{list:i,keys:s}=this;s[t.innerId]===void 0&&(i.push(t),s[t.innerId]=i.length-1)}addAt(t,i=0){const{keys:s}=this;if(s[t.innerId]===void 0){const{list:n}=this;for(let r=i,o=n.length;r<o;r++)s[n[r].innerId]++;i===0?n.unshift(t):(i>n.length&&(i=n.length),n.splice(i,0,t)),s[t.innerId]=i}}addList(t){for(let i=0;i<t.length;i++)this.add(t[i])}remove(t){const{list:i}=this;let s;for(let n=0,r=i.length;n<r;n++)s!==void 0?this.keys[i[n].innerId]=n-1:i[n].innerId===t.innerId&&(s=n,delete this.keys[t.innerId]);s!==void 0&&i.splice(s,1)}sort(t){const{list:i}=this;t?i.sort((s,n)=>n.__level-s.__level):i.sort((s,n)=>s.__level-n.__level)}forEach(t){this.list.forEach(t)}clone(){const t=new ft;return t.list=[...this.list],t.keys=Object.assign({},this.keys),t}update(){this.keys={};const{list:t,keys:i}=this;for(let s=0,n=t.length;s<n;s++)i[t[s].innerId]=s}reset(){this.list=[],this.keys={}}destroy(){this.reset()}}class J0{get length(){return this._length}constructor(t){this._length=0,this.reset(),t&&(t instanceof Array?this.addList(t):this.add(t))}has(t){return this.keys[t.innerId]!==void 0}without(t){return this.keys[t.innerId]===void 0}sort(t){const{levels:i}=this;t?i.sort((s,n)=>n-s):i.sort((s,n)=>s-n)}addList(t){t.forEach(i=>{this.add(i)})}add(t){const{keys:i,levelMap:s}=this;i[t.innerId]||(i[t.innerId]=1,s[t.__level]?s[t.__level].push(t):(s[t.__level]=[t],this.levels.push(t.__level)),this._length++)}forEach(t){let i;this.levels.forEach(s=>{i=this.levelMap[s];for(let n=0,r=i.length;n<r;n++)t(i[n])})}reset(){this.levelMap={},this.keys={},this.levels=[],this._length=0}destroy(){this.levelMap=null}}function y(e,t,i,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function Un(e){return kt(e,t=>({set(i){this.__setAttr(t,i),i&&(this.__.__useEffect=!0),this.__layout.renderChanged||this.__layout.renderChange()}}))}function Yn(e){return kt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.boxChanged||this.__layout.boxChange(),this.__updateSize()}}))}function Q0(){return(e,t)=>{const i="_"+t;ye(e,t,{set(s){this.isLeafer&&(this[i]=s)},get(){return this.isApp?this.tree.zoomLayer:this.isLeafer?this[i]||this:this.leafer&&this.leafer.zoomLayer}})}}const of={},rs={},kc={number(e,t){return typeof e=="object"?e.type==="percent"?e.value*t:e.value:e}},af={},Tt={},os={},Pr={},Xa={},Ds={},Mc={setStyleName(e,t,i){return Hs("state")},set(e,t){return Hs("state")}},{parse:tw,objectToCanvasData:ew}=ss,Ac={},Dc=ht.get("UIData");class Ei extends Nd{get scale(){const{scaleX:t,scaleY:i}=this;return t!==i?{x:t,y:i}:t}get __strokeWidth(){const{strokeWidth:t,strokeWidthFixed:i}=this;if(i){const s=this.__leaf;let{scaleX:n}=s.__nowWorld||s.__world;return n<0&&(n=-n),n>1?t/n:t}else return t}get __hasStroke(){return this.stroke&&this.strokeWidth}get __clipAfterFill(){return this.cornerRadius||this.__pathInputed}get __autoWidth(){return!this._width}get __autoHeight(){return!this._height}get __autoSide(){return!this._width||!this._height}get __autoSize(){return!this._width&&!this._height}setVisible(t){this._visible=t;const{leafer:i}=this.__leaf;i&&(i.watcher.hasVisible=!0)}setWidth(t){t<0?(this._width=-t,this.__leaf.scaleX*=-1,Dc.warn("width < 0, instead -scaleX ",this)):this._width=t}setHeight(t){t<0?(this._height=-t,this.__leaf.scaleY*=-1,Dc.warn("height < 0, instead -scaleY",this)):this._height=t}setFill(t){this.__naturalWidth&&this.__removeNaturalSize(),typeof t=="string"||!t?(this.__isFills&&(this.__removeInput("fill"),os.recycleImage("fill",this),this.__isFills=!1,this.__pixelFill&&(this.__pixelFill=!1)),this._fill=t):typeof t=="object"&&(this.__setInput("fill",t),this.__leaf.__layout.boxChanged||this.__leaf.__layout.boxChange(),this.__isFills=!0,this._fill||(this._fill=Ac))}setStroke(t){typeof t=="string"||!t?(this.__isStrokes&&(this.__removeInput("stroke"),os.recycleImage("stroke",this),this.__isStrokes=!1,this.__pixelStroke&&(this.__pixelStroke=!1)),this._stroke=t):typeof t=="object"&&(this.__setInput("stroke",t),this.__leaf.__layout.boxChanged||this.__leaf.__layout.boxChange(),this.__isStrokes=!0,this._stroke||(this._stroke=Ac))}setPath(t){const i=typeof t=="string";i||t&&typeof t[0]=="object"?(this.__setInput("path",t),this._path=i?tw(t):ew(t)):(this.__input&&this.__removeInput("path"),this._path=t)}setShadow(t){this.__setInput("shadow",t),t instanceof Array?(t.some(i=>i.visible===!1)&&(t=t.filter(i=>i.visible!==!1)),this._shadow=t.length?t:null):this._shadow=t&&t.visible!==!1?[t]:null}setInnerShadow(t){this.__setInput("innerShadow",t),t instanceof Array?(t.some(i=>i.visible===!1)&&(t=t.filter(i=>i.visible!==!1)),this._innerShadow=t.length?t:null):this._innerShadow=t&&t.visible!==!1?[t]:null}__computePaint(){const{fill:t,stroke:i}=this.__input;t&&Tt.compute("fill",this.__leaf),i&&Tt.compute("stroke",this.__leaf),this.__needComputePaint=!1}}class so extends Ei{}class hf extends so{get __boxStroke(){return!this.__pathInputed}get __drawAfterFill(){return this.overflow==="hide"&&this.__clipAfterFill&&this.__leaf.children.length}get __clipAfterFill(){return this.__leaf.isOverflow||super.__clipAfterFill}}class iw extends so{__getInputData(t,i){const s=super.__getInputData(t,i);return Ge.forEach(n=>delete s[n]),s}}class sw extends hf{}class nw extends Ei{}class $h extends Ei{get __boxStroke(){return!this.__pathInputed}}class rw extends Ei{get __boxStroke(){return!this.__pathInputed}}class ow extends Ei{}class aw extends Ei{}class hw extends Ei{get __pathInputed(){return 2}}class lw extends so{}const cw={thin:100,"extra-light":200,light:300,normal:400,medium:500,"semi-bold":600,bold:700,"extra-bold":800,black:900};class uw extends Ei{get __useNaturalRatio(){return!1}setFontWeight(t){typeof t=="string"?(this.__setInput("fontWeight",t),this._fontWeight=cw[t]||400):(this.__input&&this.__removeInput("fontWeight"),this._fontWeight=t)}}class dw extends $h{setUrl(t){this.__setImageFill(t),this._url=t}__setImageFill(t){this.__leaf.image&&(this.__leaf.image=null),this.fill=t?{type:"image",mode:"stretch",url:t}:void 0}__getData(){const t=super.__getData();return delete t.fill,t}__getInputData(t,i){const s=super.__getInputData(t,i);return delete s.fill,s}}class fw extends $h{get __isCanvas(){return!0}get __drawAfterFill(){return!0}__getInputData(t,i){const s=super.__getInputData(t,i);return s.url=this.__leaf.canvas.toDataURL("image/png"),s}}const _w={__updateStrokeSpread(){let e=0,t=0;const i=this.__,{strokeAlign:s,strokeWidth:n}=i;if((i.stroke||i.hitStroke==="all")&&n&&s!=="inside"&&(t=e=s==="center"?n/2:n,!i.__boxStroke)){const r=i.__isLinePath?0:10*e,o=i.strokeCap==="none"?0:n;e+=Math.max(r,o)}return i.__useArrow&&(e+=n*5),this.__layout.strokeBoxSpread=t,e},__updateRenderSpread(){let e=0;const{shadow:t,innerShadow:i,blur:s,backgroundBlur:n}=this.__;t&&t.forEach(o=>e=Math.max(e,Math.max(Math.abs(o.y),Math.abs(o.x))+(o.spread>0?o.spread:0)+o.blur*1.5)),s&&(e=Math.max(e,s));let r=e=Math.ceil(e);return i&&i.forEach(o=>r=Math.max(r,Math.max(Math.abs(o.y),Math.abs(o.x))+(o.spread<0?-o.spread:0)+o.blur*1.5)),n&&(r=Math.max(r,n)),this.__layout.renderShapeSpread=r,e+(this.__layout.strokeSpread||0)}},pw={__updateChange(){const e=this.__;if(e.__useEffect){const{shadow:i,innerShadow:s,blur:n,backgroundBlur:r}=this.__;e.__useEffect=!!(i||s||n||r)}e.__checkSingle(),e.__isFills||e.__isStrokes||e.cornerRadius||e.__useEffect?e.__complex=!0:e.__complex&&(e.__complex=!1)},__drawFast(e,t){Ic(this,e,t)},__draw(e,t){const i=this.__;if(i.__complex){i.__needComputePaint&&i.__computePaint();const{fill:s,stroke:n,__drawAfterFill:r}=i;if(this.__drawRenderPath(e),i.__useEffect){const o=Tt.shape(this,e,t);this.__nowWorld=this.__getNowWorld(t);const{shadow:a,innerShadow:h}=i;a&&Xa.shadow(this,e,o),s&&(i.__isFills?Tt.fills(s,this,e):Tt.fill(s,this,e)),r&&this.__drawAfterFill(e,t),h&&Xa.innerShadow(this,e,o),n&&(i.__isStrokes?Tt.strokes(n,this,e):Tt.stroke(n,this,e)),o.worldCanvas&&o.worldCanvas.recycle(),o.canvas.recycle()}else s&&(i.__isFills?Tt.fills(s,this,e):Tt.fill(s,this,e)),r&&this.__drawAfterFill(e,t),n&&(i.__isStrokes?Tt.strokes(n,this,e):Tt.stroke(n,this,e))}else i.__pathInputed?Ic(this,e,t):this.__drawFast(e,t)},__renderShape(e,t,i,s){if(this.__worldOpacity){e.setWorld(this.__nowWorld=this.__getNowWorld(t));const{fill:n,stroke:r}=this.__;this.__drawRenderPath(e),n&&!i&&(this.__.__pixelFill?Tt.fills(n,this,e):Tt.fill("#000000",this,e)),this.__.__isCanvas&&this.__drawAfterFill(e,t),r&&!s&&(this.__.__pixelStroke?Tt.strokes(r,this,e):Tt.stroke("#000000",this,e))}},__drawAfterFill(e,t){this.__.__clipAfterFill?(e.save(),this.windingRule?e.clip(this.windingRule):e.clip(),this.__drawContent(e,t),e.restore()):this.__drawContent(e,t)}};function Ic(e,t,i){const{fill:s,stroke:n,__drawAfterFill:r}=e.__;e.__drawRenderPath(t),s&&Tt.fill(s,e,t),r&&e.__drawAfterFill(t,i),n&&Tt.stroke(n,e,t)}const gw={__drawFast(e,t){let{width:i,height:s,fill:n,stroke:r,__drawAfterFill:o}=this.__;if(n&&(e.fillStyle=n,e.fillRect(0,0,i,s)),o&&this.__drawAfterFill(e,t),r){const{strokeAlign:a,__strokeWidth:h}=this.__;if(!h)return;e.setStroke(r,h,this.__);const l=h/2;switch(a){case"center":e.strokeRect(0,0,i,s);break;case"inside":i-=h,s-=h,i<0||s<0?(e.save(),this.__clip(e,t),e.strokeRect(l,l,i,s),e.restore()):e.strokeRect(l,l,i,s);break;case"outside":e.strokeRect(-l,-l,i+h,s+h);break}}}};var Za;let L=Za=class extends ns{get app(){return this.leafer&&this.leafer.app}get isFrame(){return!1}set scale(t){Wt.assignScale(this,t)}get scale(){return this.__.scale}get pen(){const{path:t}=this.__;return en.set(this.path=t||[]),t||this.__drawPathByBox(en),en}get editConfig(){}get editOuter(){return""}get editInner(){return""}constructor(t){super(t)}reset(t){}set(t,i){i?(this.lockNormalStyle=!0,Object.assign(this,t),this.lockNormalStyle=!1):Object.assign(this,t)}get(t){return typeof t=="string"?this.__.__getInput(t):this.__.__getInputData(t)}createProxyData(){}find(t,i){}findTag(t){return this.find({tag:t})}findOne(t,i){}findId(t){return this.findOne({id:t})}getPath(t,i){this.__layout.update();let s=i?this.__.__pathForRender:this.__.path;return s||(en.set(s=[]),this.__drawPathByBox(en)),t?ss.toCanvasData(s,!0):s}getPathString(t,i,s){return ss.stringify(this.getPath(t,i),s)}load(){this.__.__computePaint()}__onUpdateSize(){if(this.__.__input){const t=this.__;t.lazy&&!this.__inLazyBounds&&!Ds.running?t.__needComputePaint=!0:t.__computePaint()}}__updateRenderPath(){if(this.__.path){const t=this.__;t.__pathForRender=t.cornerRadius?bm.smooth(t.path,t.cornerRadius,t.cornerSmoothing):t.path,t.__useArrow&&af.addArrows(this,!t.cornerRadius)}}__drawRenderPath(t){t.beginPath(),this.__drawPathByData(t,this.__.__pathForRender)}__drawPath(t){t.beginPath(),this.__drawPathByData(t,this.__.path)}__drawPathByData(t,i){i?im.drawPathByData(t,i):this.__drawPathByBox(t)}__drawPathByBox(t){const{x:i,y:s,width:n,height:r}=this.__layout.boxBounds;if(this.__.cornerRadius){const{cornerRadius:o}=this.__;t.roundRect(i,s,n,r,typeof o=="number"?[o]:o)}else t.rect(i,s,n,r)}animate(t,i,s,n){return Hs("animate")}killAnimate(t){}export(t,i){return Ds.export(this,t,i)}clone(t){const i=this.toJSON();return t&&Object.assign(i,t),Za.one(i)}static one(t,i,s,n,r){return Qr.get(t.tag||this.prototype.__tag,t,i,s,n,r)}static registerUI(){Ut()(this)}static registerData(t){Vt(t)(this.prototype)}static setEditConfig(t){}static setEditOuter(t){}static setEditInner(t){}destroy(){this.fill=this.stroke=null,this.__animate&&this.killAnimate(),super.destroy()}};y([Vt(Ei)],L.prototype,"__",void 0);y([Q0()],L.prototype,"zoomLayer",void 0);y([$e("")],L.prototype,"id",void 0);y([$e("")],L.prototype,"name",void 0);y([$e("")],L.prototype,"className",void 0);y([jn("pass-through")],L.prototype,"blendMode",void 0);y([Am(1)],L.prototype,"opacity",void 0);y([Dm(!0)],L.prototype,"visible",void 0);y([jn(!1)],L.prototype,"locked",void 0);y([Im(0)],L.prototype,"zIndex",void 0);y([Wm(!1)],L.prototype,"mask",void 0);y([$m(!1)],L.prototype,"eraser",void 0);y([Us(0,!0)],L.prototype,"x",void 0);y([Us(0,!0)],L.prototype,"y",void 0);y([mt(100,!0)],L.prototype,"width",void 0);y([mt(100,!0)],L.prototype,"height",void 0);y([ef(1,!0)],L.prototype,"scaleX",void 0);y([ef(1,!0)],L.prototype,"scaleY",void 0);y([Wh(0,!0)],L.prototype,"rotation",void 0);y([Wh(0,!0)],L.prototype,"skewX",void 0);y([Wh(0,!0)],L.prototype,"skewY",void 0);y([Us(0,!0)],L.prototype,"offsetX",void 0);y([Us(0,!0)],L.prototype,"offsetY",void 0);y([Us(0,!0)],L.prototype,"scrollX",void 0);y([Us(0,!0)],L.prototype,"scrollY",void 0);y([tf()],L.prototype,"origin",void 0);y([tf()],L.prototype,"around",void 0);y([$e(!1)],L.prototype,"lazy",void 0);y([Bm(1)],L.prototype,"pixelRatio",void 0);y([km()],L.prototype,"path",void 0);y([Qt()],L.prototype,"windingRule",void 0);y([Qt(!0)],L.prototype,"closed",void 0);y([mt(0)],L.prototype,"padding",void 0);y([$e(!1)],L.prototype,"draggable",void 0);y([$e()],L.prototype,"dragBounds",void 0);y([$e(!1)],L.prototype,"editable",void 0);y([cs(!0)],L.prototype,"hittable",void 0);y([cs("path")],L.prototype,"hitFill",void 0);y([ii("path")],L.prototype,"hitStroke",void 0);y([cs(!1)],L.prototype,"hitBox",void 0);y([cs(!0)],L.prototype,"hitChildren",void 0);y([cs(!0)],L.prototype,"hitSelf",void 0);y([cs()],L.prototype,"hitRadius",void 0);y([Fm("")],L.prototype,"cursor",void 0);y([jn()],L.prototype,"fill",void 0);y([ii()],L.prototype,"stroke",void 0);y([ii("inside")],L.prototype,"strokeAlign",void 0);y([ii(1)],L.prototype,"strokeWidth",void 0);y([ii(!1)],L.prototype,"strokeWidthFixed",void 0);y([ii("none")],L.prototype,"strokeCap",void 0);y([ii("miter")],L.prototype,"strokeJoin",void 0);y([ii()],L.prototype,"dashPattern",void 0);y([ii()],L.prototype,"dashOffset",void 0);y([ii(10)],L.prototype,"miterLimit",void 0);y([Qt(0)],L.prototype,"cornerRadius",void 0);y([Qt()],L.prototype,"cornerSmoothing",void 0);y([Un()],L.prototype,"shadow",void 0);y([Un()],L.prototype,"innerShadow",void 0);y([Un()],L.prototype,"blur",void 0);y([Un()],L.prototype,"backgroundBlur",void 0);y([Un()],L.prototype,"grayscale",void 0);y([$e({})],L.prototype,"data",void 0);y([Fe(ns.prototype.reset)],L.prototype,"reset",null);L=Za=y([Be(_w),Be(pw),eo()],L);let Dt=class extends L{get __tag(){return"Group"}get isBranch(){return!0}constructor(t){super(t)}reset(t){this.__setBranch(),super.reset(t)}__setBranch(){this.children||(this.children=[])}set(t,i){if(t.children){const{children:s}=t;delete t.children,this.children?this.clear():this.__setBranch(),super.set(t,i),s.forEach(n=>this.add(n)),t.children=s}else super.set(t,i)}toJSON(t){const i=super.toJSON(t);return i.children=this.children.map(s=>s.toJSON(t)),i}pick(t,i){}addAt(t,i){this.add(t,i)}addAfter(t,i){this.add(t,this.children.indexOf(i)+1)}addBefore(t,i){this.add(t,this.children.indexOf(i))}add(t,i){}addMany(...t){}remove(t,i){}removeAll(t){}clear(){}};y([Vt(so)],Dt.prototype,"__",void 0);Dt=y([Be(Ka),Ut()],Dt);var Lr;const na=ht.get("Leafer");let vi=Lr=class extends Dt{get __tag(){return"Leafer"}get isApp(){return!1}get app(){return this.parent||this}get isLeafer(){return!0}get imageReady(){return this.viewReady&&oe.isComplete}get layoutLocked(){return!this.layouter.running}get FPS(){return this.renderer?this.renderer.FPS:60}get cursorPoint(){return this.interaction&&this.interaction.hoverData||{x:this.width/2,y:this.height/2}}get clientBounds(){return this.canvas&&this.canvas.getClientBounds()}constructor(t,i){super(i),this.config={type:"design",start:!0,hittable:!0,smooth:!0,lazySpeard:100,zoom:{min:.01,max:256},move:{holdSpaceKey:!0,holdMiddleKey:!0,autoDistance:2}},this.leafs=0,this.__eventIds=[],this.__controllers=[],this.__readyWait=[],this.__viewReadyWait=[],this.__viewCompletedWait=[],this.__nextRenderWait=[],this.userConfig=t,t&&(t.view||t.width)&&this.init(t),Lr.list.add(this)}init(t,i){if(this.canvas)return;this.__setLeafer(this),t&&Ot.assign(this.config,t);let s;const{config:n}=this;this.initType(n.type);const r=this.canvas=St.canvas(n);this.__controllers.push(this.renderer=St.renderer(this,r,n),this.watcher=St.watcher(this,n),this.layouter=St.layouter(this,n)),this.isApp&&this.__setApp(),this.__checkAutoLayout(n,i),this.view=r.view,i?(this.__bindApp(i),s=i.running):(this.selector=St.selector(this),this.interaction=St.interaction(this,r,this.selector,n),this.interaction&&(this.__controllers.unshift(this.interaction),this.hitCanvasManager=St.hitCanvasManager()),this.canvasManager=new zd,s=n.start),this.hittable=n.hittable,this.fill=n.fill,this.canvasManager.add(r),this.__listenEvents(),s&&(this.__startTimer=setTimeout(this.start.bind(this))),sn.run(this.__initWait),this.onInit()}onInit(){}initType(t){}set(t){this.waitInit(()=>{super.set(t)})}start(){clearTimeout(this.__startTimer),!this.running&&this.canvas&&(this.running=!0,this.ready?this.emitLeafer(Rt.RESTART):this.emitLeafer(Rt.START),this.__controllers.forEach(t=>t.start()),this.isApp||this.renderer.render())}stop(){clearTimeout(this.__startTimer),this.running&&this.canvas&&(this.__controllers.forEach(t=>t.stop()),this.running=!1,this.emitLeafer(Rt.STOP))}unlockLayout(){this.layouter.start(),this.updateLayout()}lockLayout(){this.updateLayout(),this.layouter.stop()}resize(t){const i=Ot.copyAttrs({},t,Ge);Object.keys(i).forEach(s=>this[s]=i[s])}forceRender(t){this.renderer.addBlock(t?new wt(t):this.canvas.bounds),this.viewReady&&this.renderer.update()}updateCursor(t){const i=this.interaction;i&&(t?i.setCursor(t):i.updateCursor())}updateLazyBounds(){this.lazyBounds=this.canvas.bounds.clone().spread(this.config.lazySpeard)}__doResize(t){const{canvas:i}=this;if(!i||i.isSameSize(t))return;const s=Ot.copyAttrs({},this.canvas,Ge);i.resize(t),this.updateLazyBounds(),this.__onResize(new wi(t,s))}__onResize(t){this.emitEvent(t),Ot.copyAttrs(this.__,t,Ge),(!t.width||!t.height)&&na.warn("w = 0 or h = 0"),setTimeout(()=>{this.canvasManager&&this.canvasManager.clearRecycled()},0)}__setApp(){}__bindApp(t){this.selector=t.selector,this.interaction=t.interaction,this.canvasManager=t.canvasManager,this.hitCanvasManager=t.hitCanvasManager}__setLeafer(t){this.leafer=t,this.__level=1}__checkAutoLayout(t,i){i||((!t.width||!t.height)&&(this.autoLayout=new bg(t)),this.canvas.startAutoLayout(this.autoLayout,this.__onResize.bind(this)))}__setAttr(t,i){return this.canvas&&(Ge.includes(t)?(i||na.warn(t+" is 0"),this.__changeCanvasSize(t,i)):t==="fill"?this.__changeFill(i):t==="hittable"?this.parent||(this.canvas.hittable=i):t==="zIndex"&&(this.canvas.zIndex=i,setTimeout(()=>this.parent&&this.parent.__updateSortChildren()))),super.__setAttr(t,i)}__getAttr(t){return this.canvas&&Ge.includes(t)?this.canvas[t]:super.__getAttr(t)}__changeCanvasSize(t,i){const s=Ot.copyAttrs({},this.canvas,Ge);s[t]=this.config[t]=i,i&&this.canvas.stopAutoLayout(),this.__doResize(s)}__changeFill(t){this.config.fill=t,this.canvas.allowBackgroundColor?this.canvas.backgroundColor=t:this.forceRender()}__onCreated(){this.created=!0}__onReady(){this.ready||(this.ready=!0,this.emitLeafer(Rt.BEFORE_READY),this.emitLeafer(Rt.READY),this.emitLeafer(Rt.AFTER_READY),sn.run(this.__readyWait))}__onViewReady(){this.viewReady||(this.viewReady=!0,this.emitLeafer(Rt.VIEW_READY),sn.run(this.__viewReadyWait))}__onNextRender(){if(this.viewReady){sn.run(this.__nextRenderWait);const{imageReady:t}=this;t&&!this.viewCompleted&&this.__checkViewCompleted(),t||(this.viewCompleted=!1)}}__checkViewCompleted(t=!0){this.nextRender(()=>{this.imageReady&&(t&&this.emitLeafer(Rt.VIEW_COMPLETED),sn.run(this.__viewCompletedWait),this.viewCompleted=!0)})}__onWatchData(){this.watcher.childrenChanged&&this.interaction&&this.nextRender(()=>this.interaction.updateCursor())}waitInit(t,i){i&&(t=t.bind(i)),this.__initWait||(this.__initWait=[]),this.canvas?t():this.__initWait.push(t)}waitReady(t,i){i&&(t=t.bind(i)),this.ready?t():this.__readyWait.push(t)}waitViewReady(t,i){i&&(t=t.bind(i)),this.viewReady?t():this.__viewReadyWait.push(t)}waitViewCompleted(t,i){i&&(t=t.bind(i)),this.__viewCompletedWait.push(t),this.viewCompleted?this.__checkViewCompleted(!1):this.running||this.start()}nextRender(t,i,s){i&&(t=t.bind(i));const n=this.__nextRenderWait;if(s){for(let r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}else n.push(t)}zoom(t,i,s){return Hs("view")}getValidMove(t,i){return{x:t,y:i}}getValidScale(t){return t}getWorldPointByClient(t,i){return this.interaction&&this.interaction.getLocal(t,i)}getPagePointByClient(t,i){return this.getPagePoint(this.getWorldPointByClient(t,i))}updateClientBounds(){this.canvas&&this.canvas.updateClientBounds()}receiveEvent(t){}__checkUpdateLayout(){this.__layout.update()}emitLeafer(t){this.emitEvent(new Rt(t,this))}__listenEvents(){const t=ke.start("FirstCreate "+this.innerName);this.once(Rt.START,()=>ke.end(t)),this.once(ot.START,()=>this.updateLazyBounds()),this.once(ot.END,()=>this.__onReady()),this.once(at.START,()=>this.__onCreated()),this.once(at.END,()=>this.__onViewReady()),this.__eventIds.push(this.on_(ki.DATA,this.__onWatchData,this),this.on_(at.NEXT,this.__onNextRender,this),this.on_(ot.CHECK_UPDATE,this.__checkUpdateLayout,this))}__removeListenEvents(){this.off_(this.__eventIds),this.__eventIds.length=0}destroy(t){const i=()=>{if(!this.destroyed){Lr.list.remove(this);try{this.stop(),this.emitEvent(new Rt(Rt.END,this)),this.__removeListenEvents(),this.__controllers.forEach(s=>!(this.parent&&s===this.interaction)&&s.destroy()),this.__controllers.length=0,this.parent||(this.selector&&this.selector.destroy(),this.hitCanvasManager&&this.hitCanvasManager.destroy(),this.canvasManager.destroy()),this.canvas.destroy(),this.config.view=this.view=null,this.userConfig&&(this.userConfig.view=null),super.destroy(),setTimeout(()=>{oe.clearRecycled()},100)}catch(s){na.error(s)}}};t?i():setTimeout(i)}};vi.list=new ft;y([Vt(iw)],vi.prototype,"__",void 0);y([mt()],vi.prototype,"pixelRatio",void 0);vi=Lr=y([Ut()],vi);let ti=class extends L{get __tag(){return"Rect"}constructor(t){super(t)}};y([Vt($h)],ti.prototype,"__",void 0);ti=y([Be(gw),eo(),Ut()],ti);const{copy:yw,add:mw,includes:ww}=H,us=ti.prototype,vw=Dt.prototype,ra={};let Bt=class extends Dt{get __tag(){return"Box"}get isBranchLeaf(){return!0}constructor(t){super(t),this.__layout.renderChanged||this.__layout.renderChange()}__updateStrokeSpread(){return 0}__updateRectRenderSpread(){return 0}__updateRenderSpread(){return this.__updateRectRenderSpread()||-1}__updateRectBoxBounds(){}__updateBoxBounds(t){const i=this.__;if(this.children.length)if(i.__autoSide){super.__updateBoxBounds();const{boxBounds:s}=this.__layout;i.__autoSize||(i.__autoWidth?(s.width+=s.x,s.x=0,s.height=i.height,s.y=0):(s.height+=s.y,s.y=0,s.width=i.width,s.x=0)),this.__updateNaturalSize()}else this.__updateRectBoxBounds();else this.__updateRectBoxBounds()}__updateStrokeBounds(){}__updateRenderBounds(){let t;const{renderBounds:i}=this.__layout;this.children.length?(super.__updateRenderBounds(),yw(ra,i),this.__updateRectRenderBounds(),t=!ww(i,ra),t&&this.__.overflow!=="hide"&&mw(i,ra)):this.__updateRectRenderBounds(),!this.isOverflow!=!t&&(this.isOverflow=t)}__updateRectRenderBounds(){}__updateRectChange(){}__updateChange(){super.__updateChange(),this.__updateRectChange()}__renderRect(t,i){}__renderGroup(t,i){}__render(t,i){this.__.__drawAfterFill?this.__renderRect(t,i):(this.__renderRect(t,i),this.children.length&&this.__renderGroup(t,i))}__drawContent(t,i){this.__renderGroup(t,i),this.__.__hasStroke&&(t.setWorld(this.__nowWorld),this.__drawRenderPath(t))}};y([Vt(hf)],Bt.prototype,"__",void 0);y([$e(!1)],Bt.prototype,"resizeChildren",void 0);y([$e(!1)],Bt.prototype,"textBox",void 0);y([sf("show")],Bt.prototype,"overflow",void 0);y([Fe(us.__updateStrokeSpread)],Bt.prototype,"__updateStrokeSpread",null);y([Fe(us.__updateRenderSpread)],Bt.prototype,"__updateRectRenderSpread",null);y([Fe(us.__updateBoxBounds)],Bt.prototype,"__updateRectBoxBounds",null);y([Fe(us.__updateStrokeBounds)],Bt.prototype,"__updateStrokeBounds",null);y([Fe(us.__updateRenderBounds)],Bt.prototype,"__updateRectRenderBounds",null);y([Fe(us.__updateChange)],Bt.prototype,"__updateRectChange",null);y([Fe(us.__render)],Bt.prototype,"__renderRect",null);y([Fe(vw.__render)],Bt.prototype,"__renderGroup",null);Bt=y([eo(),Ut()],Bt);let Ns=class extends Bt{get __tag(){return"Frame"}get isFrame(){return!0}constructor(t){super(t)}};y([Vt(sw)],Ns.prototype,"__",void 0);y([jn("#FFFFFF")],Ns.prototype,"fill",void 0);y([sf("hide")],Ns.prototype,"overflow",void 0);Ns=y([Ut()],Ns);const{moveTo:Wc,closePath:$c,ellipse:xs}=ls;let as=class extends L{get __tag(){return"Ellipse"}constructor(t){super(t)}__updatePath(){const{width:t,height:i,innerRadius:s,startAngle:n,endAngle:r}=this.__,o=t/2,a=i/2,h=this.__.path=[];s?(n||r?(s<1&&xs(h,o,a,o*s,a*s,0,n,r,!1),xs(h,o,a,o,a,0,r,n,!0),s<1&&$c(h)):(s<1&&(xs(h,o,a,o*s,a*s),Wc(h,t,a)),xs(h,o,a,o,a,0,360,0,!0)),D.ellipseToCurve&&(this.__.path=this.getPath(!0))):n||r?(Wc(h,o,a),xs(h,o,a,o,a,0,n,r,!1),$c(h)):xs(h,o,a,o,a)}};y([Vt(rw)],as.prototype,"__",void 0);y([Qt(0)],as.prototype,"innerRadius",void 0);y([Qt(0)],as.prototype,"startAngle",void 0);y([Qt(0)],as.prototype,"endAngle",void 0);as=y([Ut()],as);const{moveTo:xw,lineTo:bw,drawPoints:Fc}=ls,{rotate:Ew,getAngle:Cw,getDistance:Tw,defaultPoint:Hc}=j,{toBounds:Rw}=Ih;let ei=class extends L{get __tag(){return"Line"}get toPoint(){const{width:t,rotation:i}=this.__,s=kh();return t&&(s.x=t),i&&Ew(s,i),s}set toPoint(t){this.width=Tw(Hc,t),this.rotation=Cw(Hc,t),this.height&&(this.height=0)}constructor(t){super(t)}__updatePath(){const t=this.__,i=t.path=[];t.points?Fc(i,t.points,!1,t.closed):(xw(i,0,0),bw(i,this.width,0))}__updateRenderPath(){const t=this.__;!this.pathInputed&&t.points&&t.curve?(Fc(t.__pathForRender=[],t.points,t.curve,t.closed),t.__useArrow&&af.addArrows(this,!1)):super.__updateRenderPath()}__updateBoxBounds(){this.points?Rw(this.__.__pathForRender,this.__layout.boxBounds):super.__updateBoxBounds()}};y([Vt(nw)],ei.prototype,"__",void 0);y([to("center")],ei.prototype,"strokeAlign",void 0);y([mt(0)],ei.prototype,"height",void 0);y([Qt()],ei.prototype,"points",void 0);y([Qt(0)],ei.prototype,"curve",void 0);y([Qt(!1)],ei.prototype,"closed",void 0);ei=y([Ut()],ei);const{sin:Sw,cos:Pw,PI:zc}=Math,{moveTo:Lw,lineTo:Ow,closePath:Bw,drawPoints:kw}=ls,lf=ei.prototype;let xi=class extends L{get __tag(){return"Polygon"}constructor(t){super(t)}__updatePath(){const t=this.__.path=[];if(this.__.points)kw(t,this.__.points,!1,!0);else{const{width:i,height:s,sides:n}=this.__,r=i/2,o=s/2;Lw(t,r,0);for(let a=1;a<n;a++)Ow(t,r+r*Sw(a*2*zc/n),o-o*Pw(a*2*zc/n))}Bw(t)}__updateRenderPath(){}__updateBoxBounds(){}};y([Vt(ow)],xi.prototype,"__",void 0);y([Qt(3)],xi.prototype,"sides",void 0);y([Qt()],xi.prototype,"points",void 0);y([Qt(0)],xi.prototype,"curve",void 0);y([Fe(lf.__updateRenderPath)],xi.prototype,"__updateRenderPath",null);y([Fe(lf.__updateBoxBounds)],xi.prototype,"__updateBoxBounds",null);xi=y([eo(),Ut()],xi);const{sin:Mw,cos:Aw,PI:Nc}=Math,{moveTo:Dw,lineTo:Iw,closePath:Ww}=ls;let An=class extends L{get __tag(){return"Star"}constructor(t){super(t)}__updatePath(){const{width:t,height:i,corners:s,innerRadius:n}=this.__,r=t/2,o=i/2,a=this.__.path=[];Dw(a,r,0);for(let h=1;h<s*2;h++)Iw(a,r+(h%2===0?r:r*n)*Mw(h*Nc/s),o-(h%2===0?o:o*n)*Aw(h*Nc/s));Ww(a)}};y([Vt(aw)],An.prototype,"__",void 0);y([Qt(5)],An.prototype,"corners",void 0);y([Qt(.382)],An.prototype,"innerRadius",void 0);An=y([Ut()],An);let Nr=class extends ti{get __tag(){return"Image"}get ready(){return this.image?this.image.ready:!1}constructor(t){super(t),this.on(Qe.LOADED,i=>{i.attrName==="fill"&&i.attrValue.url===this.url&&(this.image=i.image)})}destroy(){this.image=null,super.destroy()}};y([Vt(dw)],Nr.prototype,"__",void 0);y([mt("")],Nr.prototype,"url",void 0);Nr=y([Ut()],Nr);let Ai=class extends ti{get __tag(){return"Canvas"}get ready(){return!this.url}constructor(t){super(t),this.canvas=St.canvas(this.__),this.context=this.canvas.context,t&&t.url&&this.drawImage(t.url)}drawImage(t){new Jd({url:t}).load(i=>{this.context.drawImage(i.view,0,0),this.url=void 0,this.paint(),this.emitEvent(new Qe(Qe.LOADED,{image:i}))})}draw(t,i,s,n){const r=new re(t.worldTransform).invert(),o=new re;i&&o.translate(i.x,i.y),s&&(typeof s=="number"?o.scale(s):o.scale(s.x,s.y)),n&&o.rotate(n),r.multiplyParent(o),t.__render(this.canvas,{matrix:r.withScale()}),this.paint()}paint(){this.forceRender()}__drawContent(t,i){const{width:s,height:n}=this.__,{view:r}=this.canvas;t.drawImage(r,0,0,r.width,r.height,0,0,s,n)}__updateSize(){const{canvas:t}=this;if(t){const{smooth:i}=this.__;t.smooth!==i&&(t.smooth=i),t.resize(this.__)}}destroy(){this.canvas&&(this.canvas.destroy(),this.canvas=this.context=null),super.destroy()}};y([Vt(fw)],Ai.prototype,"__",void 0);y([Yn(100)],Ai.prototype,"width",void 0);y([Yn(100)],Ai.prototype,"height",void 0);y([Yn(1)],Ai.prototype,"pixelRatio",void 0);y([Yn(!0)],Ai.prototype,"smooth",void 0);y([Yn()],Ai.prototype,"contextSettings",void 0);Ai=y([Ut()],Ai);const{copyAndSpread:$w,includes:Fw,isSame:Hw,spread:zw,setList:Nw}=H;let _t=class extends L{get __tag(){return"Text"}get textDrawData(){return this.__layout.update(),this.__.__textDrawData}constructor(t){super(t)}__drawHitPath(t){const{__lineHeight:i,fontSize:s,__baseLine:n,__textDrawData:r}=this.__;t.beginPath(),this.__.__letterSpacing<0?this.__drawPathByData(t):r.rows.forEach(o=>t.rect(o.x,o.y-n,o.width,i<s?s:i))}__drawPathByData(t,i){const{x:s,y:n,width:r,height:o}=this.__layout.boxBounds;t.rect(s,n,r,o)}__drawRenderPath(t){t.font=this.__.__font}__updateTextDrawData(){const t=this.__,{lineHeight:i,letterSpacing:s,fontFamily:n,fontSize:r,fontWeight:o,italic:a,textCase:h,textOverflow:l,padding:c}=t;t.__lineHeight=kc.number(i,r),t.__letterSpacing=kc.number(s,r),t.__padding=c?Wt.fourNumber(c):void 0,t.__baseLine=t.__lineHeight-(t.__lineHeight-r*.7)/2,t.__font=`${a?"italic ":""}${h==="small-caps"?"small-caps ":""}${o!=="normal"?o+" ":""}${r}px ${n}`,t.__clipText=l!=="show"&&!t.__autoSize,t.__textDrawData=of.getDrawData(t.text,this.__)}__updateBoxBounds(){const t=this.__,i=this.__layout,{fontSize:s,italic:n,padding:r,__autoWidth:o,__autoHeight:a}=t;this.__updateTextDrawData();const{bounds:h}=t.__textDrawData,l=i.boxBounds;if(t.__lineHeight<s&&zw(h,s/2),o||a){if(l.x=o?h.x:0,l.y=a?h.y:0,l.width=o?h.width:t.width,l.height=a?h.height:t.height,r){const[u,f,d,g]=t.__padding;o&&(l.x-=g,l.width+=f+g),a&&(l.y-=u,l.height+=d+u)}this.__updateNaturalSize()}else super.__updateBoxBounds();n&&(l.width+=s*.16);const c=Fw(l,h)?l:h;Hw(c,i.contentBounds)?t.__textBoxBounds=c:(i.contentBounds=c,i.renderChanged=!0,Nw(t.__textBoxBounds={},[l,h]))}__updateRenderSpread(){let t=super.__updateRenderSpread();return t||(t=this.__layout.boxBounds===this.__layout.contentBounds?0:1),t}__updateRenderBounds(){$w(this.__layout.renderBounds,this.__.__textBoxBounds,this.__layout.renderSpread)}};y([Vt(uw)],_t.prototype,"__",void 0);y([mt(0)],_t.prototype,"width",void 0);y([mt(0)],_t.prototype,"height",void 0);y([$e(!1)],_t.prototype,"resizeFontSize",void 0);y([jn("#000000")],_t.prototype,"fill",void 0);y([to("outside")],_t.prototype,"strokeAlign",void 0);y([cs("all")],_t.prototype,"hitFill",void 0);y([mt("")],_t.prototype,"text",void 0);y([mt("L")],_t.prototype,"fontFamily",void 0);y([mt(12)],_t.prototype,"fontSize",void 0);y([mt("normal")],_t.prototype,"fontWeight",void 0);y([mt(!1)],_t.prototype,"italic",void 0);y([mt("none")],_t.prototype,"textCase",void 0);y([mt("none")],_t.prototype,"textDecoration",void 0);y([mt(0)],_t.prototype,"letterSpacing",void 0);y([mt({type:"percent",value:1.5})],_t.prototype,"lineHeight",void 0);y([mt(0)],_t.prototype,"paraIndent",void 0);y([mt(0)],_t.prototype,"paraSpacing",void 0);y([mt("left")],_t.prototype,"textAlign",void 0);y([mt("top")],_t.prototype,"verticalAlign",void 0);y([mt(!0)],_t.prototype,"autoSizeAlign",void 0);y([mt("normal")],_t.prototype,"textWrap",void 0);y([mt("show")],_t.prototype,"textOverflow",void 0);_t=y([Ut()],_t);let js=class extends L{get __tag(){return"Path"}constructor(t){super(t)}};y([Vt(hw)],js.prototype,"__",void 0);y([to("center")],js.prototype,"strokeAlign",void 0);js=y([Ut()],js);let jr=class extends Dt{get __tag(){return"Pen"}constructor(t){super(t)}setStyle(t){const i=this.pathElement=new js(t);return this.pathStyle=t,this.__path=i.path||(i.path=[]),this.add(i),this}beginPath(){return this}moveTo(t,i){return this}lineTo(t,i){return this}bezierCurveTo(t,i,s,n,r,o){return this}quadraticCurveTo(t,i,s,n){return this}closePath(){return this}rect(t,i,s,n){return this}roundRect(t,i,s,n,r){return this}ellipse(t,i,s,n,r,o,a,h){return this}arc(t,i,s,n,r,o){return this}arcTo(t,i,s,n,r){return this}drawEllipse(t,i,s,n,r,o,a,h){return this}drawArc(t,i,s,n,r,o){return this}drawPoints(t,i,s){return this}clearPath(){return this}paint(){this.pathElement.__layout.boxChanged||this.pathElement.forceUpdate("path")}};y([Vt(lw)],jr.prototype,"__",void 0);y([jw()],jr.prototype,"path",void 0);jr=y([Be(Dh,["set","path","paint"]),Ut()],jr);function jw(){return(e,t)=>{ye(e,t,{get(){return this.__path}})}}function Ci(e,t,i,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}let qa=class extends vi{get __tag(){return"App"}get isApp(){return!0}constructor(t,i){super(t,i)}init(t,i){if(super.init(t,i),t){const{ground:s,tree:n,sky:r,editor:o}=t;s&&(this.ground=this.addLeafer(s)),(n||o)&&(this.tree=this.addLeafer(n)),(r||o)&&(this.sky=this.addLeafer(r||{type:"draw",usePartRender:!1})),o&&this.sky.add(this.editor=St.editor(o))}}__setApp(){const{canvas:t}=this,{realCanvas:i,view:s}=this.config;i||s===this.canvas.view||!t.parentView?this.realCanvas=!0:t.unrealCanvas(),this.leafer=this,this.watcher.disable(),this.layouter.disable(),this.__eventIds.push(this.on_(Ze.CHANGE,this.__onPropertyChange,this))}start(){super.start(),this.children.forEach(t=>t.start())}stop(){this.children.forEach(t=>t.stop()),super.stop()}unlockLayout(){super.unlockLayout(),this.children.forEach(t=>t.unlockLayout())}lockLayout(){super.lockLayout(),this.children.forEach(t=>t.lockLayout())}forceRender(t){this.children.forEach(i=>i.forceRender(t))}addLeafer(t){const i=new vi(t);return this.add(i),i}add(t,i){if(!t.view){if(this.realCanvas&&!this.canvas.bounds){setTimeout(()=>this.add(t,i),10);return}t.init(this.__getChildConfig(t.userConfig),this)}super.add(t,i),i!==void 0&&(t.canvas.childIndex=i),this.__listenChildEvents(t)}__onPropertyChange(){ht.showHitView&&this.children.forEach(t=>t.forceUpdate("surface"))}__onCreated(){this.created=this.children.every(t=>t.created)}__onReady(){this.children.every(t=>t.ready)&&super.__onReady()}__onViewReady(){this.children.every(t=>t.viewReady)&&super.__onViewReady()}__onChildRenderEnd(t){this.renderer.addBlock(t.renderBounds),this.viewReady&&this.renderer.update()}__render(t,i){if(t.context){const s=i.matrix;s&&t.setTransform(s.a,s.b,s.c,s.d,s.e,s.f),this.children.forEach(n=>t.copyWorld(n.canvas))}}__onResize(t){this.children.forEach(i=>i.resize(t)),super.__onResize(t)}__checkUpdateLayout(){this.children.forEach(t=>t.__layout.update())}__getChildConfig(t){let i=Object.assign({},this.config);return i.hittable=i.realCanvas=void 0,t&&Ot.assign(i,t),this.autoLayout&&Ot.copyAttrs(i,this,Ge),i.view=this.realCanvas?void 0:this.view,i.fill=void 0,i}__listenChildEvents(t){t.once(ot.END,()=>this.__onReady()),t.once(at.START,()=>this.__onCreated()),t.once(at.END,()=>this.__onViewReady()),this.realCanvas&&this.__eventIds.push(t.on_(at.END,this.__onChildRenderEnd,this))}};qa=Ci([Ut()],qa);const gr={},Tn={isHoldSpaceKey(){return Tn.isHold("Space")},isHold(e){return gr[e]},setDownCode(e){gr[e]||(gr[e]=!0)},setUpCode(e){gr[e]=!1}},Le={LEFT:1,RIGHT:2,MIDDLE:4,defaultLeft(e){e.buttons||(e.buttons=1)},left(e){return e.buttons===1},right(e){return e.buttons===2},middle(e){return e.buttons===4}};class no extends si{get spaceKey(){return Tn.isHoldSpaceKey()}get left(){return Le.left(this)}get right(){return Le.right(this)}get middle(){return Le.middle(this)}constructor(t){super(t.type),this.bubbles=!0,Object.assign(this,t)}getBoxPoint(t){return t||(t=this.current),t.getBoxPoint(this)}getInnerPoint(t){return t||(t=this.current),t.getInnerPoint(this)}getLocalPoint(t){return t||(t=this.current),t.getLocalPoint(this)}getPagePoint(){return this.current.getPagePoint(this)}getInner(t){return this.getInnerPoint(t)}getLocal(t){return this.getLocalPoint(t)}getPage(){return this.getPagePoint()}static changeName(t,i){zs.changeName(t,i)}}let $=class extends no{};$.POINTER="pointer";$.BEFORE_DOWN="pointer.before_down";$.BEFORE_MOVE="pointer.before_move";$.BEFORE_UP="pointer.before_up";$.DOWN="pointer.down";$.MOVE="pointer.move";$.UP="pointer.up";$.OVER="pointer.over";$.OUT="pointer.out";$.ENTER="pointer.enter";$.LEAVE="pointer.leave";$.TAP="tap";$.DOUBLE_TAP="double_tap";$.CLICK="click";$.DOUBLE_CLICK="double_click";$.LONG_PRESS="long_press";$.LONG_TAP="long_tap";$.MENU="pointer.menu";$.MENU_TAP="pointer.menu_tap";$=Ci([$i()],$);const nn={};let Z=class extends ${static setList(t){this.list=t instanceof ft?t:new ft(t)}static setData(t){this.data=t}static getValidMove(t,i,s){const{draggable:n,dragBounds:r,x:o,y:a}=t,h=t.getLocalPoint(s,null,!0);return h.x+=i.x-o,h.y+=i.y-a,r&&this.getMoveInDragBounds(t.__local,r==="parent"?t.parent.boxBounds:r,h,!0),n==="x"&&(h.y=0),n==="y"&&(h.x=0),h}static getMoveInDragBounds(t,i,s,n){const r=t.x+s.x,o=t.y+s.y,a=r+t.width,h=o+t.height,l=i.x+i.width,c=i.y+i.height;return n||(s=Object.assign({},s)),H.includes(t,i)?(r>i.x?s.x+=i.x-r:a<l&&(s.x+=l-a),o>i.y?s.y+=i.y-o:h<c&&(s.y+=c-h)):(r<i.x?s.x+=i.x-r:a>l&&(s.x+=l-a),o<i.y?s.y+=i.y-o:h>c&&(s.y+=c-h)),s}getPageMove(t){return this.assignMove(t),this.current.getPagePoint(nn,null,!0)}getInnerMove(t,i){return t||(t=this.current),this.assignMove(i),t.getInnerPoint(nn,null,!0)}getLocalMove(t,i){return t||(t=this.current),this.assignMove(i),t.getLocalPoint(nn,null,!0)}getPageTotal(){return this.getPageMove(!0)}getInnerTotal(t){return this.getInnerMove(t,!0)}getLocalTotal(t){return this.getLocalMove(t,!0)}getPageBounds(){const t=this.getPageTotal(),i=this.getPagePoint(),s={};return H.set(s,i.x-t.x,i.y-t.y,t.x,t.y),H.unsign(s),s}assignMove(t){nn.x=t?this.totalX:this.moveX,nn.y=t?this.totalY:this.moveY}};Z.BEFORE_DRAG="drag.before_drag";Z.START="drag.start";Z.DRAG="drag";Z.END="drag.end";Z.OVER="drag.over";Z.OUT="drag.out";Z.ENTER="drag.enter";Z.LEAVE="drag.leave";Z=Ci([$i()],Z);let Dn=class extends ${static setList(t){Z.setList(t)}static setData(t){Z.setData(t)}};Dn.DROP="drop";Dn=Ci([$i()],Dn);let Mt=class extends Z{};Mt.BEFORE_MOVE="move.before_move";Mt.START="move.start";Mt.MOVE="move";Mt.END="move.end";Mt=Ci([$i()],Mt);let Ce=class extends no{};Ce.BEFORE_ROTATE="rotate.before_rotate";Ce.START="rotate.start";Ce.ROTATE="rotate";Ce.END="rotate.end";Ce=Ci([$i()],Ce);let Me=class extends Z{};Me.SWIPE="swipe";Me.LEFT="swipe.left";Me.RIGHT="swipe.right";Me.UP="swipe.up";Me.DOWN="swipe.down";Me=Ci([$i()],Me);let ne=class extends no{};ne.BEFORE_ZOOM="zoom.before_zoom";ne.START="zoom.start";ne.ZOOM="zoom";ne.END="zoom.end";ne=Ci([$i()],ne);let Ie=class extends no{};Ie.DOWN="key.down";Ie.HOLD="key.hold";Ie.UP="key.up";Ie=Ci([$i()],Ie);function cf(e){e.isApp||e.__eventIds.push(e.on_(Mt.BEFORE_MOVE,t=>{e.zoomLayer.move(e.getValidMove(t.moveX,t.moveY))}),e.on_(ne.BEFORE_ZOOM,t=>{const{zoomLayer:i}=e,s=e.getValidScale(t.scale);s!==1&&(j.scaleOf(i,t,s),i.scale=i.__.scaleX*s)}))}function Vw(e){cf(e);const{move:t,zoom:i}=e.config;t.scroll="limit",i.min=1}function Uw(e){const{config:t}=e;(t.wheel||(t.wheel={})).preventDefault=!1,(t.touch||(t.touch={})).preventDefault="auto"}const Yw=ht.get("LeaferTypeCreator"),uf={list:{},register(e,t){oa[e]?Yw.repeat(e):oa[e]=t},run(e,t){const i=oa[e];i&&i(t)}},{list:oa,register:Fh}=uf;Fh("design",cf);Fh("document",Vw);Fh("block",Uw);const Hh=vi.prototype;Hh.initType=function(e){uf.run(e,this)};Hh.getValidMove=function(e,t){const{scroll:i,disabled:s}=this.app.config.move;if(i&&(Math.abs(e)>Math.abs(t)?t=0:e=0,i==="limit")){const{x:n,y:r,width:o,height:a}=new wt(this.__world).addPoint(this.zoomLayer),h=n+o-this.width,l=r+a-this.height;n>=0&&h<=0?e=0:e>0?n+e>0&&(e=-n):e<0&&h+e<0&&(e=-h),r>=0&&l<=0?t=0:t>0?r+t>0&&(t=-r):t<0&&l+t<0&&(t=-l)}return{x:s?0:e,y:s?0:t}};Hh.getValidScale=function(e){const{scaleX:t}=this.zoomLayer.__,{min:i,max:s,disabled:n}=this.app.config.zoom,r=Math.abs(t*e);return r<i?e=i/t:r>s&&(e=s/t),n?1:e};class Gw{get transforming(){return!!(this.moveData||this.zoomData||this.rotateData)}constructor(t){this.interaction=t}move(t){const{interaction:i}=this;if(t.moveType||(t.moveType="move"),!this.moveData){const{path:s}=i.selector.getByPoint(t,i.hitRadius);t.path=s,this.moveData=Object.assign(Object.assign({},t),{moveX:0,moveY:0}),i.cancelHover(),i.emit(Mt.START,this.moveData)}t.path=this.moveData.path,i.emit(Mt.BEFORE_MOVE,t),i.emit(Mt.MOVE,t),this.transformEndWait()}zoom(t){const{interaction:i}=this;if(!this.zoomData){const{path:s}=i.selector.getByPoint(t,i.hitRadius);t.path=s,this.zoomData=Object.assign(Object.assign({},t),{scale:1}),i.cancelHover(),i.emit(ne.START,this.zoomData)}t.path=this.zoomData.path,i.emit(ne.BEFORE_ZOOM,t),i.emit(ne.ZOOM,t),this.transformEndWait()}rotate(t){const{interaction:i}=this;if(!this.rotateData){const{path:s}=i.selector.getByPoint(t,i.hitRadius);t.path=s,this.rotateData=Object.assign(Object.assign({},t),{rotation:0}),i.cancelHover(),i.emit(Ce.START,this.rotateData)}t.path=this.rotateData.path,i.emit(Ce.BEFORE_ROTATE,t),i.emit(Ce.ROTATE,t),this.transformEndWait()}transformEndWait(){clearTimeout(this.transformTimer),this.transformTimer=setTimeout(()=>{this.transformEnd()},this.interaction.config.pointer.transformTime)}transformEnd(){this.moveEnd(),this.zoomEnd(),this.rotateEnd()}moveEnd(){this.moveData&&(this.interaction.emit(Mt.END,this.moveData),this.moveData=null)}zoomEnd(){this.zoomData&&(this.interaction.emit(ne.END,this.zoomData),this.zoomData=null)}rotateEnd(){this.rotateData&&(this.interaction.emit(Ce.END,this.rotateData),this.rotateData=null)}destroy(){this.zoomData=this.moveData=this.rotateData=null}}const We={getMoveEventData(e,t,i){return Object.assign(Object.assign({},i),{x:e.x,y:e.y,moveX:t.x,moveY:t.y})},getRotateEventData(e,t,i){return Object.assign(Object.assign({},i),{x:e.x,y:e.y,rotation:t})},getZoomEventData(e,t,i){return Object.assign(Object.assign({},i),{x:e.x,y:e.y,scale:t})},getDragEventData(e,t,i){return Object.assign(Object.assign({},i),{x:i.x,y:i.y,moveX:i.x-t.x,moveY:i.y-t.y,totalX:i.x-e.x,totalY:i.y-e.y})},getDropEventData(e,t,i){return Object.assign(Object.assign({},e),{list:t,data:i})},getSwipeDirection(e){return e<-45&&e>-135?Me.UP:e>45&&e<135?Me.DOWN:e<=45&&e>=-45?Me.RIGHT:Me.LEFT},getSwipeEventData(e,t,i){return Object.assign(Object.assign({},i),{moveX:t.moveX,moveY:t.moveY,totalX:i.x-e.x,totalY:i.y-e.y,type:Kw.getSwipeDirection(j.getAngle(e,i))})},getBase(e){const t=e.button===1?4:e.button;return{altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,buttons:e.buttons===void 0?1:e.buttons===0?t:e.buttons,origin:e}},pathHasEventType(e,t){const{list:i}=e;for(let s=0,n=i.length;s<n;s++)if(i[s].hasEvent(t))return!0;return!1},filterPathByEventType(e,t){const i=new ft,{list:s}=e;for(let n=0,r=s.length;n<r;n++)s[n].hasEvent(t)&&i.add(s[n]);return i},pathCanDrag(e){return e&&e.list.some(t=>t.draggable||t.editable||!t.isLeafer&&t.hasEvent(Z.DRAG))},pathHasOutside(e){return e&&e.list.some(t=>t.isOutside)}},Kw=We,jc=new ft,{getDragEventData:aa,getDropEventData:Xw,getSwipeEventData:Zw}=We;class qw{constructor(t){this.interaction=t}setDragData(t){this.animateWait&&this.dragEndReal(),this.downData=this.interaction.downData,this.dragData=aa(t,t,t),this.canAnimate=this.canDragOut=!0}getList(t,i){const{proxy:s}=this.interaction.selector,n=s&&s.list.length,r=Z.list||this.draggableList||jc;return this.dragging&&(n?t?jc:new ft(i?[...s.list,...s.dragHoverExclude]:s.list):r)}checkDrag(t,i){const{interaction:s}=this;if(this.moving&&t.buttons<1){this.canAnimate=!1,s.pointerCancel();return}!this.moving&&i&&(this.moving=s.canMove(this.downData)||s.isHoldRightKey||s.isMobileDragEmpty)&&(this.dragData.moveType="drag",s.emit(Mt.START,this.dragData)),this.moving||this.dragStart(t,i),this.drag(t)}dragStart(t,i){this.dragging||(this.dragging=i&&Le.left(t),this.dragging&&(this.interaction.emit(Z.START,this.dragData),this.getDraggableList(this.dragData.path),this.setDragStartPoints(this.realDraggableList=this.getList(!0))))}setDragStartPoints(t){this.dragStartPoints={},t.forEach(i=>this.dragStartPoints[i.innerId]={x:i.x,y:i.y})}getDraggableList(t){let i;for(let s=0,n=t.length;s<n;s++)if(i=t.list[s],(i.draggable||i.editable)&&i.hitSelf&&!i.locked){this.draggableList=new ft(i);break}}drag(t){const{interaction:i,dragData:s,downData:n}=this,{path:r,throughPath:o}=n;this.dragData=aa(n,s,t),o&&(this.dragData.throughPath=o),this.dragData.path=r,this.moving?(this.dragData.moveType="drag",i.emit(Mt.BEFORE_MOVE,this.dragData),i.emit(Mt.MOVE,this.dragData)):this.dragging&&(this.dragReal(),i.emit(Z.BEFORE_DRAG,this.dragData),i.emit(Z.DRAG,this.dragData))}dragReal(){const{running:t}=this.interaction,i=this.realDraggableList;if(i.length&&t){const{totalX:s,totalY:n}=this.dragData;i.forEach(r=>r.draggable&&r.move(Z.getValidMove(r,this.dragStartPoints[r.innerId],{x:s,y:n})))}}dragOverOrOut(t){const{interaction:i}=this,{dragOverPath:s}=this,{path:n}=t;this.dragOverPath=n,s?n.indexAt(0)!==s.indexAt(0)&&(i.emit(Z.OUT,t,s),i.emit(Z.OVER,t,n)):i.emit(Z.OVER,t,n)}dragEnterOrLeave(t){const{interaction:i}=this,{dragEnterPath:s}=this,{path:n}=t;i.emit(Z.LEAVE,t,s,n),i.emit(Z.ENTER,t,n,s),this.dragEnterPath=n}dragEnd(t,i){if(!this.dragging&&!this.moving)return;const{moveX:s,moveY:n}=this.dragData;this.interaction.config.move.dragAnimate&&this.canAnimate&&this.moving&&(Math.abs(s)>1||Math.abs(n)>1)?(t=Object.assign({},t),i=(i||(t.pointerType==="touch"?2:1))*.9,j.move(t,s*i,n*i),this.drag(t),this.animate(()=>{this.dragEnd(t,1)})):this.dragEndReal(t)}dragEndReal(t){const{interaction:i,downData:s,dragData:n}=this;t||(t=n);const{path:r,throughPath:o}=s,a=aa(s,t,t);if(o&&(a.throughPath=o),a.path=r,this.moving&&(this.moving=!1,a.moveType="drag",i.emit(Mt.END,a)),this.dragging){const h=this.getList();this.dragging=!1,i.emit(Z.END,a),this.swipe(t,s,n,a),this.drop(t,h,this.dragEnterPath)}this.autoMoveCancel(),this.dragReset(),this.animate(null,"off")}animate(t,i){const s=t||this.animateWait;s&&this.interaction.target.nextRender(s,null,i),this.animateWait=t}swipe(t,i,s,n){const{interaction:r}=this;if(j.getDistance(i,t)>r.config.pointer.swipeDistance){const o=Zw(i,s,n);this.interaction.emit(o.type,o)}}drop(t,i,s){const n=Xw(t,i,Z.data);n.path=s,this.interaction.emit(Dn.DROP,n),this.interaction.emit(Z.LEAVE,t,s)}dragReset(){Z.list=Z.data=this.draggableList=this.dragData=this.downData=this.dragOverPath=this.dragEnterPath=null}checkDragOut(t){const{interaction:i}=this;this.autoMoveCancel(),this.dragging&&!i.shrinkCanvasBounds.hitPoint(t)&&this.autoMoveOnDragOut(t)}autoMoveOnDragOut(t){const{interaction:i,downData:s,canDragOut:n}=this,{autoDistance:r,dragOut:o}=i.config.move;if(!o||!n||!r)return;const a=i.shrinkCanvasBounds,{x:h,y:l}=a,c=H.maxX(a),u=H.maxY(a),f=t.x<h?r:c<t.x?-r:0,d=t.y<l?r:u<t.y?-r:0;let g=0,m=0;this.autoMoveTimer=setInterval(()=>{g+=f,m+=d,j.move(s,f,d),j.move(this.dragData,f,d),i.move(Object.assign(Object.assign({},t),{moveX:f,moveY:d,totalX:g,totalY:m,moveType:"drag"})),i.pointerMoveReal(t)},10)}autoMoveCancel(){this.autoMoveTimer&&(clearInterval(this.autoMoveTimer),this.autoMoveTimer=0)}destroy(){this.dragReset()}}const Jw=ht.get("emit");function Qw(e,t,i,s){if(!i&&!t.path)return;let n;t.type=e,i?t=Object.assign(Object.assign({},t),{path:i}):i=t.path,t.target=i.indexAt(0);try{for(let r=i.length-1;r>-1;r--){if(n=i.list[r],Ja(n,e,t,!0,s))return;n.isApp&&Vc(n,e,t,!0,s)}for(let r=0,o=i.length;r<o;r++)if(n=i.list[r],n.isApp&&Vc(n,e,t,!1,s),Ja(n,e,t,!1,s))return}catch(r){Jw.error(r)}}const tv=["move","zoom","rotate","key"];function Vc(e,t,i,s,n){if(tv.some(r=>t.startsWith(r))&&e.__.hitChildren&&!df(e,n)){let r;for(let o=0,a=e.children.length;o<a;o++)r=e.children[o],!i.path.has(r)&&r.__.hittable&&Ja(r,t,i,s,n)}}function Ja(e,t,i,s,n){if(e.destroyed)return!1;if(e.__.hitSelf&&!df(e,n)&&(Mc.updateEventStyle&&!s&&Mc.updateEventStyle(e,t),e.hasEvent(t,s))){i.phase=s?1:e===i.target?2:3;const r=zs.get(t,i);if(e.emitEvent(r,s),r.isStop)return!0}return!1}function df(e,t){return t&&t.has(e)}const ev={getData(e){const t=e[0],i=e[1],s=j.getCenter(t.from,i.from),n=j.getCenter(t.to,i.to),r={x:n.x-s.x,y:n.y-s.y},o=j.getDistance(t.from,i.from),h=j.getDistance(t.to,i.to)/o,l=j.getRotation(t.from,i.from,t.to,i.to);return{move:r,scale:h,angle:l,center:n}}},iv={wheel:{zoomSpeed:.5,moveSpeed:.5,rotateSpeed:.5,delta:{x:80/4,y:8},preventDefault:!0},pointer:{hitRadius:5,tapTime:120,longPressTime:800,transformTime:500,hover:!0,dragHover:!0,dragDistance:2,swipeDistance:20,preventDefaultMenu:!0},touch:{preventDefault:!0},multiTouch:{},cursor:!0,keyEvent:!0},{pathHasEventType:ha,getMoveEventData:sv,getZoomEventData:nv,getRotateEventData:rv,pathCanDrag:ov,pathHasOutside:Uc}=We;class av{get dragging(){return this.dragger.dragging}get transforming(){return this.transformer.transforming}get moveMode(){return this.m.drag===!0||this.isHoldSpaceKey||this.isHoldMiddleKey||this.isHoldRightKey&&this.dragger.moving||this.isDragEmpty}get canHover(){return this.p.hover&&!this.config.mobile}get isDragEmpty(){return this.m.dragEmpty&&this.isRootPath(this.hoverData)&&(!this.downData||this.isRootPath(this.downData))}get isMobileDragEmpty(){return this.m.dragEmpty&&!this.canHover&&this.downData&&this.isTreePath(this.downData)}get isHoldMiddleKey(){return this.m.holdMiddleKey&&this.downData&&Le.middle(this.downData)}get isHoldRightKey(){return this.m.holdRightKey&&this.downData&&Le.right(this.downData)}get isHoldSpaceKey(){return this.m.holdSpaceKey&&Tn.isHoldSpaceKey()}get m(){return this.config.move}get p(){return this.config.pointer}get hitRadius(){return this.p.hitRadius}constructor(t,i,s,n){this.config=Ot.clone(iv),this.tapCount=0,this.downKeyMap={},this.target=t,this.canvas=i,this.selector=s,this.defaultPath=new ft(t),this.transformer=new Gw(this),this.dragger=new qw(this),n&&(this.config=Ot.default(n,this.config)),this.__listenEvents()}start(){this.running=!0}stop(){this.running=!1}receive(t){}pointerDown(t,i){t||(t=this.hoverData),t&&(Le.defaultLeft(t),this.updateDownData(t),this.checkPath(t,i),this.downTime=Date.now(),this.emit($.BEFORE_DOWN,t),this.emit($.DOWN,t),Le.left(t)&&(this.tapWait(),this.longPressWait(t)),this.waitRightTap=Le.right(t),this.dragger.setDragData(t),this.isHoldRightKey||this.updateCursor(t))}pointerMove(t){if(t||(t=this.hoverData),!t)return;const{downData:i}=this;i&&Le.defaultLeft(t),(this.canvas.bounds.hitPoint(t)||i)&&(this.pointerMoveReal(t),i&&this.dragger.checkDragOut(t))}pointerMoveReal(t){const{dragHover:i,dragDistance:s}=this.p;if(this.emit($.BEFORE_MOVE,t,this.defaultPath),this.downData){const n=j.getDistance(this.downData,t)>s;n&&(this.waitTap&&this.pointerWaitCancel(),this.waitRightTap=!1),this.dragger.checkDrag(t,n)}this.dragger.moving||(this.updateHoverData(t),this.checkPath(t),this.emit($.MOVE,t),this.dragging&&!i||this.pointerHover(t),this.dragger.dragging&&(this.dragger.dragOverOrOut(t),this.dragger.dragEnterOrLeave(t))),this.updateCursor(this.downData||t)}pointerUp(t){const{downData:i}=this;if(t||(t=i),!i)return;Le.defaultLeft(t),t.multiTouch=i.multiTouch,this.findPath(t);const s=Object.assign(Object.assign({},t),{path:t.path.clone()});t.path.addList(i.path.list),this.checkPath(t),this.downData=null,this.emit($.BEFORE_UP,t),this.emit($.UP,t),this.touchLeave(t),t.isCancel||(this.tap(t),this.menuTap(t)),this.dragger.dragEnd(t),this.updateCursor(s)}pointerCancel(){const t=Object.assign({},this.dragger.dragData);t.isCancel=!0,this.pointerUp(t)}multiTouch(t,i){if(this.config.multiTouch.disabled)return;const{move:s,angle:n,scale:r,center:o}=ev.getData(i);this.rotate(rv(o,n,t)),this.zoom(nv(o,r,t)),this.move(sv(o,s,t))}menu(t){this.findPath(t),this.emit($.MENU,t),this.waitMenuTap=!0,!this.downData&&this.waitRightTap&&this.menuTap(t)}menuTap(t){this.waitRightTap&&this.waitMenuTap&&(this.emit($.MENU_TAP,t),this.waitRightTap=this.waitMenuTap=!1)}move(t){this.transformer.move(t)}zoom(t){this.transformer.zoom(t)}rotate(t){this.transformer.rotate(t)}transformEnd(){this.transformer.transformEnd()}keyDown(t){if(!this.config.keyEvent)return;const{code:i}=t;this.downKeyMap[i]||(this.downKeyMap[i]=!0,Tn.setDownCode(i),this.emit(Ie.HOLD,t,this.defaultPath),this.moveMode&&(this.cancelHover(),this.updateCursor())),this.emit(Ie.DOWN,t,this.defaultPath)}keyUp(t){if(!this.config.keyEvent)return;const{code:i}=t;this.downKeyMap[i]=!1,Tn.setUpCode(i),this.emit(Ie.UP,t,this.defaultPath),this.cursor==="grab"&&this.updateCursor()}pointerHover(t){this.canHover&&(this.pointerOverOrOut(t),this.pointerEnterOrLeave(t))}pointerOverOrOut(t){const{path:i}=t,{overPath:s}=this;this.overPath=i,s?i.indexAt(0)!==s.indexAt(0)&&(this.emit($.OUT,t,s),this.emit($.OVER,t,i)):this.emit($.OVER,t,i)}pointerEnterOrLeave(t){let{path:i}=t;this.downData&&!this.moveMode&&(i=i.clone(),this.downData.path.forEach(n=>i.add(n)));const{enterPath:s}=this;this.enterPath=i,this.emit($.LEAVE,t,s,i),this.emit($.ENTER,t,i,s)}touchLeave(t){t.pointerType==="touch"&&this.enterPath&&(this.emit($.LEAVE,t),this.dragger.dragging&&this.emit(Dn.LEAVE,t))}tap(t){const{pointer:i}=this.config,s=this.longTap(t);if(!i.tapMore&&s||!this.waitTap)return;i.tapMore&&this.emitTap(t);const n=Date.now()-this.downTime,r=[$.DOUBLE_TAP,$.DOUBLE_CLICK].some(o=>ha(t.path,o));n<i.tapTime+50&&r?(this.tapCount++,this.tapCount===2?(this.tapWaitCancel(),this.emitDoubleTap(t)):(clearTimeout(this.tapTimer),this.tapTimer=setTimeout(()=>{i.tapMore||(this.tapWaitCancel(),this.emitTap(t))},i.tapTime))):i.tapMore||(this.tapWaitCancel(),this.emitTap(t))}findPath(t,i){const{hitRadius:s,through:n}=this.p,{bottomList:r}=this,o=this.selector.getByPoint(t,s,Object.assign({bottomList:r,name:t.type},i||{through:n}));return o.throughPath&&(t.throughPath=o.throughPath),t.path=o.path,o.path}isRootPath(t){return t&&t.path.list[0].isLeafer}isTreePath(t){const i=this.target.app;return!i||!i.isApp?!1:i.editor&&!t.path.has(i.editor)&&t.path.has(i.tree)&&!t.target.syncEventer}checkPath(t,i){(i||this.moveMode&&!Uc(t.path))&&(t.path=this.defaultPath)}canMove(t){return t&&(this.moveMode||this.m.drag==="auto"&&!ov(t.path))&&!Uc(t.path)}isDrag(t){return this.dragger.getList().has(t)}isPress(t){return this.downData&&this.downData.path.has(t)}isHover(t){return this.enterPath&&this.enterPath.has(t)}isFocus(t){return this.focusData===t}cancelHover(){const{hoverData:t}=this;t&&(t.path=this.defaultPath,this.pointerHover(t))}updateDownData(t,i,s){const{downData:n}=this;!t&&n&&(t=n),t&&(this.findPath(t,i),s&&n&&t.path.addList(n.path.list),this.downData=t)}updateHoverData(t){t||(t=this.hoverData),t&&(this.findPath(t,{exclude:this.dragger.getList(!1,!0),name:$.MOVE}),this.hoverData=t)}updateCursor(t){if(!this.config.cursor||!this.canHover)return;if(t||(this.updateHoverData(),t=this.downData||this.hoverData),this.dragger.moving)return this.setCursor("grabbing");if(this.canMove(t))return this.setCursor(this.downData?"grabbing":"grab");if(!t)return;let i,s;const{path:n}=t;for(let r=0,o=n.length;r<o&&(i=n.list[r],s=i.syncEventer&&i.syncEventer.cursor||i.cursor,!s);r++);this.setCursor(s)}setCursor(t){this.cursor=t}getLocal(t,i){const s=this.canvas.getClientBounds(i);return{x:t.clientX-s.x,y:t.clientY-s.y}}emitTap(t){this.emit($.TAP,t),this.emit($.CLICK,t)}emitDoubleTap(t){this.emit($.DOUBLE_TAP,t),this.emit($.DOUBLE_CLICK,t)}pointerWaitCancel(){this.tapWaitCancel(),this.longPressWaitCancel()}tapWait(){clearTimeout(this.tapTimer),this.waitTap=!0}tapWaitCancel(){clearTimeout(this.tapTimer),this.waitTap=!1,this.tapCount=0}longPressWait(t){clearTimeout(this.longPressTimer),this.longPressTimer=setTimeout(()=>{this.longPressed=!0,this.emit($.LONG_PRESS,t)},this.p.longPressTime)}longTap(t){let i;return this.longPressed&&(this.emit($.LONG_TAP,t),(ha(t.path,$.LONG_TAP)||ha(t.path,$.LONG_PRESS))&&(i=!0)),this.longPressWaitCancel(),i}longPressWaitCancel(){clearTimeout(this.longPressTimer),this.longPressed=!1}__onResize(){this.shrinkCanvasBounds=new wt(this.canvas.bounds),this.shrinkCanvasBounds.spread(-2)}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(wi.RESIZE,this.__onResize,this)],t.once(Rt.READY,()=>this.__onResize())}__removeListenEvents(){this.target.off_(this.__eventIds),this.__eventIds.length=0}emit(t,i,s,n){this.running&&Qw(t,i,s,n)}destroy(){this.__eventIds.length&&(this.stop(),this.__removeListenEvents(),this.dragger.destroy(),this.transformer.destroy(),this.downData=this.overPath=this.enterPath=null)}}class ff{static set(t,i){this.custom[t]=i}static get(t){return this.custom[t]}}ff.custom={};class hv extends zd{constructor(){super(...arguments),this.maxTotal=1e3,this.pathList=new ft,this.pixelList=new ft}getPixelType(t,i){return this.__autoClear(),this.pixelList.add(t),St.hitCanvas(i)}getPathType(t){return this.__autoClear(),this.pathList.add(t),St.hitCanvas()}clearImageType(){this.__clearLeafList(this.pixelList)}clearPathType(){this.__clearLeafList(this.pathList)}__clearLeafList(t){t.length&&(t.forEach(i=>{i.__hitCanvas&&(i.__hitCanvas.destroy(),i.__hitCanvas=null)}),t.reset())}__autoClear(){this.pathList.length+this.pixelList.length>this.maxTotal&&this.clear()}clear(){this.clearPathType(),this.clearImageType()}}const{toInnerRadiusPointOf:lv,copy:cv,setRadius:uv}=j,rn={},Gn=ns.prototype;Gn.__hitWorld=function(e){if(!this.__.hitSelf)return!1;this.__.hitRadius&&(cv(rn,e),e=rn,uv(e,this.__.hitRadius)),lv(e,this.__world,rn);const{width:t,height:i}=this.__world,s=t<10&&i<10;if(this.__.hitBox||s){if(H.hitRadiusPoint(this.__layout.boxBounds,rn))return!0;if(s)return!1}return(this.__layout.hitCanvasChanged||!this.__hitCanvas)&&(this.__updateHitCanvas(),this.__layout.boundsChanged||(this.__layout.hitCanvasChanged=!1)),this.__hit(rn)};Gn.__hitFill=function(e){var t;return(t=this.__hitCanvas)===null||t===void 0?void 0:t.hitFill(e,this.__.windingRule)};Gn.__hitStroke=function(e,t){var i;return(i=this.__hitCanvas)===null||i===void 0?void 0:i.hitStroke(e,t)};Gn.__hitPixel=function(e){var t;return(t=this.__hitCanvas)===null||t===void 0?void 0:t.hitPixel(e,this.__layout.renderBounds,this.__hitCanvas.hitScale)};Gn.__drawHitPath=function(e){e&&this.__drawRenderPath(e)};const dv=new re,_f=L.prototype;_f.__updateHitCanvas=function(){const e=this.__,{hitCanvasManager:t}=this.leafer,i=(e.__pixelFill||e.__isCanvas)&&e.hitFill==="pixel",s=e.__pixelStroke&&e.hitStroke==="pixel",n=i||s;this.__hitCanvas||(this.__hitCanvas=n?t.getPixelType(this,{contextSettings:{willReadFrequently:!0}}):t.getPathType(this));const r=this.__hitCanvas;if(n){const{renderBounds:o}=this.__layout,a=D.image.hitCanvasSize,h=r.hitScale=ct.set(0,0,a,a).getFitMatrix(o).a,{x:l,y:c,width:u,height:f}=ct.set(o).scale(h);r.resize({width:u,height:f,pixelRatio:1}),r.clear(),oe.patternLocked=!0,this.__renderShape(r,{matrix:dv.setWith(this.__world).scaleWith(1/h).invertWith().translate(-l,-c)},!i,!s),oe.patternLocked=!1,r.resetTransform(),e.__isHitPixel=!0}else e.__isHitPixel&&(e.__isHitPixel=!1);this.__drawHitPath(r),r.setStrokeOptions(e)};_f.__hit=function(e){D.name==="miniapp"&&this.__drawHitPath(this.__hitCanvas);const t=this.__;if(t.__isHitPixel&&this.__hitPixel(e))return!0;const{hitFill:i}=t,s=(t.fill||t.__isCanvas)&&(i==="path"||i==="pixel"&&!(t.__pixelFill||t.__isCanvas))||i==="all";if(s&&this.__hitFill(e))return!0;const{hitStroke:n,__strokeWidth:r}=t,o=t.stroke&&(n==="path"||n==="pixel"&&!t.__pixelStroke)||n==="all";if(!s&&!o)return!1;const a=e.radiusX*2;let h=a;if(o)switch(t.strokeAlign){case"inside":if(h+=r*2,!s&&this.__hitFill(e)&&this.__hitStroke(e,h))return!0;h=a;break;case"center":h+=r;break;case"outside":if(h+=r*2,!s){if(!this.__hitFill(e)&&this.__hitStroke(e,h))return!0;h=a}break}return h?this.__hitStroke(e,h):!1};const pf=L.prototype,gf=ti.prototype,yf=Bt.prototype;gf.__updateHitCanvas=yf.__updateHitCanvas=function(){this.stroke||this.cornerRadius||(this.fill||this.__.__isCanvas)&&this.hitFill==="pixel"||this.hitStroke==="all"?pf.__updateHitCanvas.call(this):this.__hitCanvas&&(this.__hitCanvas=null)};gf.__hitFill=yf.__hitFill=function(e){return this.__hitCanvas?pf.__hitFill.call(this,e):H.hitRadiusPoint(this.__layout.boxBounds,e)};const mf=L.prototype,fv=Dt.prototype;function zh(e){return e.leafer?e.leafer.selector:D.selector||(D.selector=St.selector())}mf.find=function(e,t){return zh(this).getBy(e,this,!1,t)};mf.findOne=function(e,t){return zh(this).getBy(e,this,!0,t)};fv.pick=function(e,t){return this.__layout.update(),t||(t={}),zh(this).getByPoint(e,t.hitRadius||0,Object.assign(Object.assign({},t),{target:this}))};const Nh=Ah.prototype;Nh.hitFill=function(e,t){return t?this.context.isPointInPath(e.x,e.y,t):this.context.isPointInPath(e.x,e.y)};Nh.hitStroke=function(e,t){return this.strokeWidth=t,this.context.isPointInStroke(e.x,e.y)};Nh.hitPixel=function(e,t,i=1){let{x:s,y:n,radiusX:r,radiusY:o}=e;t&&(s-=t.x,n-=t.y),ct.set(s-r,n-o,r*2,o*2).scale(i).ceil();const{data:a}=this.context.getImageData(ct.x,ct.y,ct.width||1,ct.height||1);for(let h=0,l=a.length;h<l;h+=4)if(a[h+3]>0)return!0;return a[3]>0};const Yc=ht.get("LeaferCanvas");class wf extends Ah{set zIndex(t){const{style:i}=this.view;i.zIndex=t,this.setAbsolute(this.view)}set childIndex(t){const{view:i,parentView:s}=this;if(i&&s){const n=s.children[t];n?(this.setAbsolute(n),s.insertBefore(i,n)):s.appendChild(n)}}init(){const{config:t}=this,i=t.view||t.canvas;i?this.__createViewFrom(i):this.__createView();const{style:s}=this.view;if(s.display||(s.display="block"),this.parentView=this.view.parentElement,this.parentView){const n=this.parentView.style;n.webkitUserSelect=n.userSelect="none"}D.syncDomFont&&!this.parentView&&(s.display="none",document.body.appendChild(this.view)),this.__createContext(),this.autoLayout||this.resize(t)}set backgroundColor(t){this.view.style.backgroundColor=t}get backgroundColor(){return this.view.style.backgroundColor}set hittable(t){this.view.style.pointerEvents=t?"auto":"none"}get hittable(){return this.view.style.pointerEvents!=="none"}__createView(){this.view=document.createElement("canvas")}__createViewFrom(t){let i=typeof t=="string"?document.getElementById(t):t;if(i)if(i instanceof HTMLCanvasElement)this.view=i;else{let s=i;if(i===window||i===document){const r=document.createElement("div"),{style:o}=r;o.position="absolute",o.top=o.bottom=o.left=o.right="0px",document.body.appendChild(r),s=r}this.__createView();const n=this.view;s.hasChildNodes()&&(this.setAbsolute(n),s.style.position||(s.style.position="relative")),s.appendChild(n)}else Yc.error(`no id: ${t}`),this.__createView()}setAbsolute(t){const{style:i}=t;i.position="absolute",i.top=i.left="0px"}updateViewSize(){const{width:t,height:i,pixelRatio:s}=this,{style:n}=this.view;n.width=t+"px",n.height=i+"px",this.view.width=Math.ceil(t*s),this.view.height=Math.ceil(i*s)}updateClientBounds(){this.clientBounds=this.view.getBoundingClientRect()}startAutoLayout(t,i){if(this.resizeListener=i,t){this.autoBounds=t;try{this.resizeObserver=new ResizeObserver(n=>{this.updateClientBounds();for(const r of n)this.checkAutoBounds(r.contentRect)});const s=this.parentView;s?(this.resizeObserver.observe(s),this.checkAutoBounds(s.getBoundingClientRect())):(this.checkAutoBounds(this.view),Yc.warn("no parent"))}catch{this.imitateResizeObserver()}}else window.addEventListener("resize",()=>{const s=D.devicePixelRatio;if(this.pixelRatio!==s){const{width:n,height:r}=this;this.emitResize({width:n,height:r,pixelRatio:s})}})}imitateResizeObserver(){this.autoLayout&&(this.parentView&&this.checkAutoBounds(this.parentView.getBoundingClientRect()),D.requestRender(this.imitateResizeObserver.bind(this)))}checkAutoBounds(t){const i=this.view,{x:s,y:n,width:r,height:o}=this.autoBounds.getBoundsFrom(t),a={width:r,height:o,pixelRatio:D.devicePixelRatio};if(!this.isSameSize(a)){const{style:h}=i;h.marginLeft=s+"px",h.marginTop=n+"px",this.emitResize(a)}}stopAutoLayout(){this.autoLayout=!1,this.resizeListener=null,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}emitResize(t){const i={};Ot.copyAttrs(i,this,Ge),this.resize(t),this.resizeListener&&this.width!==void 0&&this.resizeListener(new wi(t,i))}unrealCanvas(){if(!this.unreal&&this.parentView){const t=this.view;t&&t.remove(),this.view=this.parentView,this.unreal=!0}}destroy(){if(this.view){if(this.stopAutoLayout(),!this.unreal){const t=this.view;t.parentElement&&t.remove()}super.destroy()}}}qd(CanvasRenderingContext2D.prototype);qd(Path2D.prototype);const{mineType:la,fileType:_v}=gi;Object.assign(St,{canvas:(e,t)=>new wf(e,t),image:e=>new Jd(e)});function pv(e,t){D.origin={createCanvas(i,s){const n=document.createElement("canvas");return n.width=i,n.height=s,n},canvasToDataURL:(i,s,n)=>i.toDataURL(la(s),n),canvasToBolb:(i,s,n)=>new Promise(r=>i.toBlob(r,la(s),n)),canvasSaveAs:(i,s,n)=>{const r=i.toDataURL(la(_v(s)),n);return D.origin.download(r,s)},download(i,s){return new Promise(n=>{let r=document.createElement("a");r.href=i,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),n()})},loadImage(i){return new Promise((s,n)=>{const r=new Image,{crossOrigin:o}=D.image;o&&(r.setAttribute("crossOrigin",o),r.crossOrigin=o),r.onload=()=>{s(r)},r.onerror=a=>{n(a)},r.src=D.image.getRealURL(i)})}},D.event={stopDefault(i){i.preventDefault()},stopNow(i){i.stopImmediatePropagation()},stop(i){i.stopPropagation()}},D.canvas=St.canvas(),D.conicGradientSupport=!!D.canvas.context.createConicGradient}D.name="web";D.isMobile="ontouchstart"in window;D.requestRender=function(e){window.requestAnimationFrame(e)};ye(D,"devicePixelRatio",{get(){return Math.max(1,devicePixelRatio)}});const{userAgent:Is}=navigator;Is.indexOf("Firefox")>-1?(D.conicGradientRotate90=!0,D.intWheelDeltaY=!0,D.syncDomFont=!0):Is.indexOf("Safari")>-1&&Is.indexOf("Chrome")===-1&&(D.fullImageShadow=!0);Is.indexOf("Windows")>-1?(D.os="Windows",D.intWheelDeltaY=!0):Is.indexOf("Mac")>-1?D.os="Mac":Is.indexOf("Linux")>-1&&(D.os="Linux");class gv{get childrenChanged(){return this.hasAdd||this.hasRemove||this.hasVisible}get updatedList(){if(this.hasRemove){const t=new ft;return this.__updatedList.list.forEach(i=>{i.leafer&&t.add(i)}),t}else return this.__updatedList}constructor(t,i){this.totalTimes=0,this.config={},this.__updatedList=new ft,this.target=t,i&&(this.config=Ot.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}update(){this.changed=!0,this.running&&this.target.emit(at.REQUEST)}__onAttrChange(t){this.__updatedList.add(t.target),this.update()}__onChildEvent(t){t.type===Pt.ADD?(this.hasAdd=!0,this.__pushChild(t.child)):(this.hasRemove=!0,this.__updatedList.add(t.parent)),this.update()}__pushChild(t){this.__updatedList.add(t),t.isBranch&&this.__loopChildren(t)}__loopChildren(t){const{children:i}=t;for(let s=0,n=i.length;s<n;s++)this.__pushChild(i[s])}__onRquestData(){this.target.emitEvent(new ki(ki.DATA,{updatedList:this.updatedList})),this.__updatedList=new ft,this.totalTimes++,this.changed=!1,this.hasVisible=!1,this.hasRemove=!1,this.hasAdd=!1}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(Ze.CHANGE,this.__onAttrChange,this),t.on_([Pt.ADD,Pt.REMOVE],this.__onChildEvent,this),t.on_(ki.REQUEST,this.__onRquestData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=null,this.__updatedList=null)}}const{updateAllMatrix:yv,updateBounds:Gc,updateAllWorldOpacity:mv}=ae,{pushAllChildBranch:wv,pushAllParent:Kc}=Vn;function vv(e,t){let i;e.list.forEach(s=>{i=s.__layout,t.without(s)&&!i.proxyZoom&&(i.matrixChanged?(yv(s,!0),t.add(s),s.isBranch&&wv(s,t),Kc(s,t)):i.boundsChanged&&(t.add(s),s.isBranch&&(s.__tempNumber=0),Kc(s,t)))})}function xv(e){let t,i,s;e.sort(!0),e.levels.forEach(n=>{t=e.levelMap[n];for(let r=0,o=t.length;r<o;r++){if(i=t[r],i.isBranch&&i.__tempNumber){s=i.children;for(let a=0,h=s.length;a<h;a++)s[a].isBranch||Gc(s[a])}Gc(i)}})}function bv(e){let t;e.list.forEach(i=>{t=i.__layout,t.opacityChanged&&mv(i),t.stateStyleChanged&&setTimeout(()=>t.stateStyleChanged&&i.updateState()),i.__updateChange()})}const{worldBounds:Xc}=io,Ev={x:0,y:0,width:1e5,height:1e5};class Zc{constructor(t){this.updatedBounds=new wt,this.beforeBounds=new wt,this.afterBounds=new wt,t instanceof Array&&(t=new ft(t)),this.updatedList=t}setBefore(){this.beforeBounds.setListWithFn(this.updatedList.list,Xc)}setAfter(){const{list:t}=this.updatedList;t.some(i=>i.noBounds)?this.afterBounds.set(Ev):this.afterBounds.setListWithFn(t,Xc),this.updatedBounds.setList([this.beforeBounds,this.afterBounds])}merge(t){this.updatedList.addList(t.updatedList.list),this.beforeBounds.add(t.beforeBounds),this.afterBounds.add(t.afterBounds),this.updatedBounds.add(t.updatedBounds)}destroy(){this.updatedList=null}}const{updateAllMatrix:Cv,updateAllChange:Tv}=ae,ca=ht.get("Layouter");class ro{constructor(t,i){this.totalTimes=0,this.config={},this.__levelList=new J0,this.target=t,i&&(this.config=Ot.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}layout(){if(!this.running)return;const{target:t}=this;this.times=0;try{t.emit(ot.START),this.layoutOnce(),t.emitEvent(new ot(ot.END,this.layoutedBlocks,this.times))}catch(i){ca.error(i)}this.layoutedBlocks=null}layoutAgain(){this.layouting?this.waitAgain=!0:this.layoutOnce()}layoutOnce(){if(this.layouting)return ca.warn("layouting");if(this.times>3)return ca.warn("layout max times");this.times++,this.totalTimes++,this.layouting=!0,this.target.emit(ki.REQUEST),this.totalTimes>1?this.partLayout():this.fullLayout(),this.layouting=!1,this.waitAgain&&(this.waitAgain=!1,this.layoutOnce())}partLayout(){var t;if(!(!((t=this.__updatedList)===null||t===void 0)&&t.length))return;const i=ke.start("PartLayout"),{target:s,__updatedList:n}=this,{BEFORE:r,LAYOUT:o,AFTER:a}=ot,h=this.getBlocks(n);h.forEach(l=>l.setBefore()),s.emitEvent(new ot(r,h,this.times)),this.extraBlock=null,n.sort(),vv(n,this.__levelList),xv(this.__levelList),bv(n),this.extraBlock&&h.push(this.extraBlock),h.forEach(l=>l.setAfter()),s.emitEvent(new ot(o,h,this.times)),s.emitEvent(new ot(a,h,this.times)),this.addBlocks(h),this.__levelList.reset(),this.__updatedList=null,ke.end(i)}fullLayout(){const t=ke.start("FullLayout"),{target:i}=this,{BEFORE:s,LAYOUT:n,AFTER:r}=ot,o=this.getBlocks(new ft(i));i.emitEvent(new ot(s,o,this.times)),ro.fullLayout(i),o.forEach(a=>{a.setAfter()}),i.emitEvent(new ot(n,o,this.times)),i.emitEvent(new ot(r,o,this.times)),this.addBlocks(o),ke.end(t)}static fullLayout(t){Cv(t,!0),t.isBranch?Vn.updateBounds(t):ae.updateBounds(t),Tv(t)}addExtra(t){if(!this.__updatedList.has(t)){const{updatedList:i,beforeBounds:s}=this.extraBlock||(this.extraBlock=new Zc([]));i.length?s.add(t.__world):s.set(t.__world),i.add(t)}}createBlock(t){return new Zc(t)}getBlocks(t){return[this.createBlock(t)]}addBlocks(t){this.layoutedBlocks?this.layoutedBlocks.push(...t):this.layoutedBlocks=t}__onReceiveWatchData(t){this.__updatedList=t.data.updatedList}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(ot.REQUEST,this.layout,this),t.on_(ot.AGAIN,this.layoutAgain,this),t.on_(ki.DATA,this.__onReceiveWatchData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.config=null)}}const Ui=ht.get("Renderer");class Rv{get needFill(){return!!(!this.canvas.allowBackgroundColor&&this.config.fill)}constructor(t,i,s){this.FPS=60,this.totalTimes=0,this.times=0,this.config={usePartRender:!0,maxFPS:60},this.target=t,this.canvas=i,s&&(this.config=Ot.default(s,this.config)),this.__listenEvents(),this.__requestRender()}start(){this.running=!0}stop(){this.running=!1}update(){this.changed=!0}requestLayout(){this.target.emit(ot.REQUEST)}render(t){if(!(this.running&&this.canvas.view)){this.changed=!0;return}const{target:i}=this;this.times=0,this.totalBounds=new wt,Ui.log(i.innerName,"--->");try{i.app.emit(at.CHILD_START,i),this.emitRender(at.START),this.renderOnce(t),this.emitRender(at.END,this.totalBounds),oe.clearRecycled()}catch(s){this.rendering=!1,Ui.error(s)}Ui.log("-------------|")}renderAgain(){this.rendering?this.waitAgain=!0:this.renderOnce()}renderOnce(t){if(this.rendering)return Ui.warn("rendering");if(this.times>3)return Ui.warn("render max times");if(this.times++,this.totalTimes++,this.rendering=!0,this.changed=!1,this.renderBounds=new wt,this.renderOptions={},t)this.emitRender(at.BEFORE),t();else{if(this.requestLayout(),this.ignore){this.ignore=this.rendering=!1;return}this.emitRender(at.BEFORE),this.config.usePartRender&&this.totalTimes>1?this.partRender():this.fullRender()}this.emitRender(at.RENDER,this.renderBounds,this.renderOptions),this.emitRender(at.AFTER,this.renderBounds,this.renderOptions),this.updateBlocks=null,this.rendering=!1,this.waitAgain&&(this.waitAgain=!1,this.renderOnce())}partRender(){const{canvas:t,updateBlocks:i}=this;if(!i)return Ui.warn("PartRender: need update attr");this.mergeBlocks(),i.forEach(s=>{t.bounds.hit(s)&&!s.isEmpty()&&this.clipRender(s)})}clipRender(t){const i=ke.start("PartRender"),{canvas:s}=this,n=t.getIntersect(s.bounds),r=t.includes(this.target.__world),o=new wt(n);s.save(),r&&!ht.showRepaint?s.clear():(n.spread(10+1/this.canvas.pixelRatio).ceil(),s.clearWorld(n,!0),s.clipWorld(n,!0)),this.__render(n,r,o),s.restore(),ke.end(i)}fullRender(){const t=ke.start("FullRender"),{canvas:i}=this;i.save(),i.clear(),this.__render(i.bounds,!0),i.restore(),ke.end(t)}__render(t,i,s){const n=t.includes(this.target.__world)?{includes:i}:{bounds:t,includes:i};this.needFill&&this.canvas.fillWorld(t,this.config.fill),ht.showRepaint&&this.canvas.strokeWorld(t,"red"),this.target.__render(this.canvas,n),this.renderBounds=s=s||t,this.renderOptions=n,this.totalBounds.isEmpty()?this.totalBounds=s:this.totalBounds.add(s),ht.showHitView&&this.renderHitView(n),ht.showBoundsView&&this.renderBoundsView(n),this.canvas.updateRender(s)}renderHitView(t){}renderBoundsView(t){}addBlock(t){this.updateBlocks||(this.updateBlocks=[]),this.updateBlocks.push(t)}mergeBlocks(){const{updateBlocks:t}=this;if(t){const i=new wt;i.setList(t),t.length=0,t.push(i)}}__requestRender(){const t=Date.now();D.requestRender(()=>{this.FPS=Math.min(60,Math.ceil(1e3/(Date.now()-t))),this.running&&(this.changed&&this.canvas.view&&this.render(),this.target.emit(at.NEXT)),this.target&&this.__requestRender()})}__onResize(t){if(!this.canvas.unreal){if(t.bigger||!t.samePixelRatio){const{width:i,height:s}=t.old;if(!new wt(0,0,i,s).includes(this.target.__world)||this.needFill||!t.samePixelRatio){this.addBlock(this.canvas.bounds),this.target.forceUpdate("surface");return}}this.addBlock(new wt(0,0,1,1)),this.changed=!0}}__onLayoutEnd(t){t.data&&t.data.map(i=>{let s;i.updatedList&&i.updatedList.list.some(n=>(s=!n.__world.width||!n.__world.height,s&&(n.isLeafer||Ui.tip(n.innerName,": empty"),s=!n.isBranch||n.isBranchLeaf),s)),this.addBlock(s?this.canvas.bounds:i.updatedBounds)})}emitRender(t,i,s){this.target.emitEvent(new at(t,this.times,i,s))}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(at.REQUEST,this.update,this),t.on_(ot.END,this.__onLayoutEnd,this),t.on_(at.AGAIN,this.renderAgain,this),t.on_(wi.RESIZE,this.__onResize,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.canvas=this.config=null)}}const{hitRadiusPoint:Sv}=H;class Pv{constructor(t,i){this.target=t,this.selector=i}getByPoint(t,i,s){i||(i=0),s||(s={});const n=s.through||!1,r=s.ignoreHittable||!1,o=s.target||this.target;this.exclude=s.exclude||null,this.point={x:t.x,y:t.y,radiusX:i,radiusY:i},this.findList=new ft(s.findList),s.findList||this.hitBranch(o);const{list:a}=this.findList,h=this.getBestMatchLeaf(a,s.bottomList,r),l=r?this.getPath(h):this.getHitablePath(h);return this.clear(),n?{path:l,target:h,throughPath:a.length?this.getThroughPath(a):l}:{path:l,target:h}}getBestMatchLeaf(t,i,s){if(t.length){let n;this.findList=new ft;const{x:r,y:o}=this.point,a={x:r,y:o,radiusX:0,radiusY:0};for(let h=0,l=t.length;h<l;h++)if(n=t[h],(s||ae.worldHittable(n))&&(this.hitChild(n,a),this.findList.length))return this.findList.list[0]}if(i){for(let n=0,r=i.length;n<r;n++)if(this.hitChild(i[n].target,this.point,i[n].proxy),this.findList.length)return this.findList.list[0]}return t[0]}getPath(t){const i=new ft;for(;t;)i.add(t),t=t.parent;return this.target&&i.add(this.target),i}getHitablePath(t){const i=this.getPath(t&&t.hittable?t:null);let s,n=new ft;for(let r=i.list.length-1;r>-1&&(s=i.list[r],!(!s.__.hittable||(n.addAt(s,0),!s.__.hitChildren)));r--);return n}getThroughPath(t){const i=new ft,s=[];for(let a=t.length-1;a>-1;a--)s.push(this.getPath(t[a]));let n,r,o;for(let a=0,h=s.length;a<h;a++){n=s[a],r=s[a+1];for(let l=0,c=n.length;l<c&&(o=n.list[l],!(r&&r.has(o)));l++)i.add(o)}return i}hitBranch(t){this.eachFind(t.children,t.__onlyHitMask)}eachFind(t,i){let s,n;const{point:r}=this,o=t.length;for(let a=o-1;a>-1;a--)s=t[a],!(!s.__.visible||i&&!s.__.mask)&&(n=s.__.hitRadius?!0:Sv(s.__world,r),s.isBranch?(n||s.__ignoreHitWorld)&&(this.eachFind(s.children,s.__onlyHitMask),s.isBranchLeaf&&this.hitChild(s,r)):n&&this.hitChild(s,r))}hitChild(t,i,s){if(!(this.exclude&&this.exclude.has(t))&&t.__hitWorld(i)){const{parent:n}=t;if(n&&n.__hasMask&&!t.__.mask&&!n.children.some(r=>r.__.mask&&r.__hitWorld(i)))return;this.findList.add(s||t)}}clear(){this.point=null,this.findList=null,this.exclude=null}destroy(){this.clear()}}const{Yes:Lv,NoAndSkip:Ov,YesAndSkip:Bv}=Hr,qc={},Jc={},Qc={};class kv{constructor(t,i){this.config={},this.innerIdMap={},this.idMap={},this.methods={id:(s,n)=>s.id===n?(this.target&&(this.idMap[n]=s),1):0,innerId:(s,n)=>s.innerId===n?(this.target&&(this.innerIdMap[n]=s),1):0,className:(s,n)=>s.className===n?1:0,tag:(s,n)=>s.__tag===n?1:0,tags:(s,n)=>n[s.__tag]?1:0},this.target=t,i&&(this.config=Ot.default(i,this.config)),this.picker=new Pv(t,this),t&&this.__listenEvents()}getBy(t,i,s,n){switch(typeof t){case"number":const r=this.getByInnerId(t,i);return s?r:r?[r]:[];case"string":switch(t[0]){case"#":qc.id=t.substring(1),t=qc;break;case".":Jc.className=t.substring(1),t=Jc;break;default:Qc.tag=t,t=Qc}case"object":if(t.id!==void 0){const o=this.getById(t.id,i);return s?o:o?[o]:[]}else if(t.tag){const{tag:o}=t,a=o instanceof Array;return this.getByMethod(a?this.methods.tags:this.methods.tag,i,s,a?Ot.toMap(o):o)}else return this.getByMethod(this.methods.className,i,s,t.className);case"function":return this.getByMethod(t,i,s,n)}}getByPoint(t,i,s){return D.name==="node"&&this.target&&this.target.emit(ot.CHECK_UPDATE),this.picker.getByPoint(t,i,s)}getByInnerId(t,i){const s=this.innerIdMap[t];return s||(this.eachFind(this.toChildren(i),this.methods.innerId,null,t),this.findLeaf)}getById(t,i){const s=this.idMap[t];return s&&ae.hasParent(s,i||this.target)?s:(this.eachFind(this.toChildren(i),this.methods.id,null,t),this.findLeaf)}getByClassName(t,i){return this.getByMethod(this.methods.className,i,!1,t)}getByTag(t,i){return this.getByMethod(this.methods.tag,i,!1,t)}getByMethod(t,i,s,n){const r=s?null:[];return this.eachFind(this.toChildren(i),t,r,n),r||this.findLeaf}eachFind(t,i,s,n){let r,o;for(let a=0,h=t.length;a<h;a++){if(r=t[a],o=i(r,n),o===Lv||o===Bv)if(s)s.push(r);else{this.findLeaf=r;return}r.isBranch&&o<Ov&&this.eachFind(r.children,i,s,n)}}toChildren(t){return this.findLeaf=null,[t||this.target]}__onRemoveChild(t){const{id:i,innerId:s}=t.child;this.idMap[i]&&delete this.idMap[i],this.innerIdMap[s]&&delete this.innerIdMap[s]}__checkIdChange(t){if(t.attrName==="id"){const i=t.oldValue;this.idMap[i]&&delete this.idMap[i]}}__listenEvents(){this.__eventIds=[this.target.on_(Pt.REMOVE,this.__onRemoveChild,this),this.target.on_(Ze.CHANGE,this.__checkIdChange,this)]}__removeListenEvents(){this.target.off_(this.__eventIds),this.__eventIds.length=0}destroy(){this.__eventIds.length&&(this.__removeListenEvents(),this.picker.destroy(),this.findLeaf=null,this.innerIdMap={},this.idMap={})}}Object.assign(St,{watcher:(e,t)=>new gv(e,t),layouter:(e,t)=>new ro(e,t),renderer:(e,t,i)=>new Rv(e,t,i),selector:(e,t)=>new kv(e,t)});D.layout=ro.fullLayout;const ie={convert(e,t){const i=We.getBase(e),s=Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:e.width,height:e.height,pointerType:e.pointerType,pressure:e.pressure});return s.pointerType==="pen"&&(s.tangentialPressure=e.tangentialPressure,s.tiltX=e.tiltX,s.tiltY=e.tiltY,s.twist=e.twist),s},convertMouse(e,t){const i=We.getBase(e);return Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:1,height:1,pointerType:"mouse",pressure:.5})},convertTouch(e,t){const i=ie.getTouch(e),s=We.getBase(e);return Object.assign(Object.assign({},s),{x:t.x,y:t.y,width:1,height:1,pointerType:"touch",multiTouch:e.touches.length>1,pressure:i.force})},getTouch(e){return e.targetTouches[0]||e.changedTouches[0]}},tu={getMove(e,t){let{moveSpeed:i}=t,{deltaX:s,deltaY:n}=e;return e.shiftKey&&!s&&(s=n,n=0),s>50&&(s=Math.max(50,s/3)),n>50&&(n=Math.max(50,n/3)),{x:-s*i*2,y:-n*i*2}},getScale(e,t){let i,s=1,{zoomMode:n,zoomSpeed:r}=t;const o=e.deltaY||e.deltaX;if(n?(i=n==="mouse"?!0:!e.deltaX&&(D.intWheelDeltaY?Math.abs(o)>17:Math.ceil(o)!==o),(e.shiftKey||e.metaKey||e.ctrlKey)&&(i=!0)):i=!e.shiftKey&&(e.metaKey||e.ctrlKey),i){r=Wt.within(r,0,1);const a=e.deltaY?t.delta.y:t.delta.x;s=1-o/(a*4)*r,s<.5&&(s=.5),s>=1.5&&(s=1.5)}return s}},eu={convert(e){const t=We.getBase(e);return Object.assign(Object.assign({},t),{code:e.code,key:e.key})}},{getMoveEventData:Mv,getZoomEventData:iu,getRotateEventData:Av,pathCanDrag:Dv}=We;class Iv extends av{__listenEvents(){super.__listenEvents();const t=this.view=this.canvas.view;this.viewEvents={pointerdown:this.onPointerDown,mousedown:this.onMouseDown,touchstart:this.onTouchStart,contextmenu:this.onContextMenu,wheel:this.onWheel,gesturestart:this.onGesturestart,gesturechange:this.onGesturechange,gestureend:this.onGestureend},this.windowEvents={pointermove:this.onPointerMove,pointerup:this.onPointerUp,pointercancel:this.onPointerCancel,mousemove:this.onMouseMove,mouseup:this.onMouseUp,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchCancel,keydown:this.onKeyDown,keyup:this.onKeyUp,scroll:this.onScroll};const{viewEvents:i,windowEvents:s}=this;for(let n in i)i[n]=i[n].bind(this),t.addEventListener(n,i[n]);for(let n in s)s[n]=s[n].bind(this),window.addEventListener(n,s[n])}__removeListenEvents(){super.__removeListenEvents();const{viewEvents:t,windowEvents:i}=this;for(let s in t)this.view.removeEventListener(s,t[s]),this.viewEvents={};for(let s in i)window.removeEventListener(s,i[s]),this.windowEvents={}}getTouches(t){const i=[];for(let s=0,n=t.length;s<n;s++)i.push(t[s]);return i}preventDefaultPointer(t){const{pointer:i}=this.config;i.preventDefault&&t.preventDefault()}preventDefaultWheel(t){const{wheel:i}=this.config;i.preventDefault&&t.preventDefault()}preventWindowPointer(t){return!this.downData&&t.target!==this.view}onKeyDown(t){this.keyDown(eu.convert(t))}onKeyUp(t){this.keyUp(eu.convert(t))}onContextMenu(t){this.config.pointer.preventDefaultMenu&&t.preventDefault(),this.menu(ie.convert(t,this.getLocal(t)))}onScroll(){this.canvas.updateClientBounds()}onPointerDown(t){this.preventDefaultPointer(t),!(this.config.pointer.touch||this.useMultiTouch)&&(this.usePointer||(this.usePointer=!0),this.pointerDown(ie.convert(t,this.getLocal(t))))}onPointerMove(t){this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t)||(this.usePointer||(this.usePointer=!0),this.pointerMove(ie.convert(t,this.getLocal(t,!0))))}onPointerUp(t){this.downData&&this.preventDefaultPointer(t),!(this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t))&&this.pointerUp(ie.convert(t,this.getLocal(t)))}onPointerCancel(){this.useMultiTouch||this.pointerCancel()}onMouseDown(t){this.preventDefaultPointer(t),!(this.useTouch||this.usePointer)&&this.pointerDown(ie.convertMouse(t,this.getLocal(t)))}onMouseMove(t){this.useTouch||this.usePointer||this.preventWindowPointer(t)||this.pointerMove(ie.convertMouse(t,this.getLocal(t,!0)))}onMouseUp(t){this.downData&&this.preventDefaultPointer(t),!(this.useTouch||this.usePointer||this.preventWindowPointer(t))&&this.pointerUp(ie.convertMouse(t,this.getLocal(t)))}onMouseCancel(){this.useTouch||this.usePointer||this.pointerCancel()}onTouchStart(t){const i=ie.getTouch(t),s=this.getLocal(i,!0),{preventDefault:n}=this.config.touch;(n===!0||n==="auto"&&Dv(this.findPath(s)))&&t.preventDefault(),this.multiTouchStart(t),!this.usePointer&&(this.touchTimer&&(window.clearTimeout(this.touchTimer),this.touchTimer=0),this.useTouch=!0,this.pointerDown(ie.convertTouch(t,s)))}onTouchMove(t){if(this.multiTouchMove(t),this.usePointer||this.preventWindowPointer(t))return;const i=ie.getTouch(t);this.pointerMove(ie.convertTouch(t,this.getLocal(i)))}onTouchEnd(t){if(this.multiTouchEnd(),this.usePointer||this.preventWindowPointer(t))return;this.touchTimer&&clearTimeout(this.touchTimer),this.touchTimer=setTimeout(()=>{this.useTouch=!1},500);const i=ie.getTouch(t);this.pointerUp(ie.convertTouch(t,this.getLocal(i)))}onTouchCancel(){this.usePointer||this.pointerCancel()}multiTouchStart(t){this.useMultiTouch=t.touches.length>1,this.touches=this.useMultiTouch?this.getTouches(t.touches):void 0,this.useMultiTouch&&this.pointerCancel()}multiTouchMove(t){if(this.useMultiTouch&&t.touches.length>1){const i=this.getTouches(t.touches),s=this.getKeepTouchList(this.touches,i);s.length>1&&(this.multiTouch(We.getBase(t),s),this.touches=i)}}multiTouchEnd(){this.touches=null,this.useMultiTouch=!1,this.transformEnd()}getKeepTouchList(t,i){let s;const n=[];return t.forEach(r=>{s=i.find(o=>o.identifier===r.identifier),s&&n.push({from:this.getLocal(r),to:this.getLocal(s)})}),n}getLocalTouchs(t){return t.map(i=>this.getLocal(i))}onWheel(t){this.preventDefaultWheel(t);const{wheel:i}=this.config;if(i.disabled)return;const s=i.getScale?i.getScale(t,i):tu.getScale(t,i),n=this.getLocal(t),r=We.getBase(t);s!==1?this.zoom(iu(n,s,r)):this.move(Mv(n,i.getMove?i.getMove(t,i):tu.getMove(t,i),r))}onGesturestart(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.lastGestureScale=1,this.lastGestureRotation=0)}onGesturechange(t){if(this.useMultiTouch)return;this.preventDefaultWheel(t);const i=this.getLocal(t),s=We.getBase(t),n=t.scale/this.lastGestureScale,r=t.rotation-this.lastGestureRotation;let{rotateSpeed:o}=this.config.wheel;o=Wt.within(o,0,1),this.zoom(iu(i,n*n,s)),this.rotate(Av(i,r/Math.PI*180*(o/4+.1),s)),this.lastGestureScale=t.scale,this.lastGestureRotation=t.rotation}onGestureend(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.transformEnd())}setCursor(t){super.setCursor(t);const i=[];this.eachCursor(t,i),typeof i[i.length-1]=="object"&&i.push("default"),this.canvas.view.style.cursor=i.map(s=>typeof s=="object"?`url(${s.url}) ${s.x||0} ${s.y||0}`:s).join(",")}eachCursor(t,i,s=0){if(s++,t instanceof Array)t.forEach(n=>this.eachCursor(n,i,s));else{const n=typeof t=="string"&&ff.get(t);n&&s<2?this.eachCursor(n,i,s):i.push(t)}}destroy(){this.view&&(super.destroy(),this.view=null,this.touches=null)}}function Ws(e,t){let i;const{rows:s,decorationY:n,decorationHeight:r}=e.__.__textDrawData;for(let o=0,a=s.length;o<a;o++)i=s[o],i.text?t.fillText(i.text,i.x,i.y):i.data&&i.data.forEach(h=>{t.fillText(h.char,h.x,i.y)}),n&&t.fillRect(i.x,i.y+n,i.width,r)}function Wv(e,t,i){i.fillStyle=e,t.__.__font?Ws(t,i):t.__.windingRule?i.fill(t.__.windingRule):i.fill()}function $v(e,t,i){let s;const{windingRule:n,__font:r}=t.__;for(let o=0,a=e.length;o<a;o++)s=e[o],!(s.image&&os.checkImage(t,i,s,!r))&&s.style&&(i.fillStyle=s.style,s.transform?(i.save(),i.transform(s.transform),s.blendMode&&(i.blendMode=s.blendMode),r?Ws(t,i):n?i.fill(n):i.fill(),i.restore()):s.blendMode?(i.saveBlendMode(s.blendMode),r?Ws(t,i):n?i.fill(n):i.fill(),i.restoreBlendMode()):r?Ws(t,i):n?i.fill(n):i.fill())}function jh(e,t,i){const{strokeAlign:s}=t.__,n=typeof e!="string";switch(s){case"center":i.setStroke(n?void 0:e,t.__.strokeWidth,t.__),n?Rn(e,!0,t,i):In(t,i);break;case"inside":su("inside",e,n,t,i);break;case"outside":su("outside",e,n,t,i);break}}function su(e,t,i,s,n){const{__strokeWidth:r,__font:o}=s.__,a=n.getSameCanvas(!0,!0);a.setStroke(i?void 0:t,r*2,s.__),a.font=o,i?Rn(t,!0,s,a):In(s,a),a.blendMode=e==="outside"?"destination-out":"destination-in",Ws(s,a),a.blendMode="normal",s.__worldFlipped?n.copyWorldByReset(a,s.__nowWorld):n.copyWorldToInner(a,s.__nowWorld,s.__layout.renderBounds),a.recycle(s.__nowWorld)}function In(e,t){let i;const{rows:s,decorationY:n,decorationHeight:r}=e.__.__textDrawData;for(let o=0,a=s.length;o<a;o++)i=s[o],i.text?t.strokeText(i.text,i.x,i.y):i.data&&i.data.forEach(h=>{t.strokeText(h.char,h.x,i.y)}),n&&t.strokeRect(i.x,i.y+n,i.width,r)}function Rn(e,t,i,s){let n;for(let r=0,o=e.length;r<o;r++)n=e[r],!(n.image&&os.checkImage(i,s,n,!1))&&n.style&&(s.strokeStyle=n.style,n.blendMode?(s.saveBlendMode(n.blendMode),t?In(i,s):s.stroke(),s.restoreBlendMode()):t?In(i,s):s.stroke())}function Fv(e,t,i){const s=t.__,{__strokeWidth:n,strokeAlign:r,__font:o}=s;if(n)if(o)jh(e,t,i);else switch(r){case"center":i.setStroke(e,n,s),i.stroke();break;case"inside":i.save(),i.setStroke(e,n*2,s),s.windingRule?i.clip(s.windingRule):i.clip(),i.stroke(),i.restore();break;case"outside":const a=i.getSameCanvas(!0,!0);a.setStroke(e,n*2,s),t.__drawRenderPath(a),a.stroke(),s.windingRule?a.clip(s.windingRule):a.clip(),a.clearWorld(t.__layout.renderBounds),t.__worldFlipped?i.copyWorldByReset(a,t.__nowWorld):i.copyWorldToInner(a,t.__nowWorld,t.__layout.renderBounds),a.recycle(t.__nowWorld);break}}function Hv(e,t,i){const s=t.__,{__strokeWidth:n,strokeAlign:r,__font:o}=s;if(n)if(o)jh(e,t,i);else switch(r){case"center":i.setStroke(void 0,n,s),Rn(e,!1,t,i);break;case"inside":i.save(),i.setStroke(void 0,n*2,s),s.windingRule?i.clip(s.windingRule):i.clip(),Rn(e,!1,t,i),i.restore();break;case"outside":const{renderBounds:a}=t.__layout,h=i.getSameCanvas(!0,!0);t.__drawRenderPath(h),h.setStroke(void 0,n*2,s),Rn(e,!1,t,h),s.windingRule?h.clip(s.windingRule):h.clip(),h.clearWorld(a),t.__worldFlipped?i.copyWorldByReset(h,t.__nowWorld):i.copyWorldToInner(h,t.__nowWorld,a),h.recycle(t.__nowWorld);break}}const{getSpread:zv,getOuterOf:Nv,getByMove:jv,getIntersectData:Vv}=H;function Uv(e,t,i){const s=t.getSameCanvas(),n=e.__nowWorld;let r,o,a,h,{scaleX:l,scaleY:c}=n;if(l<0&&(l=-l),c<0&&(c=-c),t.bounds.includes(n))h=s,r=a=n;else{const{renderShapeSpread:u}=e.__layout,f=Vv(u?zv(t.bounds,l===c?u*l:[u*c,u*l]):t.bounds,n);o=t.bounds.getFitMatrix(f);let{a:d,d:g}=o;if(o.a<1&&(h=t.getSameCanvas(),e.__renderShape(h,i),l*=d,c*=g),a=Nv(n,o),r=jv(a,-o.e,-o.f),i.matrix){const{matrix:m}=i;o.multiply(m),d*=m.scaleX,g*=m.scaleY}i=Object.assign(Object.assign({},i),{matrix:o.withScale(d,g)})}return e.__renderShape(s,i),{canvas:s,matrix:o,bounds:r,worldCanvas:h,shapeBounds:a,scaleX:l,scaleY:c}}let Qa;function Yv(e,t){const i=t.__,s=[];let n=i.__input[e],r;n instanceof Array||(n=[n]),Qa=os.recycleImage(e,i);for(let o=0,a=n.length,h;o<a;o++)h=Gv(e,n[o],t),h&&s.push(h);i["_"+e]=s.length?s:void 0,s.length&&s[0].image&&(r=s[0].image.hasOpacityPixel),e==="fill"?i.__pixelFill=r:i.__pixelStroke=r}function Gv(e,t,i){if(typeof t!="object"||t.visible===!1||t.opacity===0)return;const{boxBounds:s}=i.__layout;switch(t.type){case"solid":let{type:n,blendMode:r,color:o,opacity:a}=t;return{type:n,blendMode:r,style:rs.string(o,a)};case"image":return os.image(i,e,t,s,!Qa||!Qa[t.url]);case"linear":return Pr.linearGradient(t,s);case"radial":return Pr.radialGradient(t,s);case"angular":return Pr.conicGradient(t,s);default:return t.r!==void 0?{type:"solid",style:rs.string(t)}:void 0}}const Kv={compute:Yv,fill:Wv,fills:$v,fillText:Ws,stroke:Fv,strokes:Hv,strokeText:jh,drawTextStroke:In,shape:Uv};let on={};const{get:Vh,rotateOfOuter:vf,translate:Ls,scaleOfOuter:Xv,scale:xf,rotate:bf}=U;function Ef(e,t,i,s,n,r,o){const a=Vh();Ls(a,t.x+i,t.y+s),xf(a,n,r),o&&vf(a,{x:t.x+t.width/2,y:t.y+t.height/2},o),e.transform=a}function Cf(e,t,i,s,n,r,o){const a=Vh();Ls(a,t.x+i,t.y+s),n&&xf(a,n,r),o&&bf(a,o),e.transform=a}function Tf(e,t,i,s,n,r,o,a,h,l){const c=Vh();if(h)if(l==="center")vf(c,{x:i/2,y:s/2},h);else switch(bf(c,h),h){case 90:Ls(c,s,0);break;case 180:Ls(c,i,s);break;case 270:Ls(c,0,i);break}on.x=t.x+n,on.y=t.y+r,Ls(c,on.x,on.y),o&&Xv(c,on,o,a),e.transform=c}const{get:Zv,translate:qv}=U,Jv=new wt,ua={},da={};function Rf(e,t,i,s){const{blendMode:n,sync:r}=i;n&&(e.blendMode=n),r&&(e.sync=r),e.data=Sf(i,s,t)}function Sf(e,t,i){let{width:s,height:n}=i;e.padding&&(t=Jv.set(t).shrink(e.padding)),e.mode==="strench"&&(e.mode="stretch");const{opacity:r,mode:o,align:a,offset:h,scale:l,size:c,rotation:u,repeat:f}=e,d=t.width===s&&t.height===n,g={mode:o},m=a!=="center"&&(u||0)%180===90,x=m?n:s,C=m?s:n;let b=0,P=0,v,A;if(!o||o==="cover"||o==="fit"){if(!d||u){const Y=t.width/x,G=t.height/C;v=A=o==="fit"?Math.min(Y,G):Math.max(Y,G),b+=(t.width-s*v)/2,P+=(t.height-n*A)/2}}else(l||c)&&(Wt.getScaleData(l,c,i,da),v=da.scaleX,A=da.scaleY);if(a){const Y={x:b,y:P,width:x,height:C};v&&(Y.width*=v,Y.height*=A),Cg.toPoint(a,Y,t,ua,!0),b+=ua.x,P+=ua.y}switch(h&&(b+=h.x,P+=h.y),o){case"stretch":d||(s=t.width,n=t.height);break;case"normal":case"clip":(b||P||v||u)&&Cf(g,t,b,P,v,A,u);break;case"repeat":(!d||v||u)&&Tf(g,t,s,n,b,P,v,A,u,a),f||(g.repeat="repeat");break;case"fit":case"cover":default:v&&Ef(g,t,b,P,v,A,u)}return g.transform||(t.x||t.y)&&(g.transform=Zv(),qv(g.transform,t.x,t.y)),v&&o!=="stretch"&&(g.scaleX=v,g.scaleY=A),g.width=s,g.height=n,r&&(g.opacity=r),f&&(g.repeat=typeof f=="string"?f==="x"?"repeat-x":"repeat-y":"repeat"),g}let an,Qv=new wt;const{isSame:tx}=H;function ex(e,t,i,s,n){let r,o;const a=oe.get(i);return an&&i===an.paint&&tx(s,an.boxBounds)?r=an.leafPaint:(r={type:i.type,image:a},an=a.use>1?{leafPaint:r,paint:i,boxBounds:Qv.set(s)}:null),(n||a.loading)&&(o={image:a,attrName:t,attrValue:i}),a.ready?(nu(e,t,i,a,r,s),n&&(ru(e,o),ou(e,o))):a.error?n&&au(e,o,a.error):(n&&(fa(e,!0),ru(e,o)),r.loadId=a.load(()=>{fa(e,!1),e.destroyed||(nu(e,t,i,a,r,s)&&(a.hasOpacityPixel&&(e.__layout.hitCanvasChanged=!0),e.forceUpdate("surface")),ou(e,o)),r.loadId=null},h=>{fa(e,!1),au(e,o,h),r.loadId=null})),r}function nu(e,t,i,s,n,r){if(t==="fill"&&!e.__.__naturalWidth){const o=e.__;if(o.__naturalWidth=s.width/o.pixelRatio,o.__naturalHeight=s.height/o.pixelRatio,o.__autoSide)return e.forceUpdate("width"),e.__proxyData&&(e.setProxyAttr("width",o.width),e.setProxyAttr("height",o.height)),!1}return n.data||Rf(n,s,i,r),!0}function ru(e,t){Uh(e,Qe.LOAD,t)}function ou(e,t){Uh(e,Qe.LOADED,t)}function au(e,t,i){t.error=i,e.forceUpdate("surface"),Uh(e,Qe.ERROR,t)}function Uh(e,t,i){e.hasEvent(t)&&e.emitEvent(new Qe(t,i))}function fa(e,t){const{leafer:i}=e;i&&i.viewReady&&(i.renderer.ignore=t)}const{get:hu,scale:lu,copy:cu}=U,{ceil:uu,abs:du}=Math;function th(e,t,i){let{scaleX:s,scaleY:n}=oe.patternLocked?e.__world:e.__nowWorld;const r=s+"-"+n+"-"+i;if(t.patternId!==r&&!e.destroyed){s=du(s),n=du(n);const{image:o,data:a}=t;let h,l,{width:c,height:u,scaleX:f,scaleY:d,opacity:g,transform:m,repeat:x}=a;f&&(l=hu(),cu(l,m),lu(l,1/f,1/d),s*=f,n*=d),s*=i,n*=i,c*=s,u*=n;const C=c*u;if(!x&&C>D.image.maxCacheSize)return!1;let b=D.image.maxPatternSize;if(!o.isSVG){const A=o.width*o.height;b>A&&(b=A)}C>b&&(h=Math.sqrt(C/b)),h&&(s/=h,n/=h,c/=h,u/=h),f&&(s/=f,n/=d),(m||s!==1||n!==1)&&(l||(l=hu(),m&&cu(l,m)),lu(l,1/s,1/n));const P=o.getCanvas(uu(c)||1,uu(u)||1,g),v=o.getPattern(P,x||D.origin.noRepeat||"no-repeat",l,t);return t.style=v,t.patternId=r,!0}else return!1}function Yh(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(c){try{l(s.next(c))}catch(u){o(u)}}function h(c){try{l(s.throw(c))}catch(u){o(u)}}function l(c){c.done?r(c.value):n(c.value).then(a,h)}l((s=s.apply(e,[])).next())})}const{abs:fu}=Math;function ix(e,t,i,s){const{scaleX:n,scaleY:r}=oe.patternLocked?e.__world:e.__nowWorld,{pixelRatio:o}=t;if(!i.data||i.patternId===n+"-"+r+"-"+o&&!Ds.running)return!1;{const{data:a}=i;if(s)if(a.repeat)s=!1;else{let{width:h,height:l}=a;h*=fu(n)*o,l*=fu(r)*o,a.scaleX&&(h*=a.scaleX,l*=a.scaleY),s=h*l>D.image.maxCacheSize||Ds.running}return s?(t.save(),e.windingRule?t.clip(e.windingRule):t.clip(),i.blendMode&&(t.blendMode=i.blendMode),a.opacity&&(t.opacity*=a.opacity),a.transform&&t.transform(a.transform),t.drawImage(i.image.view,0,0,a.width,a.height),t.restore(),!0):(!i.style||i.sync||Ds.running?th(e,i,o):i.patternTask||(i.patternTask=oe.patternTasker.add(()=>Yh(this,void 0,void 0,function*(){i.patternTask=null,t.bounds.hit(e.__nowWorld)&&th(e,i,o),e.forceUpdate("surface")}),300)),!1)}}function sx(e,t){const i=t["_"+e];if(i instanceof Array){let s,n,r,o;for(let a=0,h=i.length;a<h;a++)s=i[a].image,o=s&&s.url,o&&(n||(n={}),n[o]=!0,oe.recycle(s),s.loading&&(r||(r=t.__input&&t.__input[e]||[],r instanceof Array||(r=[r])),s.unload(i[a].loadId,!r.some(l=>l.url===o))));return n}return null}const nx={image:ex,checkImage:ix,createPattern:th,recycleImage:sx,createData:Rf,getPatternData:Sf,fillOrFitMode:Ef,clipMode:Cf,repeatMode:Tf},{toPoint:_u}=mi,_a={},pa={};function rx(e,t){let{from:i,to:s,type:n,blendMode:r,opacity:o}=e;_u(i||"top",t,_a),_u(s||"bottom",t,pa);const a=D.canvas.createLinearGradient(_a.x,_a.y,pa.x,pa.y);Gh(a,e.stops,o);const h={type:n,style:a};return r&&(h.blendMode=r),h}function Gh(e,t,i){if(t){let s;for(let n=0,r=t.length;n<r;n++)s=t[n],typeof s=="string"?e.addColorStop(n/(r-1),rs.string(s,i)):e.addColorStop(s.offset,rs.string(s.color,i))}}const{getAngle:ox,getDistance:ax}=j,{get:hx,rotateOfOuter:pu,scaleOfOuter:gu}=U,{toPoint:yu}=mi,Yi={},ga={};function lx(e,t){let{from:i,to:s,type:n,opacity:r,blendMode:o,stretch:a}=e;yu(i||"center",t,Yi),yu(s||"bottom",t,ga);const h=D.canvas.createRadialGradient(Yi.x,Yi.y,0,Yi.x,Yi.y,ax(Yi,ga));Gh(h,e.stops,r);const l={type:n,style:h},c=Kh(t,Yi,ga,a,!0);return c&&(l.transform=c),o&&(l.blendMode=o),l}function Kh(e,t,i,s,n){let r;const{width:o,height:a}=e;if(o!==a||s){const h=ox(t,i);r=hx(),n?(gu(r,t,o/a*(s||1),1),pu(r,t,h+90)):(gu(r,t,1,o/a*(s||1)),pu(r,t,h))}return r}const{getDistance:cx}=j,{toPoint:mu}=mi,ci={},ya={};function ux(e,t){let{from:i,to:s,type:n,opacity:r,blendMode:o,stretch:a}=e;mu(i||"center",t,ci),mu(s||"bottom",t,ya);const h=D.conicGradientSupport?D.canvas.createConicGradient(0,ci.x,ci.y):D.canvas.createRadialGradient(ci.x,ci.y,0,ci.x,ci.y,cx(ci,ya));Gh(h,e.stops,r);const l={type:n,style:h},c=Kh(t,ci,ya,a||1,D.conicGradientRotate90);return c&&(l.transform=c),o&&(l.blendMode=o),l}const dx={linearGradient:rx,radialGradient:lx,conicGradient:ux,getTransform:Kh},{copy:wu,toOffsetOutBounds:fx}=H,ee={},yr={};function _x(e,t,i){let s,n;const{__nowWorld:r,__layout:o}=e,{shadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:u,scaleY:f}=i,d=t.getSameCanvas(),g=a.length-1;fx(l,yr),a.forEach((m,x)=>{d.setWorldShadow(yr.offsetX+m.x*u,yr.offsetY+m.y*f,m.blur*u,m.color),n=m.spread?1+m.spread*2/(o.boxBounds.width+(o.strokeBoxSpread||0)*2):0,Pf(d,yr,n,i),s=l,m.box&&(d.restore(),d.save(),h&&(d.copyWorld(d,l,r,"copy"),s=r),h?d.copyWorld(h,r,r,"destination-out"):d.copyWorld(i.canvas,c,l,"destination-out")),e.__worldFlipped?t.copyWorldByReset(d,s,r,m.blendMode):t.copyWorldToInner(d,s,o.renderBounds,m.blendMode),g&&x<g&&d.clearWorld(s,!0)}),d.recycle(s)}function Pf(e,t,i,s){const{bounds:n,shapeBounds:r}=s;if(D.fullImageShadow){if(wu(ee,e.bounds),ee.x+=t.x-r.x,ee.y+=t.y-r.y,i){const{matrix:o}=s;ee.x-=(n.x+(o?o.e:0)+n.width/2)*(i-1),ee.y-=(n.y+(o?o.f:0)+n.height/2)*(i-1),ee.width*=i,ee.height*=i}e.copyWorld(s.canvas,e.bounds,ee)}else i&&(wu(ee,t),ee.x-=t.width/2*(i-1),ee.y-=t.height/2*(i-1),ee.width*=i,ee.height*=i),e.copyWorld(s.canvas,r,i?ee:t)}const{toOffsetOutBounds:px}=H,mr={};function gx(e,t,i){let s,n;const{__nowWorld:r,__layout:o}=e,{innerShadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:u,scaleY:f}=i,d=t.getSameCanvas(),g=a.length-1;px(l,mr),a.forEach((m,x)=>{d.save(),d.setWorldShadow(mr.offsetX+m.x*u,mr.offsetY+m.y*f,m.blur*u),n=m.spread?1-m.spread*2/(o.boxBounds.width+(o.strokeBoxSpread||0)*2):0,Pf(d,mr,n,i),d.restore(),h?(d.copyWorld(d,l,r,"copy"),d.copyWorld(h,r,r,"source-out"),s=r):(d.copyWorld(i.canvas,c,l,"source-out"),s=l),d.fillWorld(s,m.color,"source-in"),e.__worldFlipped?t.copyWorldByReset(d,s,r,m.blendMode):t.copyWorldToInner(d,s,o.renderBounds,m.blendMode),g&&x<g&&d.clearWorld(s,!0)}),d.recycle(s)}function yx(e,t,i){const{blur:s}=e.__;i.setWorldBlur(s*e.__nowWorld.a),i.copyWorldToInner(t,e.__nowWorld,e.__layout.renderBounds),i.filter="none"}function mx(e,t,i){}const wx={shadow:_x,innerShadow:gx,blur:yx,backgroundBlur:mx},{excludeRenderBounds:vx}=io;Dt.prototype.__renderMask=function(e,t){let i,s,n,r,o;const{children:a}=this;for(let h=0,l=a.length;h<l;h++)i=a[h],!(i.__.mask&&(o&&(vu(this,o,e,n,s,r),s=n=null),i.__.mask==="path"?(i.opacity<1?(o="opacity-path",r=i.opacity,n||(n=ma(e))):(o="path",e.save()),i.__clip(n||e,t)):(o="alpha",s||(s=ma(e)),n||(n=ma(e)),i.__render(s,t)),i.__.mask!=="clipping"))&&(vx(i,t)||i.__render(n||e,t));vu(this,o,e,n,s,r)};function vu(e,t,i,s,n,r){switch(t){case"alpha":xx(e,i,s,n);break;case"opacity-path":Lf(e,i,s,r);break;case"path":i.restore()}}function ma(e){return e.getSameCanvas(!1,!0)}function xx(e,t,i,s){const n=e.__nowWorld;i.resetTransform(),i.opacity=1,i.useMask(s,n),s.recycle(n),Lf(e,t,i,1)}function Lf(e,t,i,s){const n=e.__nowWorld;t.resetTransform(),t.opacity=s,t.copyWorld(i,n),i.recycle(n)}const bx="¥￥＄€£￡¢￠",Ex="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz",Cx="《（「〈『〖【〔｛┌＜‘“＝"+bx,Tx="》）」〉』〗】〕｝┐＞’”！？，、。：；‰",Rx="≮≯≈≠＝…",Sx="—／～｜┆·",Px=`{[(<'"`+Cx,Of=`>)]}%!?,.:;'"`+Tx,Lx=Of+"_#~&*+\\=|"+Rx,Ox="- "+Sx,Bx=[[19968,40959],[13312,19903],[131072,173791],[173824,177983],[177984,178207],[178208,183983],[183984,191471],[196608,201551],[201552,205743],[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12736,12783],[12800,13055],[13056,13311],[63744,64255],[65072,65103],[127488,127743],[194560,195103]],kx=new RegExp(Bx.map(([e,t])=>`[\\u${e.toString(16)}-\\u${t.toString(16)}]`).join("|"));function Kn(e){const t={};return e.split("").forEach(i=>t[i]=!0),t}const Mx=Kn(Ex),Ax=Kn(Px),Dx=Kn(Of),Ix=Kn(Lx),Wx=Kn(Ox);var Vr;(function(e){e[e.Letter=0]="Letter",e[e.Single=1]="Single",e[e.Before=2]="Before",e[e.After=3]="After",e[e.Symbol=4]="Symbol",e[e.Break=5]="Break"})(Vr||(Vr={}));const{Letter:xu,Single:$x,Before:Fx,After:Hx,Symbol:zx,Break:Nx}=Vr;function jx(e){return Mx[e]?xu:Wx[e]?Nx:Ax[e]?Fx:Dx[e]?Hx:Ix[e]?zx:kx.test(e)?$x:xu}const Vx={trimRight(e){const{words:t}=e;let i=0,s=t.length,n;for(let r=s-1;r>-1&&(n=t[r].data[0],n.char===" ");r--)i++,e.width-=n.width;i&&t.splice(s-i,i)}};function Ux(e,t,i){switch(t){case"title":return i?e.toUpperCase():e;case"upper":return e.toUpperCase();case"lower":return e.toLowerCase();default:return e}}const{trimRight:Yx}=Vx,{Letter:wa,Single:hn,Before:bu,After:va,Symbol:Gx,Break:Eu}=Vr;let Sn,Ue,Xt,se,xa,Se,ui,Wn,Vs,be,Si,ba,ln,Os,$n,Ps=[],Or,eh;function Kx(e,t,i){$n=e,Ps=e.rows,Or=e.bounds,eh=!Or.width&&!i.autoSizeAlign;const{__letterSpacing:s,paraIndent:n,textCase:r}=i,{canvas:o}=D,{width:a,height:h}=Or;if(a||h||s||r!=="none"){const c=i.textWrap!=="none",u=i.textWrap==="break";Os=!0,Si=null,Wn=ui=Vs=Xt=se=0,Sn={data:[]},Ue={words:[]};for(let f=0,d=t.length;f<d;f++)Se=t[f],Se===`
`?(Xt&&Gi(),Ue.paraEnd=!0,cn(),Os=!0):(be=jx(Se),be===wa&&r!=="none"&&(Se=Ux(Se,r,!Xt)),ui=o.measureText(Se).width,s&&(s<0&&(Vs=ui),ui+=s),ba=be===hn&&(Si===hn||Si===wa)||Si===hn&&be!==va,ln=(be===bu||be===hn)&&(Si===Gx||Si===va),xa=Os&&n?a-n:a,c&&a&&se+Xt+ui>xa&&(u?(Xt&&Gi(),se&&cn()):(ln||(ln=be===wa&&Si==va),(ba||ln||be===Eu||be===bu||be===hn||Xt+ui>xa)&&Xt&&Gi(),se&&cn())),Se===" "&&Os!==!0&&se+Xt===0||(be===Eu?(Se===" "&&Xt&&Gi(),Ea(Se,ui),Gi()):((ba||ln)&&Xt&&Gi(),Ea(Se,ui))),Si=be);Xt&&Gi(),se&&cn(),Ps.length>0&&(Ps[Ps.length-1].paraEnd=!0)}else t.split(`
`).forEach(c=>{$n.paraNumber++,se=o.measureText(c).width,Ps.push({x:n||0,text:c,width:se,paraStart:!0}),eh&&Bf()})}function Ea(e,t){Vs&&!Wn&&(Wn=Vs),Sn.data.push({char:e,width:t}),Xt+=t}function Gi(){se+=Xt,Sn.width=Xt,Ue.words.push(Sn),Sn={data:[]},Xt=0}function cn(){Os&&($n.paraNumber++,Ue.paraStart=!0,Os=!1),Vs&&(Ue.startCharSize=Wn,Ue.endCharSize=Vs,Wn=0),Ue.width=se,Or.width?Yx(Ue):eh&&Bf(),Ps.push(Ue),Ue={words:[]},se=0}function Bf(){se>($n.maxWidth||0)&&($n.maxWidth=se)}const Xx=0,Cu=1,Tu=2;function Zx(e,t,i,s){const{rows:n}=e,{textAlign:r,paraIndent:o,letterSpacing:a}=t;let h,l,c,u,f;n.forEach(d=>{d.words&&(c=o&&d.paraStart?o:0,l=i&&r==="justify"&&d.words.length>1?(i-d.width-c)/(d.words.length-1):0,u=a||d.isOverflow?Xx:l>.01?Cu:Tu,d.isOverflow&&!a&&(d.textMode=!0),u===Tu?(d.x+=c,qx(d)):(d.x+=c,h=d.x,d.data=[],d.words.forEach(g=>{u===Cu?(f={char:"",x:h},h=Jx(g.data,h,f),(d.isOverflow||f.char!==" ")&&d.data.push(f)):h=Qx(g.data,h,d.data,d.isOverflow),!d.paraEnd&&l&&(h+=l,d.width+=l)})),d.words=null)})}function qx(e){e.text="",e.words.forEach(t=>{t.data.forEach(i=>{e.text+=i.char})})}function Jx(e,t,i){return e.forEach(s=>{i.char+=s.char,t+=s.width}),t}function Qx(e,t,i,s){return e.forEach(n=>{(s||n.char!==" ")&&(n.x=t,i.push(n)),t+=n.width}),t}function tb(e,t){const{rows:i,bounds:s}=e,{__lineHeight:n,__baseLine:r,__letterSpacing:o,__clipText:a,textAlign:h,verticalAlign:l,paraSpacing:c,autoSizeAlign:u}=t;let{x:f,y:d,width:g,height:m}=s,x=n*i.length+(c?c*(e.paraNumber-1):0),C=r;if(a&&x>m)x=Math.max(m,n),e.overflow=i.length;else if(m||u)switch(l){case"middle":d+=(m-x)/2;break;case"bottom":d+=m-x}C+=d;let b,P,v,A=g||u?g:e.maxWidth;for(let Y=0,G=i.length;Y<G;Y++){if(b=i[Y],b.x=f,b.width<g||b.width>g&&!a)switch(h){case"center":b.x+=(A-b.width)/2;break;case"right":b.x+=A-b.width}b.paraStart&&c&&Y>0&&(C+=c),b.y=C,C+=n,e.overflow>Y&&C>x&&(b.isOverflow=!0,e.overflow=Y+1),P=b.x,v=b.width,o<0&&(b.width<0?(v=-b.width+t.fontSize+o,P-=v,v+=t.fontSize):v-=o),P<s.x&&(s.x=P),v>s.width&&(s.width=v),a&&g&&g<v&&(b.isOverflow=!0,e.overflow||(e.overflow=i.length))}s.y=d,s.height=x}function eb(e,t,i,s){if(!s)return;const{rows:n,overflow:r}=e;let{textOverflow:o}=t;if(n.splice(r),o&&o!=="show"){o==="hide"?o="":o==="ellipsis"&&(o="...");let a,h;const l=o?D.canvas.measureText(o).width:0,c=i+s-l;(t.textWrap==="none"?n:[n[r-1]]).forEach(f=>{if(f.isOverflow&&f.data){let d=f.data.length-1;for(let g=d;g>-1&&(a=f.data[g],h=a.x+a.width,!(g===d&&h<c));g--){if(h<c&&a.char!==" "){f.data.splice(g+1),f.width-=a.width;break}f.width-=a.width}f.width+=l,f.data.push({char:o,x:h}),f.textMode&&ib(f)}})}}function ib(e){e.text="",e.data.forEach(t=>{e.text+=t.char}),e.data=null}function sb(e,t){const{fontSize:i}=t;switch(e.decorationHeight=i/11,t.textDecoration){case"under":e.decorationY=i*.15;break;case"delete":e.decorationY=-i*.35}}const{top:Br,right:kf,bottom:Mf,left:kr}=Ua;function nb(e,t){typeof e!="string"&&(e=String(e));let i=0,s=0,n=t.__getInput("width")||0,r=t.__getInput("height")||0;const{textDecoration:o,__font:a,__padding:h}=t;h&&(n?(i=h[kr],n-=h[kf]+h[kr]):t.autoSizeAlign||(i=h[kr]),r?(s=h[Br],r-=h[Br]+h[Mf]):t.autoSizeAlign||(s=h[Br]));const l={bounds:{x:i,y:s,width:n,height:r},rows:[],paraNumber:0,font:D.canvas.font=a};return Kx(l,e,t),h&&rb(h,l,t,n,r),tb(l,t),Zx(l,t,n),l.overflow&&eb(l,t,i,n),o!=="none"&&sb(l,t),l}function rb(e,t,i,s,n){if(!s&&i.autoSizeAlign)switch(i.textAlign){case"left":wr(t,"x",e[kr]);break;case"right":wr(t,"x",-e[kf])}if(!n&&i.autoSizeAlign)switch(i.verticalAlign){case"top":wr(t,"y",e[Br]);break;case"bottom":wr(t,"y",-e[Mf])}}function wr(e,t,i){const{bounds:s,rows:n}=e;s[t]+=i;for(let r=0;r<n.length;r++)n[r][t]+=i}const ob={getDrawData:nb};function ab(e,t){const i=typeof t=="number"&&t!==1;if(typeof e=="string")if(i&&rs.object)e=rs.object(e);else return e;let s=e.a===void 0?1:e.a;i&&(s*=t);const n=e.r+","+e.g+","+e.b;return s===1?"rgb("+n+")":"rgba("+n+","+s+")"}const hb={string:ab},{setPoint:lb,addPoint:cb,toBounds:ub}=zn;function db(e){const{width:t,height:i}=e.view,{data:s}=e.context.getImageData(0,0,t,i);let n,r,o,a=0;for(let l=0;l<s.length;l+=4)s[l+3]!==0&&(n=a%t,r=(a-n)/t,o?cb(o,n,r):lb(o={},n,r)),a++;const h=new wt;return ub(o,h),h.scale(1/e.pixelRatio).ceil()}const fb={export(e,t,i){this.running=!0;const s=gi.fileType(t),n=t.includes(".");return i=gi.getExportOptions(i),_b(r=>new Promise(o=>{const a=u=>{r(u),o(),this.running=!1},{toURL:h}=D,{download:l}=D.origin;if(s==="json")return n&&l(h(JSON.stringify(e.toJSON(i.json)),"text"),t),a({data:n?!0:e.toJSON(i.json)});if(s==="svg")return n&&l(h(e.toSVG(),"svg"),t),a({data:n?!0:e.toSVG()});const{leafer:c}=e;c?(Af(e),c.waitViewCompleted(()=>Yh(this,void 0,void 0,function*(){let u,f,d=1,g=1;const{worldTransform:m,isLeafer:x,isFrame:C}=e,{slice:b,trim:P,onCanvas:v}=i,A=i.smooth===void 0?c.config.smooth:i.smooth,Y=i.contextSettings||c.config.contextSettings,G=i.screenshot||e.isApp,it=x&&G&&i.fill===void 0?e.fill:i.fill,Et=gi.isOpaqueImage(t)||it,st=new re;if(G)u=G===!0?x?c.canvas.bounds:e.worldRenderBounds:G;else{let $t=i.relative||(x?"inner":"local");switch(d=m.scaleX,g=m.scaleY,$t){case"inner":st.set(m);break;case"local":st.set(m).divide(e.localTransform),d/=e.scaleX,g/=e.scaleY;break;case"world":d=1,g=1;break;case"page":$t=e.leafer;default:st.set(m).divide(e.getTransform($t));const Yt=$t.worldTransform;d/=d/Yt.scaleX,g/=g/Yt.scaleY}u=e.getBounds("render",$t)}const q={scaleX:1,scaleY:1};Wt.getScaleData(i.scale,i.size,u,q);let dt=i.pixelRatio||1;e.isApp&&(q.scaleX*=dt,q.scaleY*=dt,dt=e.app.pixelRatio);const{x:te,y:he,width:me,height:xt}=new wt(u).scale(q.scaleX,q.scaleY),tt={matrix:st.scale(1/q.scaleX,1/q.scaleY).invert().translate(-te,-he).withScale(1/d*q.scaleX,1/g*q.scaleY)};let N=St.canvas({width:Math.round(me),height:Math.round(xt),pixelRatio:dt,smooth:A,contextSettings:Y}),Ht;if(b&&(Ht=e,Ht.__worldOpacity=0,e=c,tt.bounds=N.bounds),N.save(),C&&it!==void 0){const $t=e.get("fill");e.fill="",e.__render(N,tt),e.fill=$t}else e.__render(N,tt);if(N.restore(),Ht&&Ht.__updateWorldOpacity(),P){f=db(N);const $t=N,{width:Yt,height:Zn}=f,qn={x:0,y:0,width:Yt,height:Zn,pixelRatio:dt};N=St.canvas(qn),N.copyWorld($t,f,qn)}Et&&N.fillWorld(N.bounds,it||"#FFFFFF","destination-over"),v&&v(N);const ni=t==="canvas"?N:yield N.export(t,i);a({data:ni,width:N.pixelWidth,height:N.pixelHeight,renderBounds:u,trimBounds:f})}))):a({data:!1})}))}};let Ca;function _b(e){return Ca||(Ca=new Ga),new Promise(t=>{Ca.add(()=>Yh(this,void 0,void 0,function*(){return yield e(t)}),{parallel:!1})})}function Af(e){e.__.__needComputePaint&&e.__.__computePaint(),e.isBranch&&e.children.forEach(t=>Af(t))}const oo=Ah.prototype,Df=ht.get("@leafer-ui/export");oo.export=function(e,t){const{quality:i,blob:s}=gi.getExportOptions(t);return e.includes(".")?this.saveAs(e,i):s?this.toBlob(e,i):this.toDataURL(e,i)};oo.toBlob=function(e,t){return new Promise(i=>{D.origin.canvasToBolb(this.view,e,t).then(s=>{i(s)}).catch(s=>{Df.error(s),i(null)})})};oo.toDataURL=function(e,t){return D.origin.canvasToDataURL(this.view,e,t)};oo.saveAs=function(e,t){return new Promise(i=>{D.origin.canvasSaveAs(this.view,e,t).then(()=>{i(!0)}).catch(s=>{Df.error(s),i(!1)})})};Object.assign(of,ob);Object.assign(rs,hb);Object.assign(Tt,Kv);Object.assign(os,nx);Object.assign(Pr,dx);Object.assign(Xa,wx);Object.assign(Ds,fb);Object.assign(St,{interaction:(e,t,i,s)=>new Iv(e,t,i,s),hitCanvas:(e,t)=>new wf(e,t),hitCanvasManager:()=>new hv});pv();const{M:pb,L:gb,C:yb,Q:mb,Z:wb,N:vb,D:xb,X:bb,G:Ru,F:Su,O:Eb,P:Cb,U:Tb}=Te,Xh={scale(e,t,i){if(!e)return;let s,n=0,r=e.length;for(;n<r;)switch(s=e[n],s){case pb:case gb:Pe(e,t,i,n,1),n+=3;break;case yb:Pe(e,t,i,n,3),n+=7;break;case mb:Pe(e,t,i,n,2),n+=5;break;case wb:n+=1;break;case vb:Pe(e,t,i,n,2),n+=5;break;case xb:Pe(e,t,i,n,2),n+=9;break;case bb:Pe(e,t,i,n,2),n+=6;break;case Ru:Pe(e,t,i,n,2),n+=9;break;case Su:Pe(e,t,i,n,2),n+=5;break;case Eb:e[n]=Ru,e.splice(n+4,0,e[n+3],0),Pe(e,t,i,n,2),n+=9,r+=2;break;case Cb:e[n]=Su,e.splice(n+4,0,e[n+3]),Pe(e,t,i,n,2),n+=5,r+=1;break;case Tb:Pe(e,t,i,n,2),n+=6;break}},scalePoints(e,t,i,s,n){for(let r=n?s+1:0,o=n?r+n*2:e.length;r<o;r+=2)e[r]*=t,e[r+1]*=i}},{scalePoints:Pe}=Xh,Ta=U.get(),{topLeft:Rb,top:Sb,topRight:Pb,right:Lb,bottom:Ob,left:Bb}=Fs;function ao(e,t,i){e.pathInputed?ho(e,t,i):(t!==1&&(e.width*=t),i!==1&&(e.height*=i))}function kb(e,t,i){const{app:s}=e,n=s&&s.editor;let r=t;if(n.editing){const a=e.__layout;let{width:h,height:l}=a.boxBounds;switch(h*=i-t,l*=t-i,n.resizeDirection){case Sb:case Ob:r=i,a.affectScaleOrRotation?e.moveInner(-h/2,0):e.x-=h/2;break;case Bb:case Lb:a.affectScaleOrRotation?e.moveInner(0,-l/2):e.y-=l/2;break;case Rb:case Pb:a.affectScaleOrRotation?e.moveInner(0,-l):e.y-=l;break}}e.fontSize*=r;const o=e.__;o.__autoWidth||(e.width*=r),o.__autoHeight||(e.height*=r)}function ho(e,t,i){Xh.scale(e.__.path,t,i),e.path=e.__.path}function If(e,t,i){const{points:s}=e;typeof s[0]=="object"?s.forEach(n=>{n.x*=t,n.y*=i}):Xh.scalePoints(s,t,i),e.points=s}function ih(e,t,i){const{children:s}=e;for(let n=0;n<s.length;n++)Ta.a=t,Ta.d=i,s[n].transform(Ta,!0)}const lo=ns.prototype;lo.scaleResize=function(e,t=e,i){const s=this;i||s.editConfig&&s.editConfig.editSize==="scale"?(s.scaleX*=e,s.scaleY*=t):(e<0&&(s.scaleX*=-1,e=-e),t<0&&(s.scaleY*=-1,t=-t),this.__scaleResize(e,t))};lo.__scaleResize=function(e,t){ao(this,e,t)};lo.resizeWidth=function(e){const t=e/this.getBounds("box","local").width;this.scaleOf(this.__layout.boxBounds,t,this.__.lockRatio?t:1,!0)};lo.resizeHeight=function(e){const t=e/this.getBounds("box","local").height;this.scaleOf(this.__layout.boxBounds,this.__.lockRatio?t:1,t,!0)};_t.prototype.__scaleResize=function(e,t){this.__.resizeFontSize||this.editConfig&&this.editConfig.editSize==="font-size"?kb(this,e,t):ao(this,e,t)};js.prototype.__scaleResize=function(e,t){ho(this,e,t)};ei.prototype.__scaleResize=function(e,t){this.pathInputed?ho(this,e,t):this.points?If(this,e,t):this.width*=e};xi.prototype.__scaleResize=function(e,t){this.pathInputed?ho(this,e,t):this.points?If(this,e,t):ao(this,e,t)};Dt.prototype.__scaleResize=function(e,t){ih(this,e,t)};Bt.prototype.__scaleResize=function(e,t){this.__.__autoSize&&this.children.length?ih(this,e,t):(ao(this,e,t),this.__.resizeChildren&&ih(this,e,t))};function Xn(e,t,i,s){var n=arguments.length,r=n<3?t:s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function Pu(e){return e?e instanceof Array?e:[e]:[]}class Ft extends si{get list(){return Pu(this.value)}get oldList(){return Pu(this.oldValue)}constructor(t,i){super(t),i&&Object.assign(this,i)}}Ft.SELECT="editor.select";Ft.HOVER="editor.hover";class sh extends Ft{constructor(t,i){super(t,i)}}sh.MOVE="editor.move";class Zi extends Ft{constructor(t,i){super(t,i)}}Zi.SCALE="editor.scale";class nh extends Ft{constructor(t,i){super(t,i)}}nh.ROTATE="editor.rotate";class rh extends Ft{constructor(t,i){super(t,i)}}rh.SKEW="editor.skew";function Zh(e){return(t,i)=>{const s="_"+i;ye(t,i,{get(){return this[s]},set(n){const r=this[s];r!==n&&(this[s]=n,e(this,r))}})}}const Ra=U.get(),{abs:Sa}=Math,{copy:Mb,scale:Ab}=U;class oh extends L{constructor(){super(),this.list=[],this.hittable=!1,this.strokeAlign="center"}setTarget(t,i){this.set(i),this.target=t}__draw(t,i){const{list:s}=this;if(s.length){let n;const r=this.__,{stroke:o,strokeWidth:a,fill:h}=r,{bounds:l}=i;for(let c=0;c<s.length;c++){n=s[c];const{worldTransform:u,worldRenderBounds:f}=n;if(l&&l.hit(f,i.matrix)){const d=Sa(u.scaleX),g=Sa(u.scaleY);if(d!==g){Mb(Ra,u),Ab(Ra,1/d,1/g),t.setWorld(Ra,i.matrix),t.beginPath(),r.strokeWidth=a;const{x:m,y:x,width:C,height:b}=n.__layout.boxBounds;t.rect(m*d,x*g,C*d,b*g)}else t.setWorld(u,i.matrix),t.beginPath(),n.__.__useArrow?n.__drawPath(t):n.__.__pathForRender?n.__drawRenderPath(t):n.__drawPathByBox(t),r.strokeWidth=a/Sa(u.scaleX);o&&(typeof o=="string"?Tt.stroke(o,this,t):Tt.strokes(o,this,t)),h&&(typeof h=="string"?Tt.fill(h,this,t):Tt.fills(h,this,t))}}r.strokeWidth=a}}destroy(){this.target=null,super.destroy()}}Xn([Zh(Db)],oh.prototype,"target",void 0);function Db(e){const t=e.target;e.list=t?t instanceof Array?t:[t]:[],e.forceUpdate()}class Ib extends Dt{constructor(t){super(t),this.strokeArea=new ti({strokeAlign:"center"}),this.fillArea=new ti,this.visible=this.hittable=!1,this.addMany(this.fillArea,this.strokeArea)}setStyle(t,i){const{visible:s,stroke:n,strokeWidth:r}=t;this.visible=s,this.strokeArea.reset(Object.assign({stroke:n,strokeWidth:r},i||{})),this.fillArea.reset({visible:!i,fill:n,opacity:.2})}setBounds(t){this.strokeArea.set(t),this.fillArea.set(t)}}const{No:Pa,Yes:Wb,NoAndSkip:Lu,YesAndSkip:Ou}=Hr,Wf={findOne(e){return e.list.find(t=>t.editable)},findBounds(e,t){if(e.__.hittable&&e.__.visible&&!e.__.locked&&t.hit(e.__world)){if(e.__.editable){if(e.isBranch&&!e.__.hitChildren)return e.__.hitSelf?Ou:Lu;if(e.isFrame)return t.includes(e.__layout.boxBounds,e.__world)?Ou:Pa;if(t.hit(e.__layout.boxBounds,e.__world)&&e.__.hitSelf)return Wb}return Pa}else return e.isBranch?Lu:Pa}},{findOne:La}=Wf;class $b extends Dt{get dragging(){return!!this.originList}get running(){const{editor:t}=this;return this.hittable&&t.visible&&t.hittable&&t.mergeConfig.selector}get isMoveMode(){return this.app&&this.app.interaction.moveMode}constructor(t){super(),this.hoverStroker=new oh,this.targetStroker=new oh,this.bounds=new wt,this.selectArea=new Ib,this.__eventIds=[],this.editor=t,this.addMany(this.targetStroker,this.hoverStroker,this.selectArea),this.__listenEvents()}onHover(){const{editor:t}=this;if(this.running&&!this.dragging&&!t.dragging){const{stroke:i,strokeWidth:s,hover:n,hoverStyle:r}=t.mergeConfig;this.hoverStroker.setTarget(n?this.editor.hoverTarget:null,Object.assign({stroke:i,strokeWidth:s},r||{}))}else this.hoverStroker.target=null}onSelect(){if(this.running){const{mergeConfig:t,list:i}=this.editor,{stroke:s,strokeWidth:n}=t;this.targetStroker.setTarget(i,{stroke:s,strokeWidth:Math.max(1,n/2)}),this.hoverStroker.target=null}}update(){this.targetStroker.target&&this.targetStroker.forceUpdate()}onPointerMove(t){const{app:i,editor:s}=this;if(this.running&&!this.isMoveMode&&i.interaction.canHover&&!i.interaction.dragging){const n=this.findUI(t);s.hoverTarget=s.hasItem(n)?null:n}this.isMoveMode&&(s.hoverTarget=null)}onBeforeDown(t){if(t.multiTouch)return;const{select:i}=this.editor.mergeConfig;i==="press"&&(this.app.config.mobile?this.waitSelect=()=>this.checkAndSelect(t):this.checkAndSelect(t))}onTap(t){if(t.multiTouch)return;const{editor:i}=this,{select:s}=i.mergeConfig;s==="tap"?this.checkAndSelect(t):this.waitSelect&&this.waitSelect(),this.needRemoveItem?i.removeItem(this.needRemoveItem):this.isMoveMode&&(i.target=null)}checkAndSelect(t){if(this.needRemoveItem=null,this.allowSelect(t)){const{editor:i}=this,s=this.findUI(t);s?this.isMultipleSelect(t)?i.hasItem(s)?this.needRemoveItem=s:i.addItem(s):i.target=s:this.allow(t.target)&&(t.shiftKey||(i.target=null))}}onDragStart(t){if(!t.multiTouch&&(this.waitSelect&&this.waitSelect(),this.allowDrag(t))){const{editor:i}=this,{stroke:s,area:n}=i.mergeConfig,{x:r,y:o}=t.getInnerPoint(this);this.bounds.set(r,o),this.selectArea.setStyle({visible:!0,stroke:s,x:r,y:o},n),this.selectArea.setBounds(this.bounds.get()),this.originList=i.leafList.clone()}}onDrag(t){if(!t.multiTouch){if(this.editor.dragging)return this.onDragEnd(t);if(this.dragging){const{editor:i}=this,s=t.getInnerTotal(this),n=this.bounds.clone().unsign(),r=new ft(i.app.find(Wf.findBounds,n));if(this.bounds.width=s.x,this.bounds.height=s.y,this.selectArea.setBounds(n.get()),r.length){const o=[];this.originList.forEach(a=>{r.has(a)||o.push(a)}),r.forEach(a=>{this.originList.has(a)||o.push(a)}),(o.length!==i.list.length||i.list.some((a,h)=>a!==o[h]))&&(i.target=o)}else i.target=this.originList.list}}}onDragEnd(t){t.multiTouch||this.dragging&&(this.originList=null,this.selectArea.visible=!1)}onAutoMove(t){if(this.dragging){const{x:i,y:s}=t.getLocalMove(this);this.bounds.x+=i,this.bounds.y+=s}}allow(t){return t.leafer!==this.editor.leafer}allowDrag(t){return this.running&&this.editor.mergeConfig.boxSelect&&!t.target.draggable?!this.editor.editing&&this.allow(t.target)||t.shiftKey&&!La(t.path):!1}allowSelect(t){return this.running&&!this.isMoveMode&&!t.middle}findDeepOne(t){const i={exclude:new ft(this.editor.editBox.rect)};return La(t.target.leafer.interaction.findPath(t,i))}findUI(t){return this.isMultipleSelect(t)?this.findDeepOne(t):La(t.path)}isMultipleSelect(t){return t.shiftKey||this.editor.mergeConfig.continuousSelect}__listenEvents(){const{editor:t}=this;t.waitLeafer(()=>{const{app:i}=t;i.selector.proxy=t,this.__eventIds=[t.on_(Ft.HOVER,this.onHover,this),t.on_(Ft.SELECT,this.onSelect,this),i.on_($.MOVE,this.onPointerMove,this),i.on_($.BEFORE_DOWN,this.onBeforeDown,this),i.on_($.TAP,this.onTap,this),i.on_(Z.START,this.onDragStart,this,!0),i.on_(Z.DRAG,this.onDrag,this),i.on_(Z.END,this.onDragEnd,this),i.on_(Mt.MOVE,this.onAutoMove,this),i.on_([ne.ZOOM,Mt.MOVE],()=>{this.editor.hoverTarget=null})]})}__removeListenEvents(){this.__eventIds&&(this.off_(this.__eventIds),this.__eventIds.length=0)}destroy(){this.editor=this.originList=this.needRemoveItem=null,this.__removeListenEvents(),super.destroy()}}const{topLeft:bs,top:un,topRight:Es,right:dn,bottomRight:Cs,bottom:fn,bottomLeft:Ts,left:_n}=Fs,{toPoint:Oa}=mi,{within:Bu}=Wt,qi={getScaleData(e,t,i,s,n,r,o,a){let h,l={},c=1,u=1;const{boxBounds:f,widthRange:d,heightRange:g}=e,{width:m,height:x}=t;r&&(s.x*=2,s.y*=2);const C=e.scaleX/t.scaleX,b=e.scaleY/t.scaleY,P=C<0?-1:1,v=b<0?-1:1,A=a?C:P*f.width/m,Y=a?b:v*f.height/x;s.x*=a?C:P,s.y*=a?b:v,Math.abs(s.x)===m&&(s.x+=.1),Math.abs(s.y)===x&&(s.y+=.1);const G=(-s.y+x)/x,it=(s.x+m)/m,Et=(s.y+x)/x,st=(-s.x+m)/m;switch(i){case un:u=G,h="bottom";break;case dn:c=it,h="left";break;case fn:u=Et,h="top";break;case _n:c=st,h="right";break;case bs:u=G,c=st,h="bottom-right";break;case Es:u=G,c=it,h="bottom-left";break;case Cs:u=Et,c=it,h="top-left";break;case Ts:u=Et,c=st,h="top-right"}if(n&&!(n==="corner"&&i%2)){let dt;switch(i){case un:case fn:dt=u;break;case _n:case dn:dt=c;break;default:dt=Math.sqrt(Math.abs(c*u))}c=c<0?-dt:dt,u=u<0?-dt:dt}if(c/=A,u/=Y,!o){const{worldTransform:q}=e;c<0&&(c=1/f.width/q.scaleX),u<0&&(u=1/f.height/q.scaleY)}if(d){const q=f.width*e.scaleX;c=Bu(q*c,d)/q}if(g){const q=f.height*e.scaleY;u=Bu(q*u,g)/q}return Oa(r||h,f,l,!0),{origin:l,scaleX:c,scaleY:u,direction:i,lockRatio:n,around:r}},getRotateData(e,t,i,s,n){let r,o={};switch(t){case bs:r="bottom-right";break;case Es:r="bottom-left";break;case Cs:r="top-left";break;case Ts:r="top-right";break;default:r="center"}return Oa(n||r,e,o,!0),{origin:o,rotation:j.getRotation(s,o,i)}},getSkewData(e,t,i,s){let n,r={},o=0,a=0,h;switch(t){case un:h={x:.5,y:0},n="bottom",o=1;break;case fn:h={x:.5,y:1},n="top",o=1;break;case _n:h={x:0,y:.5},n="right",a=1;break;case dn:h={x:1,y:.5},n="left",a=1}const{width:l,height:c}=e;h.x=h.x*l,h.y=h.y*c,Oa(s||n,e,r,!0);const u=j.getRotation(h,r,{x:h.x+(o?i.x:0),y:h.y+(a?i.y:0)});return o?o=-u:a=u,{origin:r,skewX:o,skewY:a}},getAround(e,t){return t&&!e?"center":e},getRotateDirection(e,t,i=8){return e=(e+Math.round(t/(360/i)))%i,e<0&&(e+=i),e},getFlipDirection(e,t,i){if(t)switch(e){case _n:e=dn;break;case bs:e=Es;break;case Ts:e=Cs;break;case dn:e=_n;break;case Es:e=bs;break;case Cs:e=Ts;break}if(i)switch(e){case un:e=fn;break;case bs:e=Ts;break;case Es:e=Cs;break;case fn:e=un;break;case Ts:e=bs;break;case Cs:e=Es;break}return e}},Ba={};function ah(e,t){const{editBox:i}=e,s=i.enterPoint;if(!s||!e.editing||!i.visible||s.name==="circle")return;if(s.pointType==="button"){s.cursor||(s.cursor="pointer");return}let{rotation:n}=i;const{resizeCursor:r,rotateCursor:o,skewCursor:a,resizeable:h,rotateable:l,skewable:c}=e.mergeConfig,{pointType:u}=s,{flippedX:f,flippedY:d}=i;let g=u==="resize";g&&l&&(t.metaKey||t.ctrlKey||!h)&&(g=!1);const x=c&&!g&&s.name==="resize-line"?a:g?r:o;n+=(qi.getFlipDirection(s.direction,f,d)+1)*45,n=Math.round(Wt.formatRotation(n,!0)/2)*2;const{url:C,x:b,y:P}=x,v=C+n;Ba[v]?s.cursor=Ba[v]:Ba[v]=s.cursor={url:Fb(C,n),x:b,y:P}}function $f(e){const{moveCursor:t,moveable:i}=e.mergeConfig;e.editBox.rect.cursor=i?t:void 0}function Fb(e,t){return'"data:image/svg+xml,'+encodeURIComponent(e.replace("{{rotation}}",t.toString()))+'"'}class vr extends Bt{}const ku=["top","right","bottom","left"];class Hb extends Dt{get flipped(){return this.flippedX||this.flippedY}get flippedX(){return this.scaleX<0}get flippedY(){return this.scaleY<0}get flippedOne(){return this.scaleX*this.scaleY<0}constructor(t){super(),this.view=new Dt,this.rect=new Bt({name:"rect",hitFill:"all",hitStroke:"none",strokeAlign:"center",hitRadius:5}),this.circle=new vr({name:"circle",strokeAlign:"center",around:"center",cursor:"crosshair",hitRadius:5}),this.buttons=new Dt({around:"center",hitSelf:!1}),this.resizePoints=[],this.rotatePoints=[],this.resizeLines=[],this.__eventIds=[],this.editor=t,this.visible=!1,this.create(),this.__listenEvents()}create(){let t,i,s;const{view:n,resizePoints:r,rotatePoints:o,resizeLines:a,rect:h,circle:l,buttons:c}=this,u=["bottom-right","bottom","bottom-left","left","top-left","top","top-right","right"];for(let f=0;f<8;f++)t=new vr({name:"rotate-point",around:u[f],width:15,height:15,hitFill:"all"}),o.push(t),this.listenPointEvents(t,"rotate",f),f%2&&(i=new vr({name:"resize-line",around:"center",width:10,height:10,hitFill:"all"}),a.push(i),this.listenPointEvents(i,"resize",f)),s=new vr({name:"resize-point",hitRadius:5}),r.push(s),this.listenPointEvents(s,"resize",f);this.listenPointEvents(l,"rotate",2),n.addMany(...o,h,l,c,...a,...r),this.add(n)}load(){const{mergeConfig:t,element:i,single:s}=this.editor,{rect:n,circle:r,resizePoints:o}=this,{stroke:a,strokeWidth:h}=t,l=this.getPointsStyle(),c=this.getMiddlePointsStyle();let u;for(let f=0;f<8;f++)u=o[f],u.set(this.getPointStyle(f%2?c[(f-1)/2%c.length]:l[f/2%l.length])),f%2||(u.rotation=f/2*90);r.set(this.getPointStyle(t.circle||t.rotatePoint||l[0])),n.set(Object.assign({stroke:a,strokeWidth:h},t.rect||{})),n.hittable=!s,n.syncEventer=s&&this.editor,s&&(i.syncEventer=n,this.app.interaction.bottomList=[{target:n,proxy:i}])}update(t){if(this.visible=!this.editor.element.locked,this.view.worldOpacity){const{mergeConfig:i}=this.editor,{width:s,height:n}=t,{rect:r,circle:o,buttons:a,resizePoints:h,rotatePoints:l,resizeLines:c}=this,{middlePoint:u,resizeable:f,rotateable:d,hideOnSmall:g}=i,m=typeof g=="number"?g:10,x=!(g&&s<m&&n<m);let C={},b,P,v;for(let A=0;A<8;A++)mi.toPoint(mi.directionData[A],t,C),P=h[A],b=l[A],v=c[Math.floor(A/2)],P.set(C),b.set(C),v.set(C),P.visible=v.visible=x&&!!(f||d),b.visible=x&&d&&f&&!i.rotatePoint,A%2&&(P.visible=b.visible=x&&!!u,(A+1)/2%2?(v.width=s,P.width>s-30&&(P.visible=!1)):(v.height=n,P.rotation=90,P.width>n-30&&(P.visible=!1)));o.visible=x&&d&&!!(i.circle||i.rotatePoint),o.visible&&this.layoutCircle(i),r.path&&(r.path=null),r.set(Object.assign(Object.assign({},t),{visible:!0})),a.visible=x&&a.children.length>0,a.visible&&this.layoutButtons(i)}}layoutCircle(t){const{circleDirection:i,circleMargin:s,buttonsMargin:n,buttonsDirection:r,middlePoint:o}=t,a=ku.indexOf(i||(this.buttons.children.length&&r==="bottom"?"top":"bottom"));this.setButtonPosition(this.circle,a,s||n,!!o)}layoutButtons(t){const{buttons:i}=this,{buttonsDirection:s,buttonsFixed:n,buttonsMargin:r,middlePoint:o}=t,{flippedX:a,flippedY:h}=this;let l=ku.indexOf(s);(l%2&&a||(l+1)%2&&h)&&n&&(l=(l+2)%4);const c=n?qi.getRotateDirection(l,this.flippedOne?this.rotation:-this.rotation,4):l;this.setButtonPosition(i,c,r,!!o),n&&(i.rotation=(c-l)*90),i.scaleX=a?-1:1,i.scaleY=h?-1:1}setButtonPosition(t,i,s,n){const r=this.resizePoints[i*2+1],o=i%2,a=!i||i===3?-1:1,h=i%2,l=(s+(h?(n?r.width:0)+t.boxBounds.width:(n?r.height:0)+t.boxBounds.height)/2)*a;o?(t.x=r.x+l,t.y=r.y):(t.x=r.x,t.y=r.y+l)}unload(){this.visible=!1}getPointStyle(t){const{stroke:i,strokeWidth:s,pointFill:n,pointSize:r,pointRadius:o}=this.editor.mergeConfig,a={fill:n,stroke:i,strokeWidth:s,around:"center",strokeAlign:"center",width:r,height:r,cornerRadius:o};return t?Object.assign(a,t):a}getPointsStyle(){const{point:t}=this.editor.mergeConfig;return t instanceof Array?t:[t]}getMiddlePointsStyle(){const{middlePoint:t}=this.editor.mergeConfig;return t instanceof Array?t:t?[t]:this.getPointsStyle()}onSelect(t){t.oldList.length===1&&(t.oldList[0].syncEventer=null,this.app&&(this.app.interaction.bottomList=null))}onDragStart(t){this.dragging=!0;const{editor:i}=this;t.current.name==="rect"?(this.moving=!0,i.dragStartPoint={x:i.element.x,y:i.element.y},i.opacity=i.mergeConfig.hideOnMove?0:1):t.current.pointType==="resize"&&(i.dragStartBounds=Object.assign({},i.element.getLayoutBounds("box","local")),i.resizeDirection=t.current.direction)}onDragEnd(t){this.dragging=!1,this.moving=!1,t.current.name==="rect"&&(this.editor.opacity=1),this.editor.resizeDirection=void 0}onDrag(t){const{editor:i}=this,s=this.enterPoint=t.current;s.pointType==="rotate"||t.metaKey||t.ctrlKey||!i.mergeConfig.resizeable?i.mergeConfig.rotateable&&i.onRotate(t):s.pointType==="resize"&&i.onScale(t),ah(i,t)}onArrow(t){if(this.editor.editing&&this.editor.mergeConfig.keyEvent){const i={x:0,y:0},s=t.shiftKey?10:1;switch(t.code){case"ArrowDown":i.y=s;break;case"ArrowUp":i.y=-s;break;case"ArrowLeft":i.x=-s;break;case"ArrowRight":i.x=s}this.editor.move(i)}}onDoubleTap(t){this.editor.mergeConfig.openInner==="double"&&this.openInner(t)}onLongPress(t){this.editor.mergeConfig.openInner==="long"&&this.openInner(t)}openInner(t){const{editor:i}=this;if(i.single){const{element:s}=i;if(s.isBranch){if(s.textBox){const n=s.children.find(r=>r.editable&&r instanceof _t);if(n)return i.openInnerEditor(n)}i.openGroup(s),i.target=i.selector.findDeepOne(t)}else i.openInnerEditor()}}listenPointEvents(t,i,s){const{editor:n}=this;t.direction=s,t.pointType=i,t.on_(Z.START,this.onDragStart,this),t.on_(Z.DRAG,this.onDrag,this),t.on_(Z.END,this.onDragEnd,this),t.on_($.LEAVE,()=>this.enterPoint=null),t.name!=="circle"&&t.on_($.ENTER,r=>{this.enterPoint=t,ah(n,r)})}__listenEvents(){const{rect:t,editor:i}=this;this.__eventIds=[i.on_(Ft.SELECT,this.onSelect,this),t.on_(Z.START,this.onDragStart,this),t.on_(Z.DRAG,i.onMove,i),t.on_(Z.END,this.onDragEnd,this),t.on_($.ENTER,()=>$f(i)),t.on_($.DOUBLE_TAP,this.onDoubleTap,this),t.on_($.LONG_PRESS,this.onLongPress,this)]}__removeListenEvents(){this.off_(this.__eventIds),this.__eventIds.length=0}destroy(){this.editor=null,this.__removeListenEvents(),super.destroy()}}class zb extends L{constructor(t){super(),this.editor=t,this.hittable=!1}__draw(t,i){const{editor:s}=this,{mask:n}=s.mergeConfig;if(n&&s.list.length){const{rect:r}=s.editBox,{width:o,height:a}=r.__;t.resetTransform(),t.fillWorld(t.bounds,n===!0?"rgba(0,0,0,0.8)":n),t.setWorld(r.__world,i.matrix),t.clearRect(0,0,o,a)}}destroy(){this.editor=null,super.destroy()}}const qh=`
<feOffset dy="1"/>
<feGaussianBlur stdDeviation="1.5"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>
<feBlend mode="normal" in="SourceGraphic" result="shape"/>`,Nb=`
<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#f)">
<g transform="rotate({{rotation}},12,12)">
<path d="M7.5 8.0H8.5V5.9L6.8 7.2L7.5 8.0ZM3 11.4L2.3 10.6L1.3 11.4L2.3 12.2L3 11.4ZM7.5 10.4H6.5V11.4H7.5V10.4ZM16.5 10.4V11.4H17.5V10.4H16.5ZM16.5 8.0L17.1 7.2L15.5 5.9V8.0H16.5ZM21 11.4L21.6 12.2L22.6 11.4L21.6 10.6L21 11.4ZM16.5 14.9H15.5V16.9L17.1 15.7L16.5 14.9ZM16.5 12.4H17.5V11.4H16.5V12.4ZM7.5 12.4V11.4H6.5V12.4H7.5ZM7.5 14.9L6.8 15.7L8.5 16.9V14.9H7.5ZM6.8 7.2L2.3 10.6L3.6 12.2L8.1 8.7L6.8 7.2ZM8.5 10.4V8.0H6.5V10.4H8.5ZM16.5 9.4H7.5V11.4H16.5V9.4ZM17.5 10.4V8.0H15.5V10.4H17.5ZM15.8 8.7L20.3 12.2L21.6 10.6L17.1 7.2L15.8 8.7ZM20.3 10.6L15.8 14.1L17.1 15.7L21.6 12.2L20.3 10.6ZM17.5 14.9V12.4H15.5V14.9H17.5ZM7.5 13.4H16.5V11.4H7.5V13.4ZM8.5 14.9V12.4H6.5V14.9H8.5ZM2.3 12.2L6.8 15.7L8.1 14.1L3.6 10.6L2.3 12.2Z" fill="white"/>
<path fill-rule="evenodd" d="M3 11.4L7.5 8.0V10.4H16.5V8.0L21 11.4L16.5 14.9V12.4H7.5V14.9L3 11.4Z" fill="black"/>
</g>
</g>
<defs>
<filter id="f" x="-1.6" y="3.9" width="27.2" height="16.9" filterUnits="userSpaceOnUse">
${qh}
</filter>
</defs>
</svg>
`,jb=`
<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#f)">
<g transform="rotate(135,12,12),rotate({{rotation}},12,12)">
<path d="M20.4 8H21.4L20.8 7.1L17.3 2.6L17 2.1L16.6 2.6L13.1 7.1L12.5 8H13.5H15.4C14.9 11.8 11.8 14.9 8 15.4V13.5V12.5L7.1 13.1L2.6 16.6L2.1 17L2.6 17.3L7.1 20.8L8 21.4V20.4V18.4C13.5 17.9 17.9 13.5 18.4 8H20.4Z" stroke="white"/>
<path fill-rule="evenodd" d="M17 3L20.4 7.5H17.9C17.7 13.1 13.1 17.7 7.5 17.9V20.4L3 17L7.5 13.5V15.9C12.0 15.7 15.7 12.0 15.9 7.5H13.5L17 3Z" fill="black"/>
</g>
</g>
<defs>
<filter id="f" x="-1.6" y="-0.6" width="27.1" height="27.1" filterUnits="userSpaceOnUse">
${qh}
</filter>
</defs>
</svg>
`,Vb=`
<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#f)">
<g transform="rotate(90,12,12),rotate({{rotation}},12,12)">
<path d="M21 10.4L21 11.4L23.8 11.4L21.6 9.6L21 10.4ZM17 10.4V11.4L17 11.4L17 10.4ZM15.5 6L16.1 5.2L14.5 3.9V6H15.5ZM15.5 8.4V9.4H16.5V8.4H15.5ZM6 8.4V7.4H5V8.4H6ZM6 10.4H5V11.4H6V10.4ZM7 14.4V13.4L7 13.4L7 14.4ZM3 14.4L3 13.4L0.1 13.4L2.3 15.2L3 14.4ZM8.5 18.9L7.8 19.7L9.5 21.0V18.9H8.5ZM8.5 16.4V15.4H7.5V16.4H8.5ZM19 16.4V17.4H20V16.4H19ZM19 14.4H20V13.4H19V14.4ZM21 9.4L17 9.4L17 11.4L21 11.4L21 9.4ZM14.8 6.7L20.3 11.2L21.6 9.6L16.1 5.2L14.8 6.7ZM16.5 8.4V6H14.5V8.4H16.5ZM6 9.4H15.5V7.4H6V9.4ZM7 10.4V8.4H5V10.4H7ZM15.5 9.4H6V11.4H15.5V9.4ZM17 9.4H15.5V11.4H17V9.4ZM7 15.4H8.5V13.4H7V15.4ZM3 15.4L7 15.4L7 13.4L3 13.4L3 15.4ZM9.1 18.1L3.6 13.6L2.3 15.2L7.8 19.7L9.1 18.1ZM7.5 16.4V18.9H9.5V16.4H7.5ZM19 15.4H8.5V17.4H19V15.4ZM18 14.4V16.4H20V14.4H18ZM8.5 15.4H19V13.4H8.5V15.4Z" fill="white"/>
<path fill-rule="evenodd" d="M17 10.4L21 10.4L15.5 6V8.4H6V10.4H15.5H17ZM8.5 14.4H7L3 14.4L8.5 18.9V16.4H19V14.4H8.5Z" fill="black"/>
</g>
</g>
<defs>
<filter x="-2.8" y="1.9" width="29.6" height="23.1" filterUnits="userSpaceOnUse" >
${qh}
</filter>
</defs>
</svg>
`,Ub={editSize:"size",keyEvent:!0,stroke:"#836DFF",strokeWidth:2,pointFill:"#FFFFFF",pointSize:10,pointRadius:16,rotateGap:45,buttonsDirection:"bottom",buttonsMargin:12,hideOnSmall:!0,moveCursor:"move",resizeCursor:{url:Nb,x:12,y:12},rotateCursor:{url:jb,x:12,y:12},skewCursor:{url:Vb,x:12,y:12},selector:!0,hover:!0,select:"press",openInner:"double",boxSelect:!0,moveable:!0,resizeable:!0,flipable:!0,rotateable:!0,skewable:!0},Yb=new wt;function Ff(e){const{simulateTarget:t,list:i}=e,{zoomLayer:s}=i[0].leafer.zoomLayer;t.safeChange(()=>t.reset(Yb.setListWithFn(i,n=>n.getBounds("box","page")).get())),s.add(t)}function Gb(e,t){const{target:i}=e;i?e.leafList=i instanceof ft?i:new ft((i instanceof Array,i)):(e.simulateTarget.remove(),e.leafList.reset(),e.closeInnerEditor()),e.emitEvent(new Ft(Ft.SELECT,{editor:e,value:i,oldValue:t})),e.checkOpenedGroups(),e.editing?e.waitLeafer(()=>{e.multiple&&Ff(e),$f(e),e.updateEditTool(),e.update(),e.listenTargetEvents()}):(e.updateEditTool(),e.removeTargetEvents())}function Kb(e,t){e.emitEvent(new Ft(Ft.HOVER,{editor:e,value:e.hoverTarget,oldValue:t}))}const Mu=(e,t)=>e.parent.children.indexOf(e)-t.parent.children.indexOf(t),Au=(e,t)=>t.parent.children.indexOf(t)-e.parent.children.indexOf(e),xr={group(e,t,i){e.sort(Au);const{app:s,parent:n}=e[0];let r;i&&i.add?r=i:r=new Dt(i),n.addAt(r,n.children.indexOf(e[0])),e.sort(Mu);const o=new re(t.worldTransform);return o.divideParent(n.worldTransform),r.setTransform(o),r.editable=!0,r.hitChildren=!1,s.lockLayout(),e.forEach(a=>a.dropTo(r)),s.unlockLayout(),r},ungroup(e){const{app:t}=e[0],i=[];return t.lockLayout(),e.forEach(s=>{if(s.isBranch&&!s.isBranchLeaf){const{parent:n,children:r}=s;for(;r.length;)i.push(r[0]),r[0].dropTo(n,n.children.indexOf(s));s.remove()}else i.push(s)}),t.unlockLayout(),i},toTop(e){e.sort(Mu),e.forEach(t=>{t.parent&&t.parent.add(t)})},toBottom(e){e.sort(Au),e.forEach(t=>{t.parent&&t.parent.addAt(t,0)})}},Xb=ht.get("EditToolCreator");function Hf(){return e=>{es.register(e)}}const es={list:{},register(e){const{tag:t}=e.prototype;ka[t]?Xb.repeat(t):ka[t]=e},get(e,t){return new ka[e](t)}},{list:ka}=es;class pi extends Ft{constructor(t,i){super(t,i)}}pi.BEFORE_OPEN="innerEditor.before_open";pi.OPEN="innerEditor.open";pi.BEFORE_CLOSE="innerEditor.before_close";pi.CLOSE="innerEditor.close";class Oe extends Ft{constructor(t,i){super(t,i)}}Oe.GROUP="editor.group";Oe.BEFORE_UNGROUP="editor.before_ungroup";Oe.UNGROUP="editor.ungroup";Oe.OPEN="editor.open_group";Oe.CLOSE="editor.close_group";const{updateMatrix:Ma}=ae,Zb={x:1,y:1,scaleX:1,scaleY:1,rotation:1,skewX:1,skewY:1},pn="top-left";class qb extends ti{get __tag(){return"SimulateElement"}constructor(t){super(),this.checkChange=!0,this.canChange=!0,this.visible=this.hittable=!1,this.on(Ze.CHANGE,i=>{if(this.checkChange&&Zb[i.attrName]){const{attrName:s,newValue:n,oldValue:r}=i,o=s[0]==="s"?(n||1)/(r||1):(n||0)-(r||0);this.canChange=!1;const a=this.__;a[s]=r,Ma(this.parent),Ma(this);const h=new re(this.__world);switch(a[s]=n,this.__layout.rotationChange(),Ma(this),this.changedTransform=new re(this.__world).divide(h),s){case"x":t.move(o,0);break;case"y":t.move(0,o);break;case"rotation":t.rotateOf(pn,o);break;case"scaleX":t.scaleOf(pn,o,1);break;case"scaleY":t.scaleOf(pn,1,o);break;case"skewX":t.skewOf(pn,o,0);break;case"skewY":t.skewOf(pn,0,o)}this.canChange=!0}})}safeChange(t){this.canChange&&(this.checkChange=!1,t(),this.checkChange=!0)}}class Jh extends Dt{get mergeConfig(){const{element:t,config:i}=this;return this.single&&t.editConfig?Object.assign(Object.assign({},i),t.editConfig):i}get list(){return this.leafList.list}get dragHoverExclude(){return[this.editBox.rect]}get editing(){return!!this.list.length}get groupOpening(){return!!this.openedGroupList.length}get multiple(){return this.list.length>1}get single(){return this.list.length===1}get dragging(){return this.editBox.dragging}get moving(){return this.editBox.moving}get element(){return this.multiple?this.simulateTarget:this.list[0]}get buttons(){return this.editBox.buttons}constructor(t,i){super(i),this.config=Ot.clone(Ub),this.leafList=new ft,this.openedGroupList=new ft,this.simulateTarget=new qb(this),this.editBox=new Hb(this),this.editToolList={},this.selector=new $b(this),this.editMask=new zb(this),this.targetEventIds=[],t&&(this.config=Ot.default(t,this.config)),this.addMany(this.editMask,this.selector,this.editBox)}select(t){this.target=t}cancel(){this.target=null}hasItem(t){return this.leafList.has(t)}addItem(t){!this.hasItem(t)&&!t.locked&&(this.leafList.add(t),this.target=this.leafList.list)}removeItem(t){this.hasItem(t)&&(this.leafList.remove(t),this.target=this.leafList.list)}shiftItem(t){this.hasItem(t)?this.removeItem(t):this.addItem(t)}update(){this.editing&&(this.innerEditing&&this.innerEditor.update(),this.editTool.update(),this.selector.update())}updateEditBox(){this.multiple&&Ff(this),this.update()}updateEditTool(){const t=this.editTool;if(t&&(this.editBox.unload(),t.unload(),this.editTool=null),this.editing){const i=this.single?this.list[0].editOuter:"EditTool";this.editTool=this.editToolList[i]=this.editToolList[i]||es.get(i,this),this.editBox.load(),this.editTool.load()}}getEditSize(t){return this.mergeConfig.editSize}onMove(t){if(t instanceof Mt){if(t.moveType!=="drag"){const{moveable:i,resizeable:s}=this.mergeConfig,n=t.getLocalMove(this.element);i==="move"?(t.stop(),this.move(n.x,n.y)):s==="zoom"&&t.stop()}}else{const i={x:t.totalX,y:t.totalY};t.shiftKey&&(Math.abs(i.x)>Math.abs(i.y)?i.y=0:i.x=0),this.move(Z.getValidMove(this.element,this.dragStartPoint,i))}}onScale(t){const{element:i}=this;let{around:s,lockRatio:n,resizeable:r,flipable:o,editSize:a}=this.mergeConfig;if(t instanceof ne)r==="zoom"&&(t.stop(),this.scaleOf(i.getBoxPoint(t),t.scale,t.scale));else{const{direction:h}=t.current;(t.shiftKey||i.lockRatio)&&(n=!0);const l=qi.getScaleData(i,this.dragStartBounds,h,t.getInnerTotal(i),n,qi.getAround(s,t.altKey),o,this.multiple||a==="scale");this.editTool.onScaleWithDrag?(l.drag=t,this.scaleWithDrag(l)):this.scaleOf(l.origin,l.scaleX,l.scaleY)}}onRotate(t){const{skewable:i,rotateable:s,around:n,rotateGap:r}=this.mergeConfig,{direction:o,name:a}=t.current;if(i&&a==="resize-line")return this.onSkew(t);const{element:h}=this;let l,c;if(t instanceof Ce)if(s==="rotate")t.stop(),c=t.rotation,l=h.getBoxPoint(t);else return;else{const u={x:t.x-t.moveX,y:t.y-t.moveY},f=qi.getRotateData(h.boxBounds,o,t.getBoxPoint(h),h.getBoxPoint(u),t.shiftKey?null:h.around||h.origin||n||"center");c=f.rotation,l=f.origin}c=Wt.getGapRotation(c,r,h.rotation),c&&(h.scaleX*h.scaleY<0&&(c=-c),this.rotateOf(l,Wt.float(c,2)))}onSkew(t){const{element:i}=this,{around:s}=this.mergeConfig,{origin:n,skewX:r,skewY:o}=qi.getSkewData(i.boxBounds,t.current.direction,t.getInnerMove(i),qi.getAround(s,t.altKey));!r&&!o||this.skewOf(n,r,o)}move(t,i=0){if(!this.checkTransform("moveable"))return;const{element:s}=this,n=s.getWorldPointByLocal(typeof t=="object"?Object.assign({},t):{x:t,y:i},null,!0);this.multiple&&s.safeChange(()=>s.move(t,i));const r=new sh(sh.MOVE,{target:s,editor:this,moveX:n.x,moveY:n.y});this.editTool.onMove(r),this.emitEvent(r)}scaleWithDrag(t){if(!this.checkTransform("resizeable"))return;const{element:i}=this,s=new Zi(Zi.SCALE,Object.assign(Object.assign({},t),{target:i,editor:this,worldOrigin:i.getWorldPoint(t.origin)}));this.editTool.onScaleWithDrag(s),this.emitEvent(s)}scaleOf(t,i,s=i,n){if(!this.checkTransform("resizeable"))return;const{element:r}=this,o=this.getWorldOrigin(t),a=this.multiple&&this.getChangedTransform(()=>r.safeChange(()=>r.scaleOf(t,i,s))),h=new Zi(Zi.SCALE,{target:r,editor:this,worldOrigin:o,scaleX:i,scaleY:s,transform:a});this.editTool.onScale(h),this.emitEvent(h)}flip(t){if(!this.checkTransform("resizeable"))return;const{element:i}=this,s=this.getWorldOrigin("center"),n=this.multiple?this.getChangedTransform(()=>i.safeChange(()=>i.flip(t))):new re(ae.getFlipTransform(i,t)),r=new Zi(Zi.SCALE,{target:i,editor:this,worldOrigin:s,scaleX:t==="x"?-1:1,scaleY:t==="y"?-1:1,transform:n});this.editTool.onScale(r),this.emitEvent(r)}rotateOf(t,i){if(!this.checkTransform("rotateable"))return;const{element:s}=this,n=this.getWorldOrigin(t),r=this.multiple&&this.getChangedTransform(()=>s.safeChange(()=>s.rotateOf(t,i))),o=new nh(nh.ROTATE,{target:s,editor:this,worldOrigin:n,rotation:i,transform:r});this.editTool.onRotate(o),this.emitEvent(o)}skewOf(t,i,s=0,n){if(!this.checkTransform("skewable"))return;const{element:r}=this,o=this.getWorldOrigin(t),a=this.multiple&&this.getChangedTransform(()=>r.safeChange(()=>r.skewOf(t,i,s))),h=new rh(rh.SKEW,{target:r,editor:this,worldOrigin:o,skewX:i,skewY:s,transform:a});this.editTool.onSkew(h),this.emitEvent(h)}checkTransform(t){return this.element&&!this.element.locked&&this.mergeConfig[t]}getWorldOrigin(t){return this.element.getWorldPoint(ae.getInnerOrigin(this.element,t))}getChangedTransform(t){const{element:i}=this;if(this.multiple&&!i.canChange)return i.changedTransform;const s=new re(i.worldTransform);return t(),new re(i.worldTransform).divide(s)}group(t){return this.multiple&&(this.target=xr.group(this.list,this.element,t),this.emitGroupEvent(Oe.GROUP,this.target)),this.target}ungroup(){const{list:t}=this;return t.length&&(t.forEach(i=>i.isBranch&&this.emitGroupEvent(Oe.BEFORE_UNGROUP,i)),this.target=xr.ungroup(t),t.forEach(i=>i.isBranch&&this.emitGroupEvent(Oe.UNGROUP,i))),this.list}openGroup(t){this.openedGroupList.add(t),t.hitChildren=!0,this.emitGroupEvent(Oe.OPEN,t)}closeGroup(t){this.openedGroupList.remove(t),t.hitChildren=!1,this.emitGroupEvent(Oe.CLOSE,t)}checkOpenedGroups(){const t=this.openedGroupList;if(t.length){let{list:i}=t;this.editing&&(i=[],t.forEach(s=>this.list.every(n=>!ae.hasParent(n,s))&&i.push(s))),i.forEach(s=>this.closeGroup(s))}this.editing&&!this.selector.dragging&&this.checkDeepSelect()}checkDeepSelect(){let t,{list:i}=this;for(let s=0;s<i.length;s++)for(t=i[s].parent;t&&!t.hitChildren;)this.openGroup(t),t=t.parent}emitGroupEvent(t,i){const s=new Oe(t,{editTarget:i});this.emitEvent(s),i.emitEvent(s)}openInnerEditor(t,i){if(t&&i&&(this.target=t),this.single){const s=t||this.element,n=s.editInner;n&&es.list[n]&&(this.editTool.unload(),this.innerEditing=!0,this.innerEditor=this.editToolList[n]||es.get(n,this),this.innerEditor.editTarget=s,this.emitInnerEvent(pi.BEFORE_OPEN),this.innerEditor.load(),this.emitInnerEvent(pi.OPEN))}}closeInnerEditor(){this.innerEditing&&(this.innerEditing=!1,this.emitInnerEvent(pi.BEFORE_CLOSE),this.innerEditor.unload(),this.emitInnerEvent(pi.CLOSE),this.editTool.load(),this.innerEditor=null)}emitInnerEvent(t){const{innerEditor:i}=this,{editTarget:s}=i,n=new pi(t,{editTarget:s,innerEditor:i});this.emitEvent(n),s.emitEvent(n)}lock(){this.list.forEach(t=>t.locked=!0),this.update()}unlock(){this.list.forEach(t=>t.locked=!1),this.update()}toTop(){this.list.length&&(xr.toTop(this.list),this.leafList.update())}toBottom(){this.list.length&&(xr.toBottom(this.list),this.leafList.update())}listenTargetEvents(){if(!this.targetEventIds.length){const{app:t,leafer:i}=this;this.targetEventIds=[i.on_(at.START,this.update,this),t.on_(at.CHILD_START,this.forceRender,this),t.on_(Mt.BEFORE_MOVE,this.onMove,this,!0),t.on_(ne.BEFORE_ZOOM,this.onScale,this,!0),t.on_(Ce.BEFORE_ROTATE,this.onRotate,this,!0),t.on_([Ie.HOLD,Ie.UP],s=>{ah(this,s)}),t.on_(Ie.DOWN,this.editBox.onArrow,this.editBox)]}}removeTargetEvents(){const{targetEventIds:t}=this;t.length&&(this.off_(t),t.length=0)}destroy(){this.destroyed||(this.target=this.hoverTarget=null,Object.values(this.editToolList).forEach(t=>t.destroy()),this.simulateTarget.destroy(),this.editToolList={},this.simulateTarget=this.editTool=this.innerEditor=null,super.destroy())}}Xn([Zh(Kb)],Jh.prototype,"hoverTarget",void 0);Xn([Zh(Gb)],Jh.prototype,"target",void 0);class Jb{static registerInnerEditor(){es.register(this)}get tag(){return"InnerEditor"}get editBox(){return this.editor.editBox}constructor(t){this.editor=t,this.create()}onCreate(){}create(){this.view=new Dt,this.onCreate()}onLoad(){}load(){const{editor:t}=this;t&&(t.app&&(t.selector.hittable=t.app.tree.hitChildren=!1),this.onLoad())}onUpdate(){}update(){this.onUpdate()}onUnload(){}unload(){const{editor:t}=this;t&&(t.app&&(t.selector.hittable=t.app.tree.hitChildren=!0),this.onUnload())}onDestroy(){}destroy(){this.onDestroy(),this.editor&&(this.view&&this.view.destroy(),this.eventIds&&this.editor.off_(this.eventIds),this.editor=this.view=this.eventIds=null)}}let hh=class extends Jb{static registerEditTool(){es.register(this)}get tag(){return"EditTool"}onMove(t){const{moveX:i,moveY:s,editor:n}=t,{app:r,list:o}=n;r.lockLayout(),o.forEach(a=>{a.moveWorld(i,s)}),r.unlockLayout()}onScale(t){const{scaleX:i,scaleY:s,transform:n,worldOrigin:r,editor:o}=t,{app:a,list:h}=o;a.lockLayout(),h.forEach(l=>{const c=o.getEditSize(l)!=="scale";n?l.transformWorld(n,c):l.scaleOfWorld(r,i,s,c)}),a.unlockLayout()}onRotate(t){const{rotation:i,transform:s,worldOrigin:n,editor:r}=t,{app:o,list:a}=r;o.lockLayout(),a.forEach(h=>{const l=r.getEditSize(h)!=="scale";s?h.transformWorld(s,l):h.rotateOfWorld(n,i)}),o.unlockLayout()}onSkew(t){const{skewX:i,skewY:s,transform:n,worldOrigin:r,editor:o}=t,{app:a,list:h}=o;a.lockLayout(),h.forEach(l=>{const c=o.getEditSize(l)!=="scale";n?l.transformWorld(n,c):l.skewOfWorld(r,i,s,c)}),a.unlockLayout()}load(){this.editBox.view.visible=!0,this.onLoad()}update(){const{editor:t,editBox:i}=this,{x:s,y:n,scaleX:r,scaleY:o,rotation:a,skewX:h,skewY:l,width:c,height:u}=t.element.getLayoutBounds("box",t,!0);i.set({x:s,y:n,scaleX:r,scaleY:o,rotation:a,skewX:h,skewY:l}),i.update({x:0,y:0,width:c,height:u}),this.onUpdate()}unload(){this.editBox.view.visible=!1,this.onUnload()}};hh=Xn([Hf()],hh);const{left:Du,right:Qb}=Fs,{move:br,copy:Er,toNumberPoints:t1}=j;let Iu=class extends hh{constructor(){super(...arguments),this.scaleOfEvent=!0}get tag(){return"LineEditTool"}onScaleWithDrag(t){const{drag:i,direction:s,lockRatio:n,around:r}=t,o=t.target,a=s===Du;if(o.pathInputed){const{path:h}=o.__,{from:l,to:c}=this.getFromToByPath(h);this.dragPoint(l,c,a,r,this.getInnerMove(o,i,n)),h[1]=l.x,h[2]=l.y,h[4]=c.x,h[5]=c.y,o.path=h}else if(o.points){const{points:h}=o,{from:l,to:c}=this.getFromToByPoints(h);this.dragPoint(l,c,a,r,this.getInnerMove(o,i,n)),h[0]=l.x,h[1]=l.y,h[2]=c.x,h[3]=c.y,o.points=h}else{const h=kh(),{toPoint:l}=o;o.rotation=0,this.dragPoint(h,l,a,r,this.getInnerMove(o,i,n)),o.getLocalPointByInner(h,null,null,!0),o.getLocalPointByInner(l,null,null,!0),o.x=h.x,o.y=h.y,o.getInnerPointByLocal(l,null,null,!0),o.toPoint=l}}getInnerMove(t,i,s){const n=i.getInnerMove(t);return s&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),n}getFromToByPath(t){return{from:{x:t[1],y:t[2]},to:{x:t[4],y:t[5]}}}getFromToByPoints(t){const i=t1(t);return{from:{x:i[0],y:i[1]},to:{x:i[2],y:i[3]}}}dragPoint(t,i,s,n,r){const{x:o,y:a}=r;s?(br(t,o,a),n&&br(i,-o,-a)):(n&&br(t,-o,-a),br(i,o,a))}onSkew(t){}onUpdate(){const{editBox:t}=this,{rotatePoints:i,resizeLines:s,resizePoints:n,rect:r}=t,o=this.editor.element;let a,h;if(o.pathInputed?a=this.getFromToByPath(o.__.path):o.points&&(a=this.getFromToByPoints(o.__.points)),a){const{from:l,to:c}=a;o.innerToWorld(l,l,!1,t),o.innerToWorld(c,c,!1,t),r.pen.clearPath().moveTo(l.x,l.y).lineTo(c.x,c.y),Er(n[7],l),Er(i[7],l),Er(n[3],c),Er(i[3],c)}for(let l=0;l<8;l++)l<4&&(s[l].visible=!1),h=l===Du||l===Qb,n[l].visible=h,i[l].visible=a?!1:h}};Iu=Xn([Hf()],Iu);St.editor=function(e){return new Jh(e)};ye(L.prototype,"editOuter",{get(){return this.__.__isLinePath?"LineEditTool":"EditTool"}});ye(L.prototype,"editInner",{get(){return"PathEditor"}});ye(_t.prototype,"editInner",{get(){return"TextEditor"}});L.setEditConfig=function(e){ye(this.prototype,"editConfig",{get(){return typeof e=="function"?e(this):e}})};L.setEditOuter=function(e){ye(this.prototype,"editOuter",{get(){return typeof e=="string"?e:e(this)}})};L.setEditInner=function(e){ye(this.prototype,"editInner",{get(){return typeof e=="string"?e:e(this)}})};const e1=Math.PI/180;class i1{constructor(t,i,s){this.app=t,this.rulerLeafer=t.addLeafer(),this.contextContainer=this.rulerLeafer.canvas.context,this.options=s||{ruleSize:20,fontSize:10,themes:new Map([["light",{backgroundColor:"#fff",textColor:"#444",borderColor:"#ccc",highlightColor:"#165dff3b"}],["dark",{backgroundColor:"#242424",textColor:"#ddd",borderColor:"#555",highlightColor:"rgba(22,93,255,0.55)"}]])},this.config=i||{enabled:!0,theme:"light"},this.forceRender=this.forceRender.bind(this),this.resize=this.resize.bind(this),this.enabled=this.config.enabled}changeTheme(t){this.theme=t}set theme(t){this.config.theme=t,this.forceRender()}get theme(){return this.config.theme}addTheme(t,i){this.options.themes.set(t,i)}removeTheme(t){this.options.themes.delete(t)}changeEnabled(t){this.enabled=t}get enabled(){return this.config.enabled}set enabled(t){var i,s;this.config.enabled=t,t?(this.app.tree.on(ot.AFTER,this.forceRender),this.app.tree.on(wi.RESIZE,this.resize),(i=this.app.editor)===null||i===void 0||i.on(Ft.SELECT,this.forceRender),this.resize()):(this.app.tree.off(ot.AFTER,this.forceRender),this.app.tree.off(wi.RESIZE,this.resize),(s=this.app.editor)===null||s===void 0||s.off(Ft.SELECT,this.forceRender),this.rulerLeafer.forceRender())}forceRender(){this.enabled&&this.render({ctx:this.contextContainer})}resize(){setTimeout(()=>{this.enabled&&this.render({ctx:this.contextContainer})},100)}getSize(){return{width:this.app.width,height:this.app.height}}render({ctx:t}){this.rulerLeafer.canvas.setWorld({a:1,b:0,c:0,d:1,e:0,f:0});const{worldTransform:i}=this.app.tree,s=[i.a,i.b,i.c,i.d,i.e,i.f];this.calcObjectRect(),this.draw({ctx:t,isHorizontal:!0,rulerLength:this.getSize().width,startCalibration:-(s[4]/s[0])}),this.draw({ctx:t,isHorizontal:!1,rulerLength:this.getSize().height,startCalibration:-(s[5]/s[3])});const n=this.options.themes.get(this.config.theme);this.darwRect(t,{left:0,top:0,width:this.options.ruleSize,height:this.options.ruleSize,fill:n.backgroundColor,stroke:n.borderColor}),this.darwText(t,{text:"px",left:this.options.ruleSize/2,top:this.options.ruleSize/2,align:"center",baseline:"middle",fill:n.textColor}),this.app.tree.emit(at.END,{renderBounds:this.app.tree.canvas.bounds})}draw(t){const{ctx:i,isHorizontal:s,rulerLength:n,startCalibration:r}=t,o=this.getZoom(),a=this.getGap(o),h=Math.ceil(n/o),l=Math.floor(r/a)*a,c=l-r,u=this.getSize(),f=this.options.themes.get(this.config.theme),{ruleSize:d}=this.options,g=2.5;this.darwRect(i,{left:0,top:0,width:s?u.width:d,height:s?d:u.height,fill:f.backgroundColor,stroke:f.borderColor});for(let m=0;m+c<=h;m+=a)for(let x=0;x<10;x++){const C=Math.round((c+m+a*x/10)*o),b=x===0,[P,v]=s?[C,b?0:d-8]:[b?0:d-8,C],[A,Y]=s?[0,d-v]:[d-P,0];this.darwLine(i,{left:P,top:v,width:A,height:Y,stroke:f.borderColor})}if(this.objectRect){const m=s?"x":"y";this.objectRect[m].forEach(x=>{if(x.skip===m)return;const[C,b,P,v]=s?[(x.left-r)*o,0,x.width*o,d]:[0,(x.top-r)*o,d,x.height*o];this.darwRect(i,{left:C,top:b,width:P,height:v,fill:f.highlightColor})})}for(let m=0;m+c<=h;m+=a){const x=(c+m)*o,C=(l+m).toString(),[b,P,v]=s?[x+6,g,0]:[g,x-6,-90];this.darwText(i,{text:C,left:b,top:P,fill:f.textColor,angle:v})}}getGap(t){const i=[.02,.03,.05,.1,.2,.5,1,2,5],s=[5e3,2500,1e3,500,200,100,50,20,10];let n=0;for(;n<i.length&&i[n]<t;)n++;return s[n-1]||1e4}darwRect(t,{left:i,top:s,width:n,height:r,fill:o,stroke:a,strokeWidth:h}){t.save(),t.beginPath(),o&&(t.fillStyle=o),t.rect(i,s,n,r),t.fill(),a&&(t.strokeStyle=a,t.lineWidth=h??1,t.stroke()),t.restore()}darwText(t,{left:i,top:s,text:n,fill:r,align:o,angle:a,fontSize:h,baseline:l}){t.save(),r&&(t.fillStyle=r),t.textAlign=o??"left",t.textBaseline=l??"top",t.font=`${h??12}px Helvetica`,a&&(t.translate(i,s),t.rotate(e1*a),t.translate(-i,-s)),t.fillText(n,i,s),t.restore()}darwLine(t,{left:i,top:s,width:n,height:r,stroke:o,lineWidth:a}){t.save(),t.beginPath(),o&&(t.strokeStyle=o),t.lineWidth=a??1,t.moveTo(i,s),t.lineTo(i+n,s+r),t.stroke(),t.restore()}calcObjectRect(){var t;const i=((t=this.app.editor)===null||t===void 0?void 0:t.list)||[];if(i.length===0){this.objectRect=void 0;return}const s=i.reduce((n,r)=>{const o=r.getBounds("box",this.app.tree),a={left:o.x,top:o.y,width:o.width,height:o.height};return n.push(a),n},[]);s.length!==0&&(this.objectRect={x:this.mergeLines(s,!0),y:this.mergeLines(s,!1)})}mergeLines(t,i){const s=i?"left":"top",n=i?"width":"height";t.sort((a,h)=>a[s]-h[s]);const r=[];let o=Object.assign({},t[0]);for(let a=1;a<t.length;a++){const h=Object.assign({},t[a]);o[s]+o[n]>=h[s]?o[n]=Math.max(o[s]+o[n],h[s]+h[n])-o[s]:(r.push(o),o=Object.assign({},h))}return r.push(o),r}getZoom(){return this.app.tree&&typeof this.app.tree.scale=="number"?this.app.tree.scale:1}dispose(){this.rulerLeafer.destroy(),this.enabled=!1}}const s1={class:"content"},n1={class:"btn-box"},r1=$_({__name:"App",setup(e){let t,i;const s=b_(0);yd(()=>{t=new qa({view:"canvas",ground:{type:"draw"},tree:{},editor:{},sky:{type:"draw",usePartRender:!1}}),i=new i1(t),i.addTheme("custom1",{backgroundColor:"#6cb0ab",textColor:"#a45454",borderColor:"#6f4593",highlightColor:"rgba(22,93,255,0.75)"}),new vi({view:"canvasRef",fill:"gray"}),new Bt({width:100,height:100,fill:"#FF4B4B",editable:!1,x:30,y:60});const o=new Ns({width:600,height:400,editable:!1,lockRatio:!0}),a=new as({x:60,y:60,width:50,height:50,fill:"#32cd79",editable:!0});t.tree.add(o),o.add(a)}),Rh(()=>{});const n=o=>{i.changeTheme(o)},r=()=>{i.enabled=!i.enabled};return(o,a)=>(Rp(),Lp("div",s1,[_e("div",n1,[_e("button",{onClick:a[0]||(a[0]=h=>r()),class:"btn"},"启用/禁用"),_e("button",{onClick:a[1]||(a[1]=h=>n("light")),class:"btn"},"明亮主题"),_e("button",{onClick:a[2]||(a[2]=h=>n("dark")),class:"btn"},"暗黑主题"),_e("div",null,[_e("button",{onClick:a[3]||(a[3]=h=>n("custom1")),class:"btn"},"自定义主题1")]),_e("div",null,[_e("span",null,"FPS："+Uu(s.value),1)])]),a[4]||(a[4]=_e("div",{id:"canvasWrap"},[_e("div",{id:"canvasRef"}),_e("canvas",{id:"canvas"})],-1))]))}}),o1=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i},a1=o1(r1,[["__scopeId","data-v-8eb323fe"]]);dg(a1).mount("#app");
